var fm=h=>{throw TypeError(h)};var Gu=(h,t,i)=>t.has(h)||fm("Cannot "+i);var Wt=(h,t,i)=>(Gu(h,t,"read from private field"),i?i.call(h):t.get(h)),xi=(h,t,i)=>t.has(h)?fm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,i),Ge=(h,t,i,s)=>(Gu(h,t,"write to private field"),s?s.call(h,i):t.set(h,i),i),Ri=(h,t,i)=>(Gu(h,t,"access private method"),i);var pm=(h,t,i,s)=>({set _(a){Ge(h,t,a,i)},get _(){return Wt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();function tA(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var qu={exports:{}},ir={};var gm;function eA(){if(gm)return ir;gm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:c,ref:a!==void 0?a:null,props:o}}return ir.Fragment=t,ir.jsx=i,ir.jsxs=i,ir}var mm;function iA(){return mm||(mm=1,qu.exports=eA()),qu.exports}var N=iA(),Vu={exports:{}},vt={};var ym;function nA(){if(ym)return vt;ym=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function A(x){return x===null||typeof x!="object"?null:(x=v&&x[v]||x["@@iterator"],typeof x=="function"?x:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function E(x,F,j){this.props=x,this.context=F,this.refs=_,this.updater=j||w}E.prototype.isReactComponent={},E.prototype.setState=function(x,F){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,F,"setState")},E.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function R(){}R.prototype=E.prototype;function C(x,F,j){this.props=x,this.context=F,this.refs=_,this.updater=j||w}var O=C.prototype=new R;O.constructor=C,S(O,E.prototype),O.isPureReactComponent=!0;var D=Array.isArray;function k(){}var z={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function Y(x,F,j){var J=j.ref;return{$$typeof:h,type:x,key:F,ref:J!==void 0?J:null,props:j}}function tt(x,F){return Y(x.type,F,x.props)}function et(x){return typeof x=="object"&&x!==null&&x.$$typeof===h}function ft(x){var F={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(j){return F[j]})}var mt=/\/+/g;function pt(x,F){return typeof x=="object"&&x!==null&&x.key!=null?ft(""+x.key):F.toString(36)}function At(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(k,k):(x.status="pending",x.then(function(F){x.status==="pending"&&(x.status="fulfilled",x.value=F)},function(F){x.status==="pending"&&(x.status="rejected",x.reason=F)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function B(x,F,j,J,nt){var ct=typeof x;(ct==="undefined"||ct==="boolean")&&(x=null);var at=!1;if(x===null)at=!0;else switch(ct){case"bigint":case"string":case"number":at=!0;break;case"object":switch(x.$$typeof){case h:case t:at=!0;break;case g:return at=x._init,B(at(x._payload),F,j,J,nt)}}if(at)return nt=nt(x),at=J===""?"."+pt(x,0):J,D(nt)?(j="",at!=null&&(j=at.replace(mt,"$&/")+"/"),B(nt,F,j,"",function(yt){return yt})):nt!=null&&(et(nt)&&(nt=tt(nt,j+(nt.key==null||x&&x.key===nt.key?"":(""+nt.key).replace(mt,"$&/")+"/")+at)),F.push(nt)),1;at=0;var Tt=J===""?".":J+":";if(D(x))for(var st=0;st<x.length;st++)J=x[st],ct=Tt+pt(J,st),at+=B(J,F,j,ct,nt);else if(st=A(x),typeof st=="function")for(x=st.call(x),st=0;!(J=x.next()).done;)J=J.value,ct=Tt+pt(J,st++),at+=B(J,F,j,ct,nt);else if(ct==="object"){if(typeof x.then=="function")return B(At(x),F,j,J,nt);throw F=String(x),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return at}function $(x,F,j){if(x==null)return x;var J=[],nt=0;return B(x,J,"","",function(ct){return F.call(j,ct,nt++)}),J}function it(x){if(x._status===-1){var F=x._result;F=F(),F.then(function(j){(x._status===0||x._status===-1)&&(x._status=1,x._result=j)},function(j){(x._status===0||x._status===-1)&&(x._status=2,x._result=j)}),x._status===-1&&(x._status=0,x._result=F)}if(x._status===1)return x._result.default;throw x._result}var X=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},q={map:$,forEach:function(x,F,j){$(x,function(){F.apply(this,arguments)},j)},count:function(x){var F=0;return $(x,function(){F++}),F},toArray:function(x){return $(x,function(F){return F})||[]},only:function(x){if(!et(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return vt.Activity=y,vt.Children=q,vt.Component=E,vt.Fragment=i,vt.Profiler=a,vt.PureComponent=C,vt.StrictMode=s,vt.Suspense=d,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,vt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return z.H.useMemoCache(x)}},vt.cache=function(x){return function(){return x.apply(null,arguments)}},vt.cacheSignal=function(){return null},vt.cloneElement=function(x,F,j){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var J=S({},x.props),nt=x.key;if(F!=null)for(ct in F.key!==void 0&&(nt=""+F.key),F)!V.call(F,ct)||ct==="key"||ct==="__self"||ct==="__source"||ct==="ref"&&F.ref===void 0||(J[ct]=F[ct]);var ct=arguments.length-2;if(ct===1)J.children=j;else if(1<ct){for(var at=Array(ct),Tt=0;Tt<ct;Tt++)at[Tt]=arguments[Tt+2];J.children=at}return Y(x.type,nt,J)},vt.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:o,_context:x},x},vt.createElement=function(x,F,j){var J,nt={},ct=null;if(F!=null)for(J in F.key!==void 0&&(ct=""+F.key),F)V.call(F,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(nt[J]=F[J]);var at=arguments.length-2;if(at===1)nt.children=j;else if(1<at){for(var Tt=Array(at),st=0;st<at;st++)Tt[st]=arguments[st+2];nt.children=Tt}if(x&&x.defaultProps)for(J in at=x.defaultProps,at)nt[J]===void 0&&(nt[J]=at[J]);return Y(x,ct,nt)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(x){return{$$typeof:u,render:x}},vt.isValidElement=et,vt.lazy=function(x){return{$$typeof:g,_payload:{_status:-1,_result:x},_init:it}},vt.memo=function(x,F){return{$$typeof:f,type:x,compare:F===void 0?null:F}},vt.startTransition=function(x){var F=z.T,j={};z.T=j;try{var J=x(),nt=z.S;nt!==null&&nt(j,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(k,X)}catch(ct){X(ct)}finally{F!==null&&j.types!==null&&(F.types=j.types),z.T=F}},vt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},vt.use=function(x){return z.H.use(x)},vt.useActionState=function(x,F,j){return z.H.useActionState(x,F,j)},vt.useCallback=function(x,F){return z.H.useCallback(x,F)},vt.useContext=function(x){return z.H.useContext(x)},vt.useDebugValue=function(){},vt.useDeferredValue=function(x,F){return z.H.useDeferredValue(x,F)},vt.useEffect=function(x,F){return z.H.useEffect(x,F)},vt.useEffectEvent=function(x){return z.H.useEffectEvent(x)},vt.useId=function(){return z.H.useId()},vt.useImperativeHandle=function(x,F,j){return z.H.useImperativeHandle(x,F,j)},vt.useInsertionEffect=function(x,F){return z.H.useInsertionEffect(x,F)},vt.useLayoutEffect=function(x,F){return z.H.useLayoutEffect(x,F)},vt.useMemo=function(x,F){return z.H.useMemo(x,F)},vt.useOptimistic=function(x,F){return z.H.useOptimistic(x,F)},vt.useReducer=function(x,F,j){return z.H.useReducer(x,F,j)},vt.useRef=function(x){return z.H.useRef(x)},vt.useState=function(x){return z.H.useState(x)},vt.useSyncExternalStore=function(x,F,j){return z.H.useSyncExternalStore(x,F,j)},vt.useTransition=function(){return z.H.useTransition()},vt.version="19.2.0",vt}var vm;function Gh(){return vm||(vm=1,Vu.exports=nA()),Vu.exports}var K=Gh(),Yu={exports:{}},nr={},Xu={exports:{}},$u={};var bm;function sA(){return bm||(bm=1,(function(h){function t(B,$){var it=B.length;B.push($);t:for(;0<it;){var X=it-1>>>1,q=B[X];if(0<a(q,$))B[X]=$,B[it]=q,it=X;else break t}}function i(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var $=B[0],it=B.pop();if(it!==$){B[0]=it;t:for(var X=0,q=B.length,x=q>>>1;X<x;){var F=2*(X+1)-1,j=B[F],J=F+1,nt=B[J];if(0>a(j,it))J<q&&0>a(nt,j)?(B[X]=nt,B[J]=it,X=J):(B[X]=j,B[F]=it,X=F);else if(J<q&&0>a(nt,it))B[X]=nt,B[J]=it,X=J;else break t}}return $}function a(B,$){var it=B.sortIndex-$.sortIndex;return it!==0?it:B.id-$.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();h.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,A=!1,w=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var $=i(f);$!==null;){if($.callback===null)s(f);else if($.startTime<=B)s(f),$.sortIndex=$.expirationTime,t(d,$);else break;$=i(f)}}function D(B){if(S=!1,O(B),!w)if(i(d)!==null)w=!0,k||(k=!0,ft());else{var $=i(f);$!==null&&At(D,$.startTime-B)}}var k=!1,z=-1,V=5,Y=-1;function tt(){return _?!0:!(h.unstable_now()-Y<V)}function et(){if(_=!1,k){var B=h.unstable_now();Y=B;var $=!0;try{t:{w=!1,S&&(S=!1,R(z),z=-1),A=!0;var it=v;try{e:{for(O(B),y=i(d);y!==null&&!(y.expirationTime>B&&tt());){var X=y.callback;if(typeof X=="function"){y.callback=null,v=y.priorityLevel;var q=X(y.expirationTime<=B);if(B=h.unstable_now(),typeof q=="function"){y.callback=q,O(B),$=!0;break e}y===i(d)&&s(d),O(B)}else s(d);y=i(d)}if(y!==null)$=!0;else{var x=i(f);x!==null&&At(D,x.startTime-B),$=!1}}break t}finally{y=null,v=it,A=!1}$=void 0}}finally{$?ft():k=!1}}}var ft;if(typeof C=="function")ft=function(){C(et)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,pt=mt.port2;mt.port1.onmessage=et,ft=function(){pt.postMessage(null)}}else ft=function(){E(et,0)};function At(B,$){z=E(function(){B(h.unstable_now())},$)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(B){B.callback=null},h.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<B?Math.floor(1e3/B):5},h.unstable_getCurrentPriorityLevel=function(){return v},h.unstable_next=function(B){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var it=v;v=$;try{return B()}finally{v=it}},h.unstable_requestPaint=function(){_=!0},h.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var it=v;v=B;try{return $()}finally{v=it}},h.unstable_scheduleCallback=function(B,$,it){var X=h.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?X+it:X):it=X,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=it+q,B={id:g++,callback:$,priorityLevel:B,startTime:it,expirationTime:q,sortIndex:-1},it>X?(B.sortIndex=it,t(f,B),i(d)===null&&B===i(f)&&(S?(R(z),z=-1):S=!0,At(D,it-X))):(B.sortIndex=q,t(d,B),w||A||(w=!0,k||(k=!0,ft()))),B},h.unstable_shouldYield=tt,h.unstable_wrapCallback=function(B){var $=v;return function(){var it=v;v=$;try{return B.apply(this,arguments)}finally{v=it}}}})($u)),$u}var Am;function aA(){return Am||(Am=1,Xu.exports=sA()),Xu.exports}var Ku={exports:{}},De={};var Sm;function rA(){if(Sm)return De;Sm=1;var h=Gh();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,De.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},De.flushSync=function(d){var f=c.T,g=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=f,s.p=g,s.d.f()}},De.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},De.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},De.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},De.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},De.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},De.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},De.requestFormReset=function(d){s.d.r(d)},De.unstable_batchedUpdates=function(d,f){return d(f)},De.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},De.useFormStatus=function(){return c.H.useHostTransitionStatus()},De.version="19.2.0",De}var wm;function oA(){if(wm)return Ku.exports;wm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Ku.exports=rA(),Ku.exports}var Em;function lA(){if(Em)return nr;Em=1;var h=aA(),t=Gh(),i=oA();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var r=e,l=n;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){r=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return d(p),e;if(m===l)return d(p),n;m=m.sibling}throw Error(s(188))}if(r.return!==l.return)r=p,l=m;else{for(var b=!1,T=p.child;T;){if(T===r){b=!0,r=p,l=m;break}if(T===l){b=!0,l=p,r=m;break}T=T.sibling}if(!b){for(T=m.child;T;){if(T===r){b=!0,r=m,l=p;break}if(T===l){b=!0,l=m,r=p;break}T=T.sibling}if(!b)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function ft(e){return e===null||typeof e!="object"?null:(e=et&&e[et]||e["@@iterator"],typeof e=="function"?e:null)}var mt=Symbol.for("react.client.reference");function pt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===mt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case E:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case k:return"SuspenseList";case Y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case C:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case O:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return n=e.displayName||null,n!==null?n:pt(e.type)||"Memo";case V:n=e._payload,e=e._init;try{return pt(e(n))}catch{}}return null}var At=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},X=[],q=-1;function x(e){return{current:e}}function F(e){0>q||(e.current=X[q],X[q]=null,q--)}function j(e,n){q++,X[q]=e.current,e.current=n}var J=x(null),nt=x(null),ct=x(null),at=x(null);function Tt(e,n){switch(j(ct,n),j(nt,e),j(J,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Pg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Pg(n),e=zg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(J),j(J,e)}function st(){F(J),F(nt),F(ct)}function yt(e){e.memoizedState!==null&&j(at,e);var n=J.current,r=zg(n,e.type);n!==r&&(j(nt,e),j(J,r))}function Nt(e){nt.current===e&&(F(J),F(nt)),at.current===e&&(F(at),Za._currentValue=it)}var oe,me;function le(e){if(oe===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);oe=n&&n[1]||"",me=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+e+me}var Or=!1;function Fn(e,n){if(!e||Or)return"";Or=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var H=G}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(G){H=G}e.call(Z.prototype)}}else{try{throw Error()}catch(G){H=G}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],T=m[1];if(b&&T){var M=b.split(`
`),I=T.split(`
`);for(p=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;p<I.length&&!I[p].includes("DetermineComponentFrameRoot");)p++;if(l===M.length||p===I.length)for(l=M.length-1,p=I.length-1;1<=l&&0<=p&&M[l]!==I[p];)p--;for(;1<=l&&0<=p;l--,p--)if(M[l]!==I[p]){if(l!==1||p!==1)do if(l--,p--,0>p||M[l]!==I[p]){var W=`
`+M[l].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=l&&0<=p);break}}}finally{Or=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?le(r):""}function xl(e,n){switch(e.tag){case 26:case 27:case 5:return le(e.type);case 16:return le("Lazy");case 13:return e.child!==n&&n!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return Fn(e.type,!1);case 11:return Fn(e.type.render,!1);case 1:return Fn(e.type,!0);case 31:return le("Activity");default:return""}}function dd(e){try{var n="",r=null;do n+=xl(e,r),r=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rl=Object.prototype.hasOwnProperty,Ml=h.unstable_scheduleCallback,Dl=h.unstable_cancelCallback,Ov=h.unstable_shouldYield,Nv=h.unstable_requestPaint,Ye=h.unstable_now,kv=h.unstable_getCurrentPriorityLevel,fd=h.unstable_ImmediatePriority,pd=h.unstable_UserBlockingPriority,Nr=h.unstable_NormalPriority,Bv=h.unstable_LowPriority,gd=h.unstable_IdlePriority,Pv=h.log,zv=h.unstable_setDisableYieldValue,ua=null,Xe=null;function on(e){if(typeof Pv=="function"&&zv(e),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(ua,e)}catch{}}var $e=Math.clz32?Math.clz32:Iv,Fv=Math.log,Uv=Math.LN2;function Iv(e){return e>>>=0,e===0?32:31-(Fv(e)/Uv|0)|0}var kr=256,Br=262144,Pr=4194304;function Un(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zr(e,n,r){var l=e.pendingLanes;if(l===0)return 0;var p=0,m=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?p=Un(l):(b&=T,b!==0?p=Un(b):r||(r=T&~e,r!==0&&(p=Un(r))))):(T=l&~m,T!==0?p=Un(T):b!==0?p=Un(b):r||(r=l&~e,r!==0&&(p=Un(r)))),p===0?0:n!==0&&n!==p&&(n&m)===0&&(m=p&-p,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:p}function ha(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Hv(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function md(){var e=Pr;return Pr<<=1,(Pr&62914560)===0&&(Pr=4194304),e}function Ll(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function da(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jv(e,n,r,l,p,m){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var T=e.entanglements,M=e.expirationTimes,I=e.hiddenUpdates;for(r=b&~r;0<r;){var W=31-$e(r),Z=1<<W;T[W]=0,M[W]=-1;var H=I[W];if(H!==null)for(I[W]=null,W=0;W<H.length;W++){var G=H[W];G!==null&&(G.lane&=-536870913)}r&=~Z}l!==0&&yd(e,l,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(b&~n))}function yd(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-$e(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function vd(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var l=31-$e(r),p=1<<l;p&n|e[l]&n&&(e[l]|=n),r&=~p}}function bd(e,n){var r=n&-n;return r=(r&42)!==0?1:Ol(r),(r&(e.suspendedLanes|n))!==0?0:r}function Ol(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Nl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ad(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:rm(e.type))}function Sd(e,n){var r=$.p;try{return $.p=e,n()}finally{$.p=r}}var ln=Math.random().toString(36).slice(2),Se="__reactFiber$"+ln,Pe="__reactProps$"+ln,hs="__reactContainer$"+ln,kl="__reactEvents$"+ln,Gv="__reactListeners$"+ln,qv="__reactHandles$"+ln,wd="__reactResources$"+ln,fa="__reactMarker$"+ln;function Bl(e){delete e[Se],delete e[Pe],delete e[kl],delete e[Gv],delete e[qv]}function ds(e){var n=e[Se];if(n)return n;for(var r=e.parentNode;r;){if(n=r[hs]||r[Se]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=qg(e);e!==null;){if(r=e[Se])return r;e=qg(e)}return n}e=r,r=e.parentNode}return null}function fs(e){if(e=e[Se]||e[hs]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function pa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function ps(e){var n=e[wd];return n||(n=e[wd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ye(e){e[fa]=!0}var Ed=new Set,_d={};function In(e,n){gs(e,n),gs(e+"Capture",n)}function gs(e,n){for(_d[e]=n,e=0;e<n.length;e++)Ed.add(n[e])}var Vv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},Cd={};function Yv(e){return Rl.call(Cd,e)?!0:Rl.call(Td,e)?!1:Vv.test(e)?Cd[e]=!0:(Td[e]=!0,!1)}function Fr(e,n,r){if(Yv(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Ur(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function Bi(e,n,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+l)}}function si(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xd(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Xv(e,n,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(b){r=""+b,m.call(this,b)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Pl(e){if(!e._valueTracker){var n=xd(e)?"checked":"value";e._valueTracker=Xv(e,n,""+e[n])}}function Rd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return e&&(l=xd(e)?e.checked?"true":"false":e.value),e=l,e!==r?(n.setValue(e),!0):!1}function Ir(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $v=/[\n"\\]/g;function ai(e){return e.replace($v,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function zl(e,n,r,l,p,m,b,T){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),n!=null?b==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+si(n)):e.value!==""+si(n)&&(e.value=""+si(n)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),n!=null?Fl(e,b,si(n)):r!=null?Fl(e,b,si(r)):l!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+si(T):e.removeAttribute("name")}function Md(e,n,r,l,p,m,b,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Pl(e);return}r=r!=null?""+si(r):"",n=n!=null?""+si(n):r,T||n===e.value||(e.value=n),e.defaultValue=n}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Pl(e)}function Fl(e,n,r){n==="number"&&Ir(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ms(e,n,r,l){if(e=e.options,n){n={};for(var p=0;p<r.length;p++)n["$"+r[p]]=!0;for(r=0;r<e.length;r++)p=n.hasOwnProperty("$"+e[r].value),e[r].selected!==p&&(e[r].selected=p),p&&l&&(e[r].defaultSelected=!0)}else{for(r=""+si(r),n=null,p=0;p<e.length;p++){if(e[p].value===r){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function Dd(e,n,r){if(n!=null&&(n=""+si(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+si(r):""}function Ld(e,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(s(92));if(At(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=si(n),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),Pl(e)}function ys(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Kv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Od(e,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,r):typeof r!="number"||r===0||Kv.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function Nd(e,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in n)l=n[p],n.hasOwnProperty(p)&&r[p]!==l&&Od(e,p,l)}else for(var m in n)n.hasOwnProperty(m)&&Od(e,m,n[m])}function Ul(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(e){return Qv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pi(){}var Il=null;function Hl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vs=null,bs=null;function kd(e){var n=fs(e);if(n&&(e=n.stateNode)){var r=e[Pe]||null;t:switch(e=n.stateNode,n.type){case"input":if(zl(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ai(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var p=l[Pe]||null;if(!p)throw Error(s(90));zl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===e.form&&Rd(l)}break t;case"textarea":Dd(e,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&ms(e,!!r.multiple,n,!1)}}}var jl=!1;function Bd(e,n,r){if(jl)return e(n,r);jl=!0;try{var l=e(n);return l}finally{if(jl=!1,(vs!==null||bs!==null)&&(Mo(),vs&&(n=vs,e=bs,bs=vs=null,kd(n),e)))for(n=0;n<e.length;n++)kd(e[n])}}function ga(e,n){var r=e.stateNode;if(r===null)return null;var l=r[Pe]||null;if(l===null)return null;r=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gl=!1;if(zi)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Gl=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Gl=!1}var cn=null,ql=null,jr=null;function Pd(){if(jr)return jr;var e,n=ql,r=n.length,l,p="value"in cn?cn.value:cn.textContent,m=p.length;for(e=0;e<r&&n[e]===p[e];e++);var b=r-e;for(l=1;l<=b&&n[r-l]===p[m-l];l++);return jr=p.slice(e,1<l?1-l:void 0)}function Gr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function qr(){return!0}function zd(){return!1}function ze(e){function n(r,l,p,m,b){this._reactName=r,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(r=e[T],this[T]=r?r(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?qr:zd,this.isPropagationStopped=zd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),n}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vr=ze(Hn),ya=y({},Hn,{view:0,detail:0}),Zv=ze(ya),Vl,Yl,va,Yr=y({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==va&&(va&&e.type==="mousemove"?(Vl=e.screenX-va.screenX,Yl=e.screenY-va.screenY):Yl=Vl=0,va=e),Vl)},movementY:function(e){return"movementY"in e?e.movementY:Yl}}),Fd=ze(Yr),Jv=y({},Yr,{dataTransfer:0}),tb=ze(Jv),eb=y({},ya,{relatedTarget:0}),Xl=ze(eb),ib=y({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),nb=ze(ib),sb=y({},Hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ab=ze(sb),rb=y({},Hn,{data:0}),Ud=ze(rb),ob={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ub(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=cb[e])?!!n[e]:!1}function $l(){return ub}var hb=y({},ya,{key:function(e){if(e.key){var n=ob[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(e){return e.type==="keypress"?Gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),db=ze(hb),fb=y({},Yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Id=ze(fb),pb=y({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),gb=ze(pb),mb=y({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),yb=ze(mb),vb=y({},Yr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bb=ze(vb),Ab=y({},Hn,{newState:0,oldState:0}),Sb=ze(Ab),wb=[9,13,27,32],Kl=zi&&"CompositionEvent"in window,ba=null;zi&&"documentMode"in document&&(ba=document.documentMode);var Eb=zi&&"TextEvent"in window&&!ba,Hd=zi&&(!Kl||ba&&8<ba&&11>=ba),jd=" ",Gd=!1;function qd(e,n){switch(e){case"keyup":return wb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var As=!1;function _b(e,n){switch(e){case"compositionend":return Vd(n);case"keypress":return n.which!==32?null:(Gd=!0,jd);case"textInput":return e=n.data,e===jd&&Gd?null:e;default:return null}}function Tb(e,n){if(As)return e==="compositionend"||!Kl&&qd(e,n)?(e=Pd(),jr=ql=cn=null,As=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Hd&&n.locale!=="ko"?null:n.data;default:return null}}var Cb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Cb[e.type]:n==="textarea"}function Xd(e,n,r,l){vs?bs?bs.push(l):bs=[l]:vs=l,n=Po(n,"onChange"),0<n.length&&(r=new Vr("onChange","change",null,r,l),e.push({event:r,listeners:n}))}var Aa=null,Sa=null;function xb(e){Dg(e,0)}function Xr(e){var n=pa(e);if(Rd(n))return e}function $d(e,n){if(e==="change")return n}var Kd=!1;if(zi){var Wl;if(zi){var Ql="oninput"in document;if(!Ql){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),Ql=typeof Wd.oninput=="function"}Wl=Ql}else Wl=!1;Kd=Wl&&(!document.documentMode||9<document.documentMode)}function Qd(){Aa&&(Aa.detachEvent("onpropertychange",Zd),Sa=Aa=null)}function Zd(e){if(e.propertyName==="value"&&Xr(Sa)){var n=[];Xd(n,Sa,e,Hl(e)),Bd(xb,n)}}function Rb(e,n,r){e==="focusin"?(Qd(),Aa=n,Sa=r,Aa.attachEvent("onpropertychange",Zd)):e==="focusout"&&Qd()}function Mb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xr(Sa)}function Db(e,n){if(e==="click")return Xr(n)}function Lb(e,n){if(e==="input"||e==="change")return Xr(n)}function Ob(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ke=typeof Object.is=="function"?Object.is:Ob;function wa(e,n){if(Ke(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var p=r[l];if(!Rl.call(n,p)||!Ke(e[p],n[p]))return!1}return!0}function Jd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tf(e,n){var r=Jd(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=n&&l>=n)return{node:r,offset:n-e};e=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Jd(r)}}function ef(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ef(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function nf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ir(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Ir(e.document)}return n}function Zl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Nb=zi&&"documentMode"in document&&11>=document.documentMode,Ss=null,Jl=null,Ea=null,tc=!1;function sf(e,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tc||Ss==null||Ss!==Ir(l)||(l=Ss,"selectionStart"in l&&Zl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ea&&wa(Ea,l)||(Ea=l,l=Po(Jl,"onSelect"),0<l.length&&(n=new Vr("onSelect","select",null,n,r),e.push({event:n,listeners:l}),n.target=Ss)))}function jn(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var ws={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},ec={},af={};zi&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function Gn(e){if(ec[e])return ec[e];if(!ws[e])return e;var n=ws[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in af)return ec[e]=n[r];return e}var rf=Gn("animationend"),of=Gn("animationiteration"),lf=Gn("animationstart"),kb=Gn("transitionrun"),Bb=Gn("transitionstart"),Pb=Gn("transitioncancel"),cf=Gn("transitionend"),uf=new Map,ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ic.push("scrollEnd");function vi(e,n){uf.set(e,n),In(n,[e])}var $r=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ri=[],Es=0,nc=0;function Kr(){for(var e=Es,n=nc=Es=0;n<e;){var r=ri[n];ri[n++]=null;var l=ri[n];ri[n++]=null;var p=ri[n];ri[n++]=null;var m=ri[n];if(ri[n++]=null,l!==null&&p!==null){var b=l.pending;b===null?p.next=p:(p.next=b.next,b.next=p),l.pending=p}m!==0&&hf(r,p,m)}}function Wr(e,n,r,l){ri[Es++]=e,ri[Es++]=n,ri[Es++]=r,ri[Es++]=l,nc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function sc(e,n,r,l){return Wr(e,n,r,l),Qr(e)}function qn(e,n){return Wr(e,null,null,n),Qr(e)}function hf(e,n,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var p=!1,m=e.return;m!==null;)m.childLanes|=r,l=m.alternate,l!==null&&(l.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&n!==null&&(p=31-$e(r),e=m.hiddenUpdates,l=e[p],l===null?e[p]=[n]:l.push(n),n.lane=r|536870912),m):null}function Qr(e){if(50<Va)throw Va=0,fu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var _s={};function zb(e,n,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(e,n,r,l){return new zb(e,n,r,l)}function ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fi(e,n){var r=e.alternate;return r===null?(r=We(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function df(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Zr(e,n,r,l,p,m){var b=0;if(l=e,typeof e=="function")ac(e)&&(b=1);else if(typeof e=="string")b=j0(e,r,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Y:return e=We(31,r,n,p),e.elementType=Y,e.lanes=m,e;case S:return Vn(r.children,p,m,n);case _:b=8,p|=24;break;case E:return e=We(12,r,n,p|2),e.elementType=E,e.lanes=m,e;case D:return e=We(13,r,n,p),e.elementType=D,e.lanes=m,e;case k:return e=We(19,r,n,p),e.elementType=k,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:b=10;break t;case R:b=9;break t;case O:b=11;break t;case z:b=14;break t;case V:b=16,l=null;break t}b=29,r=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=We(b,r,n,p),n.elementType=e,n.type=l,n.lanes=m,n}function Vn(e,n,r,l){return e=We(7,e,l,n),e.lanes=r,e}function rc(e,n,r){return e=We(6,e,null,n),e.lanes=r,e}function ff(e){var n=We(18,null,null,0);return n.stateNode=e,n}function oc(e,n,r){return n=We(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var pf=new WeakMap;function oi(e,n){if(typeof e=="object"&&e!==null){var r=pf.get(e);return r!==void 0?r:(n={value:e,source:n,stack:dd(n)},pf.set(e,n),n)}return{value:e,source:n,stack:dd(n)}}var Ts=[],Cs=0,Jr=null,_a=0,li=[],ci=0,un=null,Ei=1,_i="";function Ui(e,n){Ts[Cs++]=_a,Ts[Cs++]=Jr,Jr=e,_a=n}function gf(e,n,r){li[ci++]=Ei,li[ci++]=_i,li[ci++]=un,un=e;var l=Ei;e=_i;var p=32-$e(l)-1;l&=~(1<<p),r+=1;var m=32-$e(n)+p;if(30<m){var b=p-p%5;m=(l&(1<<b)-1).toString(32),l>>=b,p-=b,Ei=1<<32-$e(n)+p|r<<p|l,_i=m+e}else Ei=1<<m|r<<p|l,_i=e}function lc(e){e.return!==null&&(Ui(e,1),gf(e,1,0))}function cc(e){for(;e===Jr;)Jr=Ts[--Cs],Ts[Cs]=null,_a=Ts[--Cs],Ts[Cs]=null;for(;e===un;)un=li[--ci],li[ci]=null,_i=li[--ci],li[ci]=null,Ei=li[--ci],li[ci]=null}function mf(e,n){li[ci++]=Ei,li[ci++]=_i,li[ci++]=un,Ei=n.id,_i=n.overflow,un=e}var we=null,Xt=null,Dt=!1,hn=null,ui=!1,uc=Error(s(519));function dn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ta(oi(n,e)),uc}function yf(e){var n=e.stateNode,r=e.type,l=e.memoizedProps;switch(n[Se]=e,n[Pe]=l,r){case"dialog":xt("cancel",n),xt("close",n);break;case"iframe":case"object":case"embed":xt("load",n);break;case"video":case"audio":for(r=0;r<Xa.length;r++)xt(Xa[r],n);break;case"source":xt("error",n);break;case"img":case"image":case"link":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"input":xt("invalid",n),Md(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":xt("invalid",n);break;case"textarea":xt("invalid",n),Ld(n,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||kg(n.textContent,r)?(l.popover!=null&&(xt("beforetoggle",n),xt("toggle",n)),l.onScroll!=null&&xt("scroll",n),l.onScrollEnd!=null&&xt("scrollend",n),l.onClick!=null&&(n.onclick=Pi),n=!0):n=!1,n||dn(e,!0)}function vf(e){for(we=e.return;we;)switch(we.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:we=we.return}}function xs(e){if(e!==we)return!1;if(!Dt)return vf(e),Dt=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Ru(e.type,e.memoizedProps)),r=!r),r&&Xt&&dn(e),vf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Xt=Gg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Xt=Gg(e)}else n===27?(n=Xt,Cn(e.type)?(e=Nu,Nu=null,Xt=e):Xt=n):Xt=we?di(e.stateNode.nextSibling):null;return!0}function Yn(){Xt=we=null,Dt=!1}function hc(){var e=hn;return e!==null&&(He===null?He=e:He.push.apply(He,e),hn=null),e}function Ta(e){hn===null?hn=[e]:hn.push(e)}var dc=x(null),Xn=null,Ii=null;function fn(e,n,r){j(dc,n._currentValue),n._currentValue=r}function Hi(e){e._currentValue=dc.current,F(dc)}function fc(e,n,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===r)break;e=e.return}}function pc(e,n,r,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var b=p.child;m=m.firstContext;t:for(;m!==null;){var T=m;m=p;for(var M=0;M<n.length;M++)if(T.context===n[M]){m.lanes|=r,T=m.alternate,T!==null&&(T.lanes|=r),fc(m.return,r,e),l||(b=null);break t}m=T.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(s(341));b.lanes|=r,m=b.alternate,m!==null&&(m.lanes|=r),fc(b,r,e),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===e){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function Rs(e,n,r,l){e=null;for(var p=n,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=p.type;Ke(p.pendingProps.value,b.value)||(e!==null?e.push(T):e=[T])}}else if(p===at.current){if(b=p.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Za):e=[Za])}p=p.return}e!==null&&pc(n,e,r,l),n.flags|=262144}function to(e){for(e=e.firstContext;e!==null;){if(!Ke(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $n(e){Xn=e,Ii=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ee(e){return bf(Xn,e)}function eo(e,n){return Xn===null&&$n(e),bf(e,n)}function bf(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ii===null){if(e===null)throw Error(s(308));Ii=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ii=Ii.next=n;return r}var Fb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},Ub=h.unstable_scheduleCallback,Ib=h.unstable_NormalPriority,ce={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gc(){return{controller:new Fb,data:new Map,refCount:0}}function Ca(e){e.refCount--,e.refCount===0&&Ub(Ib,function(){e.controller.abort()})}var xa=null,mc=0,Ms=0,Ds=null;function Hb(e,n){if(xa===null){var r=xa=[];mc=0,Ms=bu(),Ds={status:"pending",value:void 0,then:function(l){r.push(l)}}}return mc++,n.then(Af,Af),n}function Af(){if(--mc===0&&xa!==null){Ds!==null&&(Ds.status="fulfilled");var e=xa;xa=null,Ms=0,Ds=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function jb(e,n){var r=[],l={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var p=0;p<r.length;p++)(0,r[p])(n)},function(p){for(l.status="rejected",l.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),l}var Sf=B.S;B.S=function(e,n){sg=Ye(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Hb(e,n),Sf!==null&&Sf(e,n)};var Kn=x(null);function yc(){var e=Kn.current;return e!==null?e:Vt.pooledCache}function io(e,n){n===null?j(Kn,Kn.current):j(Kn,n.pool)}function wf(){var e=yc();return e===null?null:{parent:ce._currentValue,pool:e}}var Ls=Error(s(460)),vc=Error(s(474)),no=Error(s(542)),so={then:function(){}};function Ef(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _f(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(Pi,Pi),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Cf(e),e;default:if(typeof n.status=="string")n.then(Pi,Pi);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=l}},function(l){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Cf(e),e}throw Qn=n,Ls}}function Wn(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Qn=r,Ls):r}}var Qn=null;function Tf(){if(Qn===null)throw Error(s(459));var e=Qn;return Qn=null,e}function Cf(e){if(e===Ls||e===no)throw Error(s(483))}var Os=null,Ra=0;function ao(e){var n=Ra;return Ra+=1,Os===null&&(Os=[]),_f(Os,e,n)}function Ma(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ro(e,n){throw n.$$typeof===v?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function xf(e){function n(P,L){if(e){var U=P.deletions;U===null?(P.deletions=[L],P.flags|=16):U.push(L)}}function r(P,L){if(!e)return null;for(;L!==null;)n(P,L),L=L.sibling;return null}function l(P){for(var L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function p(P,L){return P=Fi(P,L),P.index=0,P.sibling=null,P}function m(P,L,U){return P.index=U,e?(U=P.alternate,U!==null?(U=U.index,U<L?(P.flags|=67108866,L):U):(P.flags|=67108866,L)):(P.flags|=1048576,L)}function b(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function T(P,L,U,Q){return L===null||L.tag!==6?(L=rc(U,P.mode,Q),L.return=P,L):(L=p(L,U),L.return=P,L)}function M(P,L,U,Q){var ht=U.type;return ht===S?W(P,L,U.props.children,Q,U.key):L!==null&&(L.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===V&&Wn(ht)===L.type)?(L=p(L,U.props),Ma(L,U),L.return=P,L):(L=Zr(U.type,U.key,U.props,null,P.mode,Q),Ma(L,U),L.return=P,L)}function I(P,L,U,Q){return L===null||L.tag!==4||L.stateNode.containerInfo!==U.containerInfo||L.stateNode.implementation!==U.implementation?(L=oc(U,P.mode,Q),L.return=P,L):(L=p(L,U.children||[]),L.return=P,L)}function W(P,L,U,Q,ht){return L===null||L.tag!==7?(L=Vn(U,P.mode,Q,ht),L.return=P,L):(L=p(L,U),L.return=P,L)}function Z(P,L,U){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=rc(""+L,P.mode,U),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return U=Zr(L.type,L.key,L.props,null,P.mode,U),Ma(U,L),U.return=P,U;case w:return L=oc(L,P.mode,U),L.return=P,L;case V:return L=Wn(L),Z(P,L,U)}if(At(L)||ft(L))return L=Vn(L,P.mode,U,null),L.return=P,L;if(typeof L.then=="function")return Z(P,ao(L),U);if(L.$$typeof===C)return Z(P,eo(P,L),U);ro(P,L)}return null}function H(P,L,U,Q){var ht=L!==null?L.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ht!==null?null:T(P,L,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===ht?M(P,L,U,Q):null;case w:return U.key===ht?I(P,L,U,Q):null;case V:return U=Wn(U),H(P,L,U,Q)}if(At(U)||ft(U))return ht!==null?null:W(P,L,U,Q,null);if(typeof U.then=="function")return H(P,L,ao(U),Q);if(U.$$typeof===C)return H(P,L,eo(P,U),Q);ro(P,U)}return null}function G(P,L,U,Q,ht){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(U)||null,T(L,P,""+Q,ht);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return P=P.get(Q.key===null?U:Q.key)||null,M(L,P,Q,ht);case w:return P=P.get(Q.key===null?U:Q.key)||null,I(L,P,Q,ht);case V:return Q=Wn(Q),G(P,L,U,Q,ht)}if(At(Q)||ft(Q))return P=P.get(U)||null,W(L,P,Q,ht,null);if(typeof Q.then=="function")return G(P,L,U,ao(Q),ht);if(Q.$$typeof===C)return G(P,L,U,eo(L,Q),ht);ro(L,Q)}return null}function ot(P,L,U,Q){for(var ht=null,kt=null,ut=L,_t=L=0,Mt=null;ut!==null&&_t<U.length;_t++){ut.index>_t?(Mt=ut,ut=null):Mt=ut.sibling;var Bt=H(P,ut,U[_t],Q);if(Bt===null){ut===null&&(ut=Mt);break}e&&ut&&Bt.alternate===null&&n(P,ut),L=m(Bt,L,_t),kt===null?ht=Bt:kt.sibling=Bt,kt=Bt,ut=Mt}if(_t===U.length)return r(P,ut),Dt&&Ui(P,_t),ht;if(ut===null){for(;_t<U.length;_t++)ut=Z(P,U[_t],Q),ut!==null&&(L=m(ut,L,_t),kt===null?ht=ut:kt.sibling=ut,kt=ut);return Dt&&Ui(P,_t),ht}for(ut=l(ut);_t<U.length;_t++)Mt=G(ut,P,_t,U[_t],Q),Mt!==null&&(e&&Mt.alternate!==null&&ut.delete(Mt.key===null?_t:Mt.key),L=m(Mt,L,_t),kt===null?ht=Mt:kt.sibling=Mt,kt=Mt);return e&&ut.forEach(function(Ln){return n(P,Ln)}),Dt&&Ui(P,_t),ht}function gt(P,L,U,Q){if(U==null)throw Error(s(151));for(var ht=null,kt=null,ut=L,_t=L=0,Mt=null,Bt=U.next();ut!==null&&!Bt.done;_t++,Bt=U.next()){ut.index>_t?(Mt=ut,ut=null):Mt=ut.sibling;var Ln=H(P,ut,Bt.value,Q);if(Ln===null){ut===null&&(ut=Mt);break}e&&ut&&Ln.alternate===null&&n(P,ut),L=m(Ln,L,_t),kt===null?ht=Ln:kt.sibling=Ln,kt=Ln,ut=Mt}if(Bt.done)return r(P,ut),Dt&&Ui(P,_t),ht;if(ut===null){for(;!Bt.done;_t++,Bt=U.next())Bt=Z(P,Bt.value,Q),Bt!==null&&(L=m(Bt,L,_t),kt===null?ht=Bt:kt.sibling=Bt,kt=Bt);return Dt&&Ui(P,_t),ht}for(ut=l(ut);!Bt.done;_t++,Bt=U.next())Bt=G(ut,P,_t,Bt.value,Q),Bt!==null&&(e&&Bt.alternate!==null&&ut.delete(Bt.key===null?_t:Bt.key),L=m(Bt,L,_t),kt===null?ht=Bt:kt.sibling=Bt,kt=Bt);return e&&ut.forEach(function(J0){return n(P,J0)}),Dt&&Ui(P,_t),ht}function Gt(P,L,U,Q){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:t:{for(var ht=U.key;L!==null;){if(L.key===ht){if(ht=U.type,ht===S){if(L.tag===7){r(P,L.sibling),Q=p(L,U.props.children),Q.return=P,P=Q;break t}}else if(L.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===V&&Wn(ht)===L.type){r(P,L.sibling),Q=p(L,U.props),Ma(Q,U),Q.return=P,P=Q;break t}r(P,L);break}else n(P,L);L=L.sibling}U.type===S?(Q=Vn(U.props.children,P.mode,Q,U.key),Q.return=P,P=Q):(Q=Zr(U.type,U.key,U.props,null,P.mode,Q),Ma(Q,U),Q.return=P,P=Q)}return b(P);case w:t:{for(ht=U.key;L!==null;){if(L.key===ht)if(L.tag===4&&L.stateNode.containerInfo===U.containerInfo&&L.stateNode.implementation===U.implementation){r(P,L.sibling),Q=p(L,U.children||[]),Q.return=P,P=Q;break t}else{r(P,L);break}else n(P,L);L=L.sibling}Q=oc(U,P.mode,Q),Q.return=P,P=Q}return b(P);case V:return U=Wn(U),Gt(P,L,U,Q)}if(At(U))return ot(P,L,U,Q);if(ft(U)){if(ht=ft(U),typeof ht!="function")throw Error(s(150));return U=ht.call(U),gt(P,L,U,Q)}if(typeof U.then=="function")return Gt(P,L,ao(U),Q);if(U.$$typeof===C)return Gt(P,L,eo(P,U),Q);ro(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,L!==null&&L.tag===6?(r(P,L.sibling),Q=p(L,U),Q.return=P,P=Q):(r(P,L),Q=rc(U,P.mode,Q),Q.return=P,P=Q),b(P)):r(P,L)}return function(P,L,U,Q){try{Ra=0;var ht=Gt(P,L,U,Q);return Os=null,ht}catch(ut){if(ut===Ls||ut===no)throw ut;var kt=We(29,ut,null,P.mode);return kt.lanes=Q,kt.return=P,kt}finally{}}}var Zn=xf(!0),Rf=xf(!1),pn=!1;function bc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ac(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function gn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function mn(e,n,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Pt&2)!==0){var p=l.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),l.pending=n,n=Qr(e),hf(e,null,r),n}return Wr(e,l,n,r),Qr(e)}function Da(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,vd(e,r)}}function Sc(e,n){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=b:m=m.next=b,r=r.next}while(r!==null);m===null?p=m=n:m=m.next=n}else p=m=n;r={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var wc=!1;function La(){if(wc){var e=Ds;if(e!==null)throw e}}function Oa(e,n,r,l){wc=!1;var p=e.updateQueue;pn=!1;var m=p.firstBaseUpdate,b=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var M=T,I=M.next;M.next=null,b===null?m=I:b.next=I,b=M;var W=e.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==b&&(T===null?W.firstBaseUpdate=I:T.next=I,W.lastBaseUpdate=M))}if(m!==null){var Z=p.baseState;b=0,W=I=M=null,T=m;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Rt&H)===H:(l&H)===H){H!==0&&H===Ms&&(wc=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var ot=e,gt=T;H=n;var Gt=r;switch(gt.tag){case 1:if(ot=gt.payload,typeof ot=="function"){Z=ot.call(Gt,Z,H);break t}Z=ot;break t;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=gt.payload,H=typeof ot=="function"?ot.call(Gt,Z,H):ot,H==null)break t;Z=y({},Z,H);break t;case 2:pn=!0}}H=T.callback,H!==null&&(e.flags|=64,G&&(e.flags|=8192),G=p.callbacks,G===null?p.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(I=W=G,M=Z):W=W.next=G,b|=H;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;G=T,T=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);W===null&&(M=Z),p.baseState=M,p.firstBaseUpdate=I,p.lastBaseUpdate=W,m===null&&(p.shared.lanes=0),Sn|=b,e.lanes=b,e.memoizedState=Z}}function Mf(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Df(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Mf(r[e],n)}var Ns=x(null),oo=x(0);function Lf(e,n){e=Wi,j(oo,e),j(Ns,n),Wi=e|n.baseLanes}function Ec(){j(oo,Wi),j(Ns,Ns.current)}function _c(){Wi=oo.current,F(Ns),F(oo)}var Qe=x(null),hi=null;function yn(e){var n=e.alternate;j(se,se.current&1),j(Qe,e),hi===null&&(n===null||Ns.current!==null||n.memoizedState!==null)&&(hi=e)}function Tc(e){j(se,se.current),j(Qe,e),hi===null&&(hi=e)}function Of(e){e.tag===22?(j(se,se.current),j(Qe,e),hi===null&&(hi=e)):vn()}function vn(){j(se,se.current),j(Qe,Qe.current)}function Ze(e){F(Qe),hi===e&&(hi=null),F(se)}var se=x(0);function lo(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Lu(r)||Ou(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ji=0,wt=null,Ht=null,ue=null,co=!1,ks=!1,Jn=!1,uo=0,Na=0,Bs=null,Gb=0;function ee(){throw Error(s(321))}function Cc(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Ke(e[r],n[r]))return!1;return!0}function xc(e,n,r,l,p,m){return ji=m,wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=e===null||e.memoizedState===null?gp:jc,Jn=!1,m=r(l,p),Jn=!1,ks&&(m=kf(n,r,l,p)),Nf(e),m}function Nf(e){B.H=Pa;var n=Ht!==null&&Ht.next!==null;if(ji=0,ue=Ht=wt=null,co=!1,Na=0,Bs=null,n)throw Error(s(300));e===null||he||(e=e.dependencies,e!==null&&to(e)&&(he=!0))}function kf(e,n,r,l){wt=e;var p=0;do{if(ks&&(Bs=null),Na=0,ks=!1,25<=p)throw Error(s(301));if(p+=1,ue=Ht=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=mp,m=n(r,l)}while(ks);return m}function qb(){var e=B.H,n=e.useState()[0];return n=typeof n.then=="function"?ka(n):n,e=e.useState()[0],(Ht!==null?Ht.memoizedState:null)!==e&&(wt.flags|=1024),n}function Rc(){var e=uo!==0;return uo=0,e}function Mc(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function Dc(e){if(co){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}co=!1}ji=0,ue=Ht=wt=null,ks=!1,Na=uo=0,Bs=null}function Le(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?wt.memoizedState=ue=e:ue=ue.next=e,ue}function ae(){if(Ht===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var n=ue===null?wt.memoizedState:ue.next;if(n!==null)ue=n,Ht=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},ue===null?wt.memoizedState=ue=e:ue=ue.next=e}return ue}function ho(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ka(e){var n=Na;return Na+=1,Bs===null&&(Bs=[]),e=_f(Bs,e,n),n=wt,(ue===null?n.memoizedState:ue.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?gp:jc),e}function fo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ka(e);if(e.$$typeof===C)return Ee(e)}throw Error(s(438,String(e)))}function Lc(e){var n=null,r=wt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=wt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=ho(),wt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),l=0;l<e;l++)r[l]=tt;return n.index++,r}function Gi(e,n){return typeof n=="function"?n(e):n}function po(e){var n=ae();return Oc(n,Ht,e)}function Oc(e,n,r){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var p=e.baseQueue,m=l.pending;if(m!==null){if(p!==null){var b=p.next;p.next=m.next,m.next=b}n.baseQueue=p=m,l.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{n=p.next;var T=b=null,M=null,I=n,W=!1;do{var Z=I.lane&-536870913;if(Z!==I.lane?(Rt&Z)===Z:(ji&Z)===Z){var H=I.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),Z===Ms&&(W=!0);else if((ji&H)===H){I=I.next,H===Ms&&(W=!0);continue}else Z={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},M===null?(T=M=Z,b=m):M=M.next=Z,wt.lanes|=H,Sn|=H;Z=I.action,Jn&&r(m,Z),m=I.hasEagerState?I.eagerState:r(m,Z)}else H={lane:Z,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},M===null?(T=M=H,b=m):M=M.next=H,wt.lanes|=Z,Sn|=Z;I=I.next}while(I!==null&&I!==n);if(M===null?b=m:M.next=T,!Ke(m,e.memoizedState)&&(he=!0,W&&(r=Ds,r!==null)))throw r;e.memoizedState=m,e.baseState=b,e.baseQueue=M,l.lastRenderedState=m}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Nc(e){var n=ae(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var l=r.dispatch,p=r.pending,m=n.memoizedState;if(p!==null){r.pending=null;var b=p=p.next;do m=e(m,b.action),b=b.next;while(b!==p);Ke(m,n.memoizedState)||(he=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,l]}function Bf(e,n,r){var l=wt,p=ae(),m=Dt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=n();var b=!Ke((Ht||p).memoizedState,r);if(b&&(p.memoizedState=r,he=!0),p=p.queue,Pc(Ff.bind(null,l,p,e),[e]),p.getSnapshot!==n||b||ue!==null&&ue.memoizedState.tag&1){if(l.flags|=2048,Ps(9,{destroy:void 0},zf.bind(null,l,p,r,n),null),Vt===null)throw Error(s(349));m||(ji&127)!==0||Pf(l,n,r)}return r}function Pf(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=wt.updateQueue,n===null?(n=ho(),wt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function zf(e,n,r,l){n.value=r,n.getSnapshot=l,Uf(n)&&If(e)}function Ff(e,n,r){return r(function(){Uf(n)&&If(e)})}function Uf(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Ke(e,r)}catch{return!0}}function If(e){var n=qn(e,2);n!==null&&je(n,e,2)}function kc(e){var n=Le();if(typeof e=="function"){var r=e;if(e=r(),Jn){on(!0);try{r()}finally{on(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:e},n}function Hf(e,n,r,l){return e.baseState=r,Oc(e,Ht,typeof l=="function"?l:Gi)}function Vb(e,n,r,l,p){if(yo(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};B.T!==null?r(!0):m.isTransition=!1,l(m),r=n.pending,r===null?(m.next=n.pending=m,jf(n,m)):(m.next=r.next,n.pending=r.next=m)}}function jf(e,n){var r=n.action,l=n.payload,p=e.state;if(n.isTransition){var m=B.T,b={};B.T=b;try{var T=r(p,l),M=B.S;M!==null&&M(b,T),Gf(e,n,T)}catch(I){Bc(e,n,I)}finally{m!==null&&b.types!==null&&(m.types=b.types),B.T=m}}else try{m=r(p,l),Gf(e,n,m)}catch(I){Bc(e,n,I)}}function Gf(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){qf(e,n,l)},function(l){return Bc(e,n,l)}):qf(e,n,r)}function qf(e,n,r){n.status="fulfilled",n.value=r,Vf(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,jf(e,r)))}function Bc(e,n,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,Vf(n),n=n.next;while(n!==l)}e.action=null}function Vf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Yf(e,n){return n}function Xf(e,n){if(Dt){var r=Vt.formState;if(r!==null){t:{var l=wt;if(Dt){if(Xt){e:{for(var p=Xt,m=ui;p.nodeType!==8;){if(!m){p=null;break e}if(p=di(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Xt=di(p.nextSibling),l=p.data==="F!";break t}}dn(l)}l=!1}l&&(n=r[0])}}return r=Le(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:n},r.queue=l,r=dp.bind(null,wt,l),l.dispatch=r,l=kc(!1),m=Hc.bind(null,wt,!1,l.queue),l=Le(),p={state:n,dispatch:null,action:e,pending:null},l.queue=p,r=Vb.bind(null,wt,p,m,r),p.dispatch=r,l.memoizedState=e,[n,r,!1]}function $f(e){var n=ae();return Kf(n,Ht,e)}function Kf(e,n,r){if(n=Oc(e,n,Yf)[0],e=po(Gi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=ka(n)}catch(b){throw b===Ls?no:b}else l=n;n=ae();var p=n.queue,m=p.dispatch;return r!==n.memoizedState&&(wt.flags|=2048,Ps(9,{destroy:void 0},Yb.bind(null,p,r),null)),[l,m,e]}function Yb(e,n){e.action=n}function Wf(e){var n=ae(),r=Ht;if(r!==null)return Kf(n,r,e);ae(),n=n.memoizedState,r=ae();var l=r.queue.dispatch;return r.memoizedState=e,[n,l,!1]}function Ps(e,n,r,l){return e={tag:e,create:r,deps:l,inst:n,next:null},n=wt.updateQueue,n===null&&(n=ho(),wt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,n.lastEffect=e),e}function Qf(){return ae().memoizedState}function go(e,n,r,l){var p=Le();wt.flags|=e,p.memoizedState=Ps(1|n,{destroy:void 0},r,l===void 0?null:l)}function mo(e,n,r,l){var p=ae();l=l===void 0?null:l;var m=p.memoizedState.inst;Ht!==null&&l!==null&&Cc(l,Ht.memoizedState.deps)?p.memoizedState=Ps(n,m,r,l):(wt.flags|=e,p.memoizedState=Ps(1|n,m,r,l))}function Zf(e,n){go(8390656,8,e,n)}function Pc(e,n){mo(2048,8,e,n)}function Xb(e){wt.flags|=4;var n=wt.updateQueue;if(n===null)n=ho(),wt.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function Jf(e){var n=ae().memoizedState;return Xb({ref:n,nextImpl:e}),function(){if((Pt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function tp(e,n){return mo(4,2,e,n)}function ep(e,n){return mo(4,4,e,n)}function ip(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function np(e,n,r){r=r!=null?r.concat([e]):null,mo(4,4,ip.bind(null,n,e),r)}function zc(){}function sp(e,n){var r=ae();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&Cc(n,l[1])?l[0]:(r.memoizedState=[e,n],e)}function ap(e,n){var r=ae();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&Cc(n,l[1]))return l[0];if(l=e(),Jn){on(!0);try{e()}finally{on(!1)}}return r.memoizedState=[l,n],l}function Fc(e,n,r){return r===void 0||(ji&1073741824)!==0&&(Rt&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=rg(),wt.lanes|=e,Sn|=e,r)}function rp(e,n,r,l){return Ke(r,n)?r:Ns.current!==null?(e=Fc(e,r,l),Ke(e,n)||(he=!0),e):(ji&42)===0||(ji&1073741824)!==0&&(Rt&261930)===0?(he=!0,e.memoizedState=r):(e=rg(),wt.lanes|=e,Sn|=e,n)}function op(e,n,r,l,p){var m=$.p;$.p=m!==0&&8>m?m:8;var b=B.T,T={};B.T=T,Hc(e,!1,n,r);try{var M=p(),I=B.S;if(I!==null&&I(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var W=jb(M,l);Ba(e,n,W,ei(e))}else Ba(e,n,l,ei(e))}catch(Z){Ba(e,n,{then:function(){},status:"rejected",reason:Z},ei())}finally{$.p=m,b!==null&&T.types!==null&&(b.types=T.types),B.T=b}}function $b(){}function Uc(e,n,r,l){if(e.tag!==5)throw Error(s(476));var p=lp(e).queue;op(e,p,n,it,r===null?$b:function(){return cp(e),r(l)})}function lp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:it},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function cp(e){var n=lp(e);n.next===null&&(n=e.alternate.memoizedState),Ba(e,n.next.queue,{},ei())}function Ic(){return Ee(Za)}function up(){return ae().memoizedState}function hp(){return ae().memoizedState}function Kb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=ei();e=gn(r);var l=mn(n,e,r);l!==null&&(je(l,n,r),Da(l,n,r)),n={cache:gc()},e.payload=n;return}n=n.return}}function Wb(e,n,r){var l=ei();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},yo(e)?fp(n,r):(r=sc(e,n,r,l),r!==null&&(je(r,e,l),pp(r,n,l)))}function dp(e,n,r){var l=ei();Ba(e,n,r,l)}function Ba(e,n,r,l){var p={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(yo(e))fp(n,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var b=n.lastRenderedState,T=m(b,r);if(p.hasEagerState=!0,p.eagerState=T,Ke(T,b))return Wr(e,n,p,0),Vt===null&&Kr(),!1}catch{}finally{}if(r=sc(e,n,p,l),r!==null)return je(r,e,l),pp(r,n,l),!0}return!1}function Hc(e,n,r,l){if(l={lane:2,revertLane:bu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yo(e)){if(n)throw Error(s(479))}else n=sc(e,r,l,2),n!==null&&je(n,e,2)}function yo(e){var n=e.alternate;return e===wt||n!==null&&n===wt}function fp(e,n){ks=co=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function pp(e,n,r){if((r&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,vd(e,r)}}var Pa={readContext:Ee,use:fo,useCallback:ee,useContext:ee,useEffect:ee,useImperativeHandle:ee,useLayoutEffect:ee,useInsertionEffect:ee,useMemo:ee,useReducer:ee,useRef:ee,useState:ee,useDebugValue:ee,useDeferredValue:ee,useTransition:ee,useSyncExternalStore:ee,useId:ee,useHostTransitionStatus:ee,useFormState:ee,useActionState:ee,useOptimistic:ee,useMemoCache:ee,useCacheRefresh:ee};Pa.useEffectEvent=ee;var gp={readContext:Ee,use:fo,useCallback:function(e,n){return Le().memoizedState=[e,n===void 0?null:n],e},useContext:Ee,useEffect:Zf,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,go(4194308,4,ip.bind(null,n,e),r)},useLayoutEffect:function(e,n){return go(4194308,4,e,n)},useInsertionEffect:function(e,n){go(4,2,e,n)},useMemo:function(e,n){var r=Le();n=n===void 0?null:n;var l=e();if(Jn){on(!0);try{e()}finally{on(!1)}}return r.memoizedState=[l,n],l},useReducer:function(e,n,r){var l=Le();if(r!==void 0){var p=r(n);if(Jn){on(!0);try{r(n)}finally{on(!1)}}}else p=n;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=Wb.bind(null,wt,e),[l.memoizedState,e]},useRef:function(e){var n=Le();return e={current:e},n.memoizedState=e},useState:function(e){e=kc(e);var n=e.queue,r=dp.bind(null,wt,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:zc,useDeferredValue:function(e,n){var r=Le();return Fc(r,e,n)},useTransition:function(){var e=kc(!1);return e=op.bind(null,wt,e.queue,!0,!1),Le().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var l=wt,p=Le();if(Dt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),Vt===null)throw Error(s(349));(Rt&127)!==0||Pf(l,n,r)}p.memoizedState=r;var m={value:r,getSnapshot:n};return p.queue=m,Zf(Ff.bind(null,l,m,e),[e]),l.flags|=2048,Ps(9,{destroy:void 0},zf.bind(null,l,m,r,n),null),r},useId:function(){var e=Le(),n=Vt.identifierPrefix;if(Dt){var r=_i,l=Ei;r=(l&~(1<<32-$e(l)-1)).toString(32)+r,n="_"+n+"R_"+r,r=uo++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=Gb++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Ic,useFormState:Xf,useActionState:Xf,useOptimistic:function(e){var n=Le();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Hc.bind(null,wt,!0,r),r.dispatch=n,[e,n]},useMemoCache:Lc,useCacheRefresh:function(){return Le().memoizedState=Kb.bind(null,wt)},useEffectEvent:function(e){var n=Le(),r={impl:e};return n.memoizedState=r,function(){if((Pt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},jc={readContext:Ee,use:fo,useCallback:sp,useContext:Ee,useEffect:Pc,useImperativeHandle:np,useInsertionEffect:tp,useLayoutEffect:ep,useMemo:ap,useReducer:po,useRef:Qf,useState:function(){return po(Gi)},useDebugValue:zc,useDeferredValue:function(e,n){var r=ae();return rp(r,Ht.memoizedState,e,n)},useTransition:function(){var e=po(Gi)[0],n=ae().memoizedState;return[typeof e=="boolean"?e:ka(e),n]},useSyncExternalStore:Bf,useId:up,useHostTransitionStatus:Ic,useFormState:$f,useActionState:$f,useOptimistic:function(e,n){var r=ae();return Hf(r,Ht,e,n)},useMemoCache:Lc,useCacheRefresh:hp};jc.useEffectEvent=Jf;var mp={readContext:Ee,use:fo,useCallback:sp,useContext:Ee,useEffect:Pc,useImperativeHandle:np,useInsertionEffect:tp,useLayoutEffect:ep,useMemo:ap,useReducer:Nc,useRef:Qf,useState:function(){return Nc(Gi)},useDebugValue:zc,useDeferredValue:function(e,n){var r=ae();return Ht===null?Fc(r,e,n):rp(r,Ht.memoizedState,e,n)},useTransition:function(){var e=Nc(Gi)[0],n=ae().memoizedState;return[typeof e=="boolean"?e:ka(e),n]},useSyncExternalStore:Bf,useId:up,useHostTransitionStatus:Ic,useFormState:Wf,useActionState:Wf,useOptimistic:function(e,n){var r=ae();return Ht!==null?Hf(r,Ht,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:hp};mp.useEffectEvent=Jf;function Gc(e,n,r,l){n=e.memoizedState,r=r(l,n),r=r==null?n:y({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qc={enqueueSetState:function(e,n,r){e=e._reactInternals;var l=ei(),p=gn(l);p.payload=n,r!=null&&(p.callback=r),n=mn(e,p,l),n!==null&&(je(n,e,l),Da(n,e,l))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var l=ei(),p=gn(l);p.tag=1,p.payload=n,r!=null&&(p.callback=r),n=mn(e,p,l),n!==null&&(je(n,e,l),Da(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=ei(),l=gn(r);l.tag=2,n!=null&&(l.callback=n),n=mn(e,l,r),n!==null&&(je(n,e,r),Da(n,e,r))}};function yp(e,n,r,l,p,m,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,b):n.prototype&&n.prototype.isPureReactComponent?!wa(r,l)||!wa(p,m):!0}function vp(e,n,r,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==e&&qc.enqueueReplaceState(n,n.state,null)}function ts(e,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(e=e.defaultProps){r===n&&(r=y({},r));for(var p in e)r[p]===void 0&&(r[p]=e[p])}return r}function bp(e){$r(e)}function Ap(e){console.error(e)}function Sp(e){$r(e)}function vo(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function wp(e,n,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Vc(e,n,r){return r=gn(r),r.tag=3,r.payload={element:null},r.callback=function(){vo(e,n)},r}function Ep(e){return e=gn(e),e.tag=3,e}function _p(e,n,r,l){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=l.value;e.payload=function(){return p(m)},e.callback=function(){wp(n,r,l)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){wp(n,r,l),typeof p!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Qb(e,n,r,l,p){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&Rs(n,r,p,!0),r=Qe.current,r!==null){switch(r.tag){case 31:case 13:return hi===null?Do():r.alternate===null&&ie===0&&(ie=3),r.flags&=-257,r.flags|=65536,r.lanes=p,l===so?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),mu(e,l,p)),!1;case 22:return r.flags|=65536,l===so?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),mu(e,l,p)),!1}throw Error(s(435,r.tag))}return mu(e,l,p),Do(),!1}if(Dt)return n=Qe.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,l!==uc&&(e=Error(s(422),{cause:l}),Ta(oi(e,r)))):(l!==uc&&(n=Error(s(423),{cause:l}),Ta(oi(n,r))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=oi(l,r),p=Vc(e.stateNode,l,p),Sc(e,p),ie!==4&&(ie=2)),!1;var m=Error(s(520),{cause:l});if(m=oi(m,r),qa===null?qa=[m]:qa.push(m),ie!==4&&(ie=2),n===null)return!0;l=oi(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=p&-p,r.lanes|=e,e=Vc(r.stateNode,l,e),Sc(r,e),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(wn===null||!wn.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Ep(p),_p(p,e,r,l),Sc(r,p),!1}r=r.return}while(r!==null);return!1}var Yc=Error(s(461)),he=!1;function _e(e,n,r,l){n.child=e===null?Rf(n,null,r,l):Zn(n,e.child,r,l)}function Tp(e,n,r,l,p){r=r.render;var m=n.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return $n(n),l=xc(e,n,r,b,m,p),T=Rc(),e!==null&&!he?(Mc(e,n,p),qi(e,n,p)):(Dt&&T&&lc(n),n.flags|=1,_e(e,n,l,p),n.child)}function Cp(e,n,r,l,p){if(e===null){var m=r.type;return typeof m=="function"&&!ac(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,xp(e,n,m,l,p)):(e=Zr(r.type,null,l,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!tu(e,p)){var b=m.memoizedProps;if(r=r.compare,r=r!==null?r:wa,r(b,l)&&e.ref===n.ref)return qi(e,n,p)}return n.flags|=1,e=Fi(m,l),e.ref=n.ref,e.return=n,n.child=e}function xp(e,n,r,l,p){if(e!==null){var m=e.memoizedProps;if(wa(m,l)&&e.ref===n.ref)if(he=!1,n.pendingProps=l=m,tu(e,p))(e.flags&131072)!==0&&(he=!0);else return n.lanes=e.lanes,qi(e,n,p)}return Xc(e,n,r,l,p)}function Rp(e,n,r,l){var p=l.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(l=n.child=e.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~m}else l=0,n.child=null;return Mp(e,n,m,r,l)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&io(n,m!==null?m.cachePool:null),m!==null?Lf(n,m):Ec(),Of(n);else return l=n.lanes=536870912,Mp(e,n,m!==null?m.baseLanes|r:r,r,l)}else m!==null?(io(n,m.cachePool),Lf(n,m),vn(),n.memoizedState=null):(e!==null&&io(n,null),Ec(),vn());return _e(e,n,p,r),n.child}function za(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Mp(e,n,r,l,p){var m=yc();return m=m===null?null:{parent:ce._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},e!==null&&io(n,null),Ec(),Of(n),e!==null&&Rs(e,n,l,!0),n.childLanes=p,null}function bo(e,n){return n=So({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Dp(e,n,r){return Zn(n,e.child,null,r),e=bo(n,n.pendingProps),e.flags|=2,Ze(n),n.memoizedState=null,e}function Zb(e,n,r){var l=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Dt){if(l.mode==="hidden")return e=bo(n,l),n.lanes=536870912,za(null,e);if(Tc(n),(e=Xt)?(e=jg(e,ui),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:un!==null?{id:Ei,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},r=ff(e),r.return=n,n.child=r,we=n,Xt=null)):e=null,e===null)throw dn(n);return n.lanes=536870912,null}return bo(n,l)}var m=e.memoizedState;if(m!==null){var b=m.dehydrated;if(Tc(n),p)if(n.flags&256)n.flags&=-257,n=Dp(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(he||Rs(e,n,r,!1),p=(r&e.childLanes)!==0,he||p){if(l=Vt,l!==null&&(b=bd(l,r),b!==0&&b!==m.retryLane))throw m.retryLane=b,qn(e,b),je(l,e,b),Yc;Do(),n=Dp(e,n,r)}else e=m.treeContext,Xt=di(b.nextSibling),we=n,Dt=!0,hn=null,ui=!1,e!==null&&mf(n,e),n=bo(n,l),n.flags|=4096;return n}return e=Fi(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ao(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Xc(e,n,r,l,p){return $n(n),r=xc(e,n,r,l,void 0,p),l=Rc(),e!==null&&!he?(Mc(e,n,p),qi(e,n,p)):(Dt&&l&&lc(n),n.flags|=1,_e(e,n,r,p),n.child)}function Lp(e,n,r,l,p,m){return $n(n),n.updateQueue=null,r=kf(n,l,r,p),Nf(e),l=Rc(),e!==null&&!he?(Mc(e,n,m),qi(e,n,m)):(Dt&&l&&lc(n),n.flags|=1,_e(e,n,r,m),n.child)}function Op(e,n,r,l,p){if($n(n),n.stateNode===null){var m=_s,b=r.contextType;typeof b=="object"&&b!==null&&(m=Ee(b)),m=new r(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},bc(n),b=r.contextType,m.context=typeof b=="object"&&b!==null?Ee(b):_s,m.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Gc(n,r,b,l),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&qc.enqueueReplaceState(m,m.state,null),Oa(n,l,m,p),La(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){m=n.stateNode;var T=n.memoizedProps,M=ts(r,T);m.props=M;var I=m.context,W=r.contextType;b=_s,typeof W=="object"&&W!==null&&(b=Ee(W));var Z=r.getDerivedStateFromProps;W=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||I!==b)&&vp(n,m,l,b),pn=!1;var H=n.memoizedState;m.state=H,Oa(n,l,m,p),La(),I=n.memoizedState,T||H!==I||pn?(typeof Z=="function"&&(Gc(n,r,Z,l),I=n.memoizedState),(M=pn||yp(n,r,M,l,H,I,b))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=I),m.props=l,m.state=I,m.context=b,l=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Ac(e,n),b=n.memoizedProps,W=ts(r,b),m.props=W,Z=n.pendingProps,H=m.context,I=r.contextType,M=_s,typeof I=="object"&&I!==null&&(M=Ee(I)),T=r.getDerivedStateFromProps,(I=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Z||H!==M)&&vp(n,m,l,M),pn=!1,H=n.memoizedState,m.state=H,Oa(n,l,m,p),La();var G=n.memoizedState;b!==Z||H!==G||pn||e!==null&&e.dependencies!==null&&to(e.dependencies)?(typeof T=="function"&&(Gc(n,r,T,l),G=n.memoizedState),(W=pn||yp(n,r,W,l,H,G,M)||e!==null&&e.dependencies!==null&&to(e.dependencies))?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,G,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,G,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=G),m.props=l,m.state=G,m.context=M,l=W):(typeof m.componentDidUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),l=!1)}return m=l,Ao(e,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&l?(n.child=Zn(n,e.child,null,p),n.child=Zn(n,null,r,p)):_e(e,n,r,p),n.memoizedState=m.state,e=n.child):e=qi(e,n,p),e}function Np(e,n,r,l){return Yn(),n.flags|=256,_e(e,n,r,l),n.child}var $c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kc(e){return{baseLanes:e,cachePool:wf()}}function Wc(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=ti),e}function kp(e,n,r){var l=n.pendingProps,p=!1,m=(n.flags&128)!==0,b;if((b=m)||(b=e!==null&&e.memoizedState===null?!1:(se.current&2)!==0),b&&(p=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,e===null){if(Dt){if(p?yn(n):vn(),(e=Xt)?(e=jg(e,ui),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:un!==null?{id:Ei,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},r=ff(e),r.return=n,n.child=r,we=n,Xt=null)):e=null,e===null)throw dn(n);return Ou(e)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,p?(vn(),p=n.mode,T=So({mode:"hidden",children:T},p),l=Vn(l,p,r,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=Kc(r),l.childLanes=Wc(e,b,r),n.memoizedState=$c,za(null,l)):(yn(n),Qc(n,T))}var M=e.memoizedState;if(M!==null&&(T=M.dehydrated,T!==null)){if(m)n.flags&256?(yn(n),n.flags&=-257,n=Zc(e,n,r)):n.memoizedState!==null?(vn(),n.child=e.child,n.flags|=128,n=null):(vn(),T=l.fallback,p=n.mode,l=So({mode:"visible",children:l.children},p),T=Vn(T,p,r,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,Zn(n,e.child,null,r),l=n.child,l.memoizedState=Kc(r),l.childLanes=Wc(e,b,r),n.memoizedState=$c,n=za(null,l));else if(yn(n),Ou(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var I=b.dgst;b=I,l=Error(s(419)),l.stack="",l.digest=b,Ta({value:l,source:null,stack:null}),n=Zc(e,n,r)}else if(he||Rs(e,n,r,!1),b=(r&e.childLanes)!==0,he||b){if(b=Vt,b!==null&&(l=bd(b,r),l!==0&&l!==M.retryLane))throw M.retryLane=l,qn(e,l),je(b,e,l),Yc;Lu(T)||Do(),n=Zc(e,n,r)}else Lu(T)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Xt=di(T.nextSibling),we=n,Dt=!0,hn=null,ui=!1,e!==null&&mf(n,e),n=Qc(n,l.children),n.flags|=4096);return n}return p?(vn(),T=l.fallback,p=n.mode,M=e.child,I=M.sibling,l=Fi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,I!==null?T=Fi(I,T):(T=Vn(T,p,r,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,za(null,l),l=n.child,T=e.child.memoizedState,T===null?T=Kc(r):(p=T.cachePool,p!==null?(M=ce._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=wf(),T={baseLanes:T.baseLanes|r,cachePool:p}),l.memoizedState=T,l.childLanes=Wc(e,b,r),n.memoizedState=$c,za(e.child,l)):(yn(n),r=e.child,e=r.sibling,r=Fi(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,e!==null&&(b=n.deletions,b===null?(n.deletions=[e],n.flags|=16):b.push(e)),n.child=r,n.memoizedState=null,r)}function Qc(e,n){return n=So({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function So(e,n){return e=We(22,e,null,n),e.lanes=0,e}function Zc(e,n,r){return Zn(n,e.child,null,r),e=Qc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Bp(e,n,r){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),fc(e.return,n,r)}function Jc(e,n,r,l,p,m){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:p,treeForkCount:m}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=r,b.tailMode=p,b.treeForkCount=m)}function Pp(e,n,r){var l=n.pendingProps,p=l.revealOrder,m=l.tail;l=l.children;var b=se.current,T=(b&2)!==0;if(T?(b=b&1|2,n.flags|=128):b&=1,j(se,b),_e(e,n,l,r),l=Dt?_a:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bp(e,r,n);else if(e.tag===19)Bp(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(r=n.child,p=null;r!==null;)e=r.alternate,e!==null&&lo(e)===null&&(p=r),r=r.sibling;r=p,r===null?(p=n.child,n.child=null):(p=r.sibling,r.sibling=null),Jc(n,!1,p,r,m,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&lo(e)===null){n.child=p;break}e=p.sibling,p.sibling=r,r=p,p=e}Jc(n,!0,r,null,m,l);break;case"together":Jc(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function qi(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Sn|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(Rs(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,r=Fi(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Fi(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function tu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&to(e)))}function Jb(e,n,r){switch(n.tag){case 3:Tt(n,n.stateNode.containerInfo),fn(n,ce,e.memoizedState.cache),Yn();break;case 27:case 5:yt(n);break;case 4:Tt(n,n.stateNode.containerInfo);break;case 10:fn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Tc(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(yn(n),n.flags|=128,null):(r&n.child.childLanes)!==0?kp(e,n,r):(yn(n),e=qi(e,n,r),e!==null?e.sibling:null);yn(n);break;case 19:var p=(e.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(Rs(e,n,r,!1),l=(r&n.childLanes)!==0),p){if(l)return Pp(e,n,r);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),j(se,se.current),l)break;return null;case 22:return n.lanes=0,Rp(e,n,r,n.pendingProps);case 24:fn(n,ce,e.memoizedState.cache)}return qi(e,n,r)}function zp(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)he=!0;else{if(!tu(e,r)&&(n.flags&128)===0)return he=!1,Jb(e,n,r);he=(e.flags&131072)!==0}else he=!1,Dt&&(n.flags&1048576)!==0&&gf(n,_a,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=Wn(n.elementType),n.type=e,typeof e=="function")ac(e)?(l=ts(e,l),n.tag=1,n=Op(null,n,e,l,r)):(n.tag=0,n=Xc(null,n,e,l,r));else{if(e!=null){var p=e.$$typeof;if(p===O){n.tag=11,n=Tp(null,n,e,l,r);break t}else if(p===z){n.tag=14,n=Cp(null,n,e,l,r);break t}}throw n=pt(e)||e,Error(s(306,n,""))}}return n;case 0:return Xc(e,n,n.type,n.pendingProps,r);case 1:return l=n.type,p=ts(l,n.pendingProps),Op(e,n,l,p,r);case 3:t:{if(Tt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var m=n.memoizedState;p=m.element,Ac(e,n),Oa(n,l,null,r);var b=n.memoizedState;if(l=b.cache,fn(n,ce,l),l!==m.cache&&pc(n,[ce],r,!0),La(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Np(e,n,l,r);break t}else if(l!==p){p=oi(Error(s(424)),n),Ta(p),n=Np(e,n,l,r);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xt=di(e.firstChild),we=n,Dt=!0,hn=null,ui=!0,r=Rf(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Yn(),l===p){n=qi(e,n,r);break t}_e(e,n,l,r)}n=n.child}return n;case 26:return Ao(e,n),e===null?(r=$g(n.type,null,n.pendingProps,null))?n.memoizedState=r:Dt||(r=n.type,e=n.pendingProps,l=zo(ct.current).createElement(r),l[Se]=n,l[Pe]=e,Te(l,r,e),ye(l),n.stateNode=l):n.memoizedState=$g(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return yt(n),e===null&&Dt&&(l=n.stateNode=Vg(n.type,n.pendingProps,ct.current),we=n,ui=!0,p=Xt,Cn(n.type)?(Nu=p,Xt=di(l.firstChild)):Xt=p),_e(e,n,n.pendingProps.children,r),Ao(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Dt&&((p=l=Xt)&&(l=M0(l,n.type,n.pendingProps,ui),l!==null?(n.stateNode=l,we=n,Xt=di(l.firstChild),ui=!1,p=!0):p=!1),p||dn(n)),yt(n),p=n.type,m=n.pendingProps,b=e!==null?e.memoizedProps:null,l=m.children,Ru(p,m)?l=null:b!==null&&Ru(p,b)&&(n.flags|=32),n.memoizedState!==null&&(p=xc(e,n,qb,null,null,r),Za._currentValue=p),Ao(e,n),_e(e,n,l,r),n.child;case 6:return e===null&&Dt&&((e=r=Xt)&&(r=D0(r,n.pendingProps,ui),r!==null?(n.stateNode=r,we=n,Xt=null,e=!0):e=!1),e||dn(n)),null;case 13:return kp(e,n,r);case 4:return Tt(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Zn(n,null,l,r):_e(e,n,l,r),n.child;case 11:return Tp(e,n,n.type,n.pendingProps,r);case 7:return _e(e,n,n.pendingProps,r),n.child;case 8:return _e(e,n,n.pendingProps.children,r),n.child;case 12:return _e(e,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,fn(n,n.type,l.value),_e(e,n,l.children,r),n.child;case 9:return p=n.type._context,l=n.pendingProps.children,$n(n),p=Ee(p),l=l(p),n.flags|=1,_e(e,n,l,r),n.child;case 14:return Cp(e,n,n.type,n.pendingProps,r);case 15:return xp(e,n,n.type,n.pendingProps,r);case 19:return Pp(e,n,r);case 31:return Zb(e,n,r);case 22:return Rp(e,n,r,n.pendingProps);case 24:return $n(n),l=Ee(ce),e===null?(p=yc(),p===null&&(p=Vt,m=gc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),n.memoizedState={parent:l,cache:p},bc(n),fn(n,ce,p)):((e.lanes&r)!==0&&(Ac(e,n),Oa(n,null,null,r),La()),p=e.memoizedState,m=n.memoizedState,p.parent!==l?(p={parent:l,cache:l},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),fn(n,ce,l)):(l=m.cache,fn(n,ce,l),l!==p.cache&&pc(n,[ce],r,!0))),_e(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Vi(e){e.flags|=4}function eu(e,n,r,l,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(ug())e.flags|=8192;else throw Qn=so,vc}else e.flags&=-16777217}function Fp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jg(n))if(ug())e.flags|=8192;else throw Qn=so,vc}function wo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?md():536870912,e.lanes|=n,Is|=n)}function Fa(e,n){if(!Dt)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function $t(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(n)for(var p=e.child;p!==null;)r|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)r|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=r,n}function t0(e,n,r){var l=n.pendingProps;switch(cc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(n),null;case 1:return $t(n),null;case 3:return r=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Hi(ce),st(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xs(n)?Vi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,hc())),$t(n),null;case 26:var p=n.type,m=n.memoizedState;return e===null?(Vi(n),m!==null?($t(n),Fp(n,m)):($t(n),eu(n,p,null,l,r))):m?m!==e.memoizedState?(Vi(n),$t(n),Fp(n,m)):($t(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Vi(n),$t(n),eu(n,p,e,l,r)),null;case 27:if(Nt(n),r=ct.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Vi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return $t(n),null}e=J.current,xs(n)?yf(n):(e=Vg(p,l,r),n.stateNode=e,Vi(n))}return $t(n),null;case 5:if(Nt(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Vi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return $t(n),null}if(m=J.current,xs(n))yf(n);else{var b=zo(ct.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?b.createElement(p,{is:l.is}):b.createElement(p)}}m[Se]=n,m[Pe]=l;t:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break t;for(;b.sibling===null;){if(b.return===null||b.return===n)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=m;t:switch(Te(m,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Vi(n)}}return $t(n),eu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Vi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ct.current,xs(n)){if(e=n.stateNode,r=n.memoizedProps,l=null,p=we,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[Se]=n,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||kg(e.nodeValue,r)),e||dn(n,!0)}else e=zo(e).createTextNode(l),e[Se]=n,n.stateNode=e}return $t(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(l=xs(n),r!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Se]=n}else Yn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),e=!1}else r=hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(Ze(n),n):(Ze(n),null);if((n.flags&128)!==0)throw Error(s(558))}return $t(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=xs(n),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Se]=n}else Yn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),p=!1}else p=hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Ze(n),n):(Ze(n),null)}return Ze(n),(n.flags&128)!==0?(n.lanes=r,n):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=n.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==p&&(l.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),wo(n,n.updateQueue),$t(n),null);case 4:return st(),e===null&&Eu(n.stateNode.containerInfo),$t(n),null;case 10:return Hi(n.type),$t(n),null;case 19:if(F(se),l=n.memoizedState,l===null)return $t(n),null;if(p=(n.flags&128)!==0,m=l.rendering,m===null)if(p)Fa(l,!1);else{if(ie!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=lo(e),m!==null){for(n.flags|=128,Fa(l,!1),e=m.updateQueue,n.updateQueue=e,wo(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)df(r,e),r=r.sibling;return j(se,se.current&1|2),Dt&&Ui(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Ye()>xo&&(n.flags|=128,p=!0,Fa(l,!1),n.lanes=4194304)}else{if(!p)if(e=lo(m),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,wo(n,e),Fa(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Dt)return $t(n),null}else 2*Ye()-l.renderingStartTime>xo&&r!==536870912&&(n.flags|=128,p=!0,Fa(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(e=l.last,e!==null?e.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ye(),e.sibling=null,r=se.current,j(se,p?r&1|2:r&1),Dt&&Ui(n,l.treeForkCount),e):($t(n),null);case 22:case 23:return Ze(n),_c(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&($t(n),n.subtreeFlags&6&&(n.flags|=8192)):$t(n),r=n.updateQueue,r!==null&&wo(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),e!==null&&F(Kn),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Hi(ce),$t(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function e0(e,n){switch(cc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Hi(ce),st(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Nt(n),null;case 31:if(n.memoizedState!==null){if(Ze(n),n.alternate===null)throw Error(s(340));Yn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ze(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Yn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return F(se),null;case 4:return st(),null;case 10:return Hi(n.type),null;case 22:case 23:return Ze(n),_c(),e!==null&&F(Kn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Hi(ce),null;case 25:return null;default:return null}}function Up(e,n){switch(cc(n),n.tag){case 3:Hi(ce),st();break;case 26:case 27:case 5:Nt(n);break;case 4:st();break;case 31:n.memoizedState!==null&&Ze(n);break;case 13:Ze(n);break;case 19:F(se);break;case 10:Hi(n.type);break;case 22:case 23:Ze(n),_c(),e!==null&&F(Kn);break;case 24:Hi(ce)}}function Ua(e,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var p=l.next;r=p;do{if((r.tag&e)===e){l=void 0;var m=r.create,b=r.inst;l=m(),b.destroy=l}r=r.next}while(r!==p)}}catch(T){It(n,n.return,T)}}function bn(e,n,r){try{var l=n.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&e)===e){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,p=n;var M=r,I=T;try{I()}catch(W){It(p,M,W)}}}l=l.next}while(l!==m)}}catch(W){It(n,n.return,W)}}function Ip(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{Df(n,r)}catch(l){It(e,e.return,l)}}}function Hp(e,n,r){r.props=ts(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){It(e,n,l)}}function Ia(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(p){It(e,n,p)}}function Ti(e,n){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(p){It(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){It(e,n,p)}else r.current=null}function jp(e){var n=e.type,r=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(p){It(e,e.return,p)}}function iu(e,n,r){try{var l=e.stateNode;E0(l,e.type,r,n),l[Pe]=n}catch(p){It(e,e.return,p)}}function Gp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Cn(e.type)||e.tag===4}function nu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Gp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Cn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function su(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Pi));else if(l!==4&&(l===27&&Cn(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(su(e,n,r),e=e.sibling;e!==null;)su(e,n,r),e=e.sibling}function Eo(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(l!==4&&(l===27&&Cn(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Eo(e,n,r),e=e.sibling;e!==null;)Eo(e,n,r),e=e.sibling}function qp(e){var n=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Te(n,l,r),n[Se]=e,n[Pe]=r}catch(m){It(e,e.return,m)}}var Yi=!1,de=!1,au=!1,Vp=typeof WeakSet=="function"?WeakSet:Set,ve=null;function i0(e,n){if(e=e.containerInfo,Cu=qo,e=nf(e),Zl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var b=0,T=-1,M=-1,I=0,W=0,Z=e,H=null;e:for(;;){for(var G;Z!==r||p!==0&&Z.nodeType!==3||(T=b+p),Z!==m||l!==0&&Z.nodeType!==3||(M=b+l),Z.nodeType===3&&(b+=Z.nodeValue.length),(G=Z.firstChild)!==null;)H=Z,Z=G;for(;;){if(Z===e)break e;if(H===r&&++I===p&&(T=b),H===m&&++W===l&&(M=b),(G=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=G}r=T===-1||M===-1?null:{start:T,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(xu={focusedElem:e,selectionRange:r},qo=!1,ve=n;ve!==null;)if(n=ve,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ve=e;else for(;ve!==null;){switch(n=ve,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)p=e[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=n,p=m.memoizedProps,m=m.memoizedState,l=r.stateNode;try{var ot=ts(r.type,p);e=l.getSnapshotBeforeUpdate(ot,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(gt){It(r,r.return,gt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)Du(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Du(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,ve=e;break}ve=n.return}}function Yp(e,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:$i(e,r),l&4&&Ua(5,r);break;case 1:if($i(e,r),l&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(b){It(r,r.return,b)}else{var p=ts(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(b){It(r,r.return,b)}}l&64&&Ip(r),l&512&&Ia(r,r.return);break;case 3:if($i(e,r),l&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Df(e,n)}catch(b){It(r,r.return,b)}}break;case 27:n===null&&l&4&&qp(r);case 26:case 5:$i(e,r),n===null&&l&4&&jp(r),l&512&&Ia(r,r.return);break;case 12:$i(e,r);break;case 31:$i(e,r),l&4&&Kp(e,r);break;case 13:$i(e,r),l&4&&Wp(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=h0.bind(null,r),L0(e,r))));break;case 22:if(l=r.memoizedState!==null||Yi,!l){n=n!==null&&n.memoizedState!==null||de,p=Yi;var m=de;Yi=l,(de=n)&&!m?Ki(e,r,(r.subtreeFlags&8772)!==0):$i(e,r),Yi=p,de=m}break;case 30:break;default:$i(e,r)}}function Xp(e){var n=e.alternate;n!==null&&(e.alternate=null,Xp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Bl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Kt=null,Fe=!1;function Xi(e,n,r){for(r=r.child;r!==null;)$p(e,n,r),r=r.sibling}function $p(e,n,r){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(ua,r)}catch{}switch(r.tag){case 26:de||Ti(r,n),Xi(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:de||Ti(r,n);var l=Kt,p=Fe;Cn(r.type)&&(Kt=r.stateNode,Fe=!1),Xi(e,n,r),Ka(r.stateNode),Kt=l,Fe=p;break;case 5:de||Ti(r,n);case 6:if(l=Kt,p=Fe,Kt=null,Xi(e,n,r),Kt=l,Fe=p,Kt!==null)if(Fe)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(r.stateNode)}catch(m){It(r,n,m)}else try{Kt.removeChild(r.stateNode)}catch(m){It(r,n,m)}break;case 18:Kt!==null&&(Fe?(e=Kt,Ig(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),$s(e)):Ig(Kt,r.stateNode));break;case 4:l=Kt,p=Fe,Kt=r.stateNode.containerInfo,Fe=!0,Xi(e,n,r),Kt=l,Fe=p;break;case 0:case 11:case 14:case 15:bn(2,r,n),de||bn(4,r,n),Xi(e,n,r);break;case 1:de||(Ti(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Hp(r,n,l)),Xi(e,n,r);break;case 21:Xi(e,n,r);break;case 22:de=(l=de)||r.memoizedState!==null,Xi(e,n,r),de=l;break;default:Xi(e,n,r)}}function Kp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{$s(e)}catch(r){It(n,n.return,r)}}}function Wp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$s(e)}catch(r){It(n,n.return,r)}}function n0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Vp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Vp),n;default:throw Error(s(435,e.tag))}}function _o(e,n){var r=n0(e);n.forEach(function(l){if(!r.has(l)){r.add(l);var p=d0.bind(null,e,l);l.then(p,p)}})}function Ue(e,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var p=r[l],m=e,b=n,T=b;t:for(;T!==null;){switch(T.tag){case 27:if(Cn(T.type)){Kt=T.stateNode,Fe=!1;break t}break;case 5:Kt=T.stateNode,Fe=!1;break t;case 3:case 4:Kt=T.stateNode.containerInfo,Fe=!0;break t}T=T.return}if(Kt===null)throw Error(s(160));$p(m,b,p),Kt=null,Fe=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Qp(n,e),n=n.sibling}var bi=null;function Qp(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ue(n,e),Ie(e),l&4&&(bn(3,e,e.return),Ua(3,e),bn(5,e,e.return));break;case 1:Ue(n,e),Ie(e),l&512&&(de||r===null||Ti(r,r.return)),l&64&&Yi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var p=bi;if(Ue(n,e),Ie(e),l&512&&(de||r===null||Ti(r,r.return)),l&4){var m=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){t:{l=e.type,r=e.memoizedProps,p=p.ownerDocument||p;e:switch(l){case"title":m=p.getElementsByTagName("title")[0],(!m||m[fa]||m[Se]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(l),p.head.insertBefore(m,p.querySelector("head > title"))),Te(m,l,r),m[Se]=e,ye(m),l=m;break t;case"link":var b=Qg("link","href",p).get(l+(r.href||""));if(b){for(var T=0;T<b.length;T++)if(m=b[T],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(T,1);break e}}m=p.createElement(l),Te(m,l,r),p.head.appendChild(m);break;case"meta":if(b=Qg("meta","content",p).get(l+(r.content||""))){for(T=0;T<b.length;T++)if(m=b[T],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(T,1);break e}}m=p.createElement(l),Te(m,l,r),p.head.appendChild(m);break;default:throw Error(s(468,l))}m[Se]=e,ye(m),l=m}e.stateNode=l}else Zg(p,e.type,e.stateNode);else e.stateNode=Wg(p,l,e.memoizedProps);else m!==l?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,l===null?Zg(p,e.type,e.stateNode):Wg(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&iu(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ue(n,e),Ie(e),l&512&&(de||r===null||Ti(r,r.return)),r!==null&&l&4&&iu(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ue(n,e),Ie(e),l&512&&(de||r===null||Ti(r,r.return)),e.flags&32){p=e.stateNode;try{ys(p,"")}catch(ot){It(e,e.return,ot)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,iu(e,p,r!==null?r.memoizedProps:p)),l&1024&&(au=!0);break;case 6:if(Ue(n,e),Ie(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(ot){It(e,e.return,ot)}}break;case 3:if(Io=null,p=bi,bi=Fo(n.containerInfo),Ue(n,e),bi=p,Ie(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{$s(n.containerInfo)}catch(ot){It(e,e.return,ot)}au&&(au=!1,Zp(e));break;case 4:l=bi,bi=Fo(e.stateNode.containerInfo),Ue(n,e),Ie(e),bi=l;break;case 12:Ue(n,e),Ie(e);break;case 31:Ue(n,e),Ie(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,_o(e,l)));break;case 13:Ue(n,e),Ie(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Co=Ye()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,_o(e,l)));break;case 22:p=e.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,I=Yi,W=de;if(Yi=I||p,de=W||M,Ue(n,e),de=W,Yi=I,Ie(e),l&8192)t:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(r===null||M||Yi||de||es(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){M=r=n;try{if(m=M.stateNode,p)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=M.stateNode;var Z=M.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(ot){It(M,M.return,ot)}}}else if(n.tag===6){if(r===null){M=n;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(ot){It(M,M.return,ot)}}}else if(n.tag===18){if(r===null){M=n;try{var G=M.stateNode;p?Hg(G,!0):Hg(M.stateNode,!1)}catch(ot){It(M,M.return,ot)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,_o(e,r))));break;case 19:Ue(n,e),Ie(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,_o(e,l)));break;case 30:break;case 21:break;default:Ue(n,e),Ie(e)}}function Ie(e){var n=e.flags;if(n&2){try{for(var r,l=e.return;l!==null;){if(Gp(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,m=nu(e);Eo(e,m,p);break;case 5:var b=r.stateNode;r.flags&32&&(ys(b,""),r.flags&=-33);var T=nu(e);Eo(e,T,b);break;case 3:case 4:var M=r.stateNode.containerInfo,I=nu(e);su(e,I,M);break;default:throw Error(s(161))}}catch(W){It(e,e.return,W)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Zp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Zp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function $i(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Yp(e,n.alternate,n),n=n.sibling}function es(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:bn(4,n,n.return),es(n);break;case 1:Ti(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Hp(n,n.return,r),es(n);break;case 27:Ka(n.stateNode);case 26:case 5:Ti(n,n.return),es(n);break;case 22:n.memoizedState===null&&es(n);break;case 30:es(n);break;default:es(n)}e=e.sibling}}function Ki(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,p=e,m=n,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ki(p,m,r),Ua(4,m);break;case 1:if(Ki(p,m,r),l=m,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(I){It(l,l.return,I)}if(l=m,p=l.updateQueue,p!==null){var T=l.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)Mf(M[p],T)}catch(I){It(l,l.return,I)}}r&&b&64&&Ip(m),Ia(m,m.return);break;case 27:qp(m);case 26:case 5:Ki(p,m,r),r&&l===null&&b&4&&jp(m),Ia(m,m.return);break;case 12:Ki(p,m,r);break;case 31:Ki(p,m,r),r&&b&4&&Kp(p,m);break;case 13:Ki(p,m,r),r&&b&4&&Wp(p,m);break;case 22:m.memoizedState===null&&Ki(p,m,r),Ia(m,m.return);break;case 30:break;default:Ki(p,m,r)}n=n.sibling}}function ru(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ca(r))}function ou(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ca(e))}function Ai(e,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jp(e,n,r,l),n=n.sibling}function Jp(e,n,r,l){var p=n.flags;switch(n.tag){case 0:case 11:case 15:Ai(e,n,r,l),p&2048&&Ua(9,n);break;case 1:Ai(e,n,r,l);break;case 3:Ai(e,n,r,l),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ca(e)));break;case 12:if(p&2048){Ai(e,n,r,l),e=n.stateNode;try{var m=n.memoizedProps,b=m.id,T=m.onPostCommit;typeof T=="function"&&T(b,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){It(n,n.return,M)}}else Ai(e,n,r,l);break;case 31:Ai(e,n,r,l);break;case 13:Ai(e,n,r,l);break;case 23:break;case 22:m=n.stateNode,b=n.alternate,n.memoizedState!==null?m._visibility&2?Ai(e,n,r,l):Ha(e,n):m._visibility&2?Ai(e,n,r,l):(m._visibility|=2,zs(e,n,r,l,(n.subtreeFlags&10256)!==0||!1)),p&2048&&ru(b,n);break;case 24:Ai(e,n,r,l),p&2048&&ou(n.alternate,n);break;default:Ai(e,n,r,l)}}function zs(e,n,r,l,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,b=n,T=r,M=l,I=b.flags;switch(b.tag){case 0:case 11:case 15:zs(m,b,T,M,p),Ua(8,b);break;case 23:break;case 22:var W=b.stateNode;b.memoizedState!==null?W._visibility&2?zs(m,b,T,M,p):Ha(m,b):(W._visibility|=2,zs(m,b,T,M,p)),p&&I&2048&&ru(b.alternate,b);break;case 24:zs(m,b,T,M,p),p&&I&2048&&ou(b.alternate,b);break;default:zs(m,b,T,M,p)}n=n.sibling}}function Ha(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,l=n,p=l.flags;switch(l.tag){case 22:Ha(r,l),p&2048&&ru(l.alternate,l);break;case 24:Ha(r,l),p&2048&&ou(l.alternate,l);break;default:Ha(r,l)}n=n.sibling}}var ja=8192;function Fs(e,n,r){if(e.subtreeFlags&ja)for(e=e.child;e!==null;)tg(e,n,r),e=e.sibling}function tg(e,n,r){switch(e.tag){case 26:Fs(e,n,r),e.flags&ja&&e.memoizedState!==null&&G0(r,bi,e.memoizedState,e.memoizedProps);break;case 5:Fs(e,n,r);break;case 3:case 4:var l=bi;bi=Fo(e.stateNode.containerInfo),Fs(e,n,r),bi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ja,ja=16777216,Fs(e,n,r),ja=l):Fs(e,n,r));break;default:Fs(e,n,r)}}function eg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ga(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];ve=l,ng(l,e)}eg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ig(e),e=e.sibling}function ig(e){switch(e.tag){case 0:case 11:case 15:Ga(e),e.flags&2048&&bn(9,e,e.return);break;case 3:Ga(e);break;case 12:Ga(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,To(e)):Ga(e);break;default:Ga(e)}}function To(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];ve=l,ng(l,e)}eg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:bn(8,n,n.return),To(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,To(n));break;default:To(n)}e=e.sibling}}function ng(e,n){for(;ve!==null;){var r=ve;switch(r.tag){case 0:case 11:case 15:bn(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ca(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,ve=l;else t:for(r=e;ve!==null;){l=ve;var p=l.sibling,m=l.return;if(Xp(l),l===r){ve=null;break t}if(p!==null){p.return=m,ve=p;break t}ve=m}}}var s0={getCacheForType:function(e){var n=Ee(ce),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return Ee(ce).controller.signal}},a0=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Vt=null,Ct=null,Rt=0,Ut=0,Je=null,An=!1,Us=!1,lu=!1,Wi=0,ie=0,Sn=0,is=0,cu=0,ti=0,Is=0,qa=null,He=null,uu=!1,Co=0,sg=0,xo=1/0,Ro=null,wn=null,ge=0,En=null,Hs=null,Qi=0,hu=0,du=null,ag=null,Va=0,fu=null;function ei(){return(Pt&2)!==0&&Rt!==0?Rt&-Rt:B.T!==null?bu():Ad()}function rg(){if(ti===0)if((Rt&536870912)===0||Dt){var e=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),ti=e}else ti=536870912;return e=Qe.current,e!==null&&(e.flags|=32),ti}function je(e,n,r){(e===Vt&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)&&(js(e,0),_n(e,Rt,ti,!1)),da(e,r),((Pt&2)===0||e!==Vt)&&(e===Vt&&((Pt&2)===0&&(is|=r),ie===4&&_n(e,Rt,ti,!1)),Ci(e))}function og(e,n,r){if((Pt&6)!==0)throw Error(s(327));var l=!r&&(n&127)===0&&(n&e.expiredLanes)===0||ha(e,n),p=l?l0(e,n):gu(e,n,!0),m=l;do{if(p===0){Us&&!l&&_n(e,n,0,!1);break}else{if(r=e.current.alternate,m&&!r0(r)){p=gu(e,n,!1),m=!1;continue}if(p===2){if(m=n,e.errorRecoveryDisabledLanes&m)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;t:{var T=e;p=qa;var M=T.current.memoizedState.isDehydrated;if(M&&(js(T,b).flags|=256),b=gu(T,b,!1),b!==2){if(lu&&!M){T.errorRecoveryDisabledLanes|=m,is|=m,p=4;break t}m=He,He=p,m!==null&&(He===null?He=m:He.push.apply(He,m))}p=b}if(m=!1,p!==2)continue}}if(p===1){js(e,0),_n(e,n,0,!0);break}t:{switch(l=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:_n(l,n,ti,!An);break t;case 2:He=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(p=Co+300-Ye(),10<p)){if(_n(l,n,ti,!An),zr(l,0,!0)!==0)break t;Qi=n,l.timeoutHandle=Fg(lg.bind(null,l,r,He,Ro,uu,n,ti,is,Is,An,m,"Throttled",-0,0),p);break t}lg(l,r,He,Ro,uu,n,ti,is,Is,An,m,null,-0,0)}}break}while(!0);Ci(e)}function lg(e,n,r,l,p,m,b,T,M,I,W,Z,H,G){if(e.timeoutHandle=-1,Z=n.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},tg(n,m,Z);var ot=(m&62914560)===m?Co-Ye():(m&4194048)===m?sg-Ye():0;if(ot=q0(Z,ot),ot!==null){Qi=m,e.cancelPendingCommit=ot(mg.bind(null,e,n,m,r,l,p,b,T,M,W,Z,null,H,G)),_n(e,m,b,!I);return}}mg(e,n,m,r,l,p,b,T,M)}function r0(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var p=r[l],m=p.getSnapshot;p=p.value;try{if(!Ke(m(),p))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function _n(e,n,r,l){n&=~cu,n&=~is,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var p=n;0<p;){var m=31-$e(p),b=1<<m;l[m]=-1,p&=~b}r!==0&&yd(e,r,n)}function Mo(){return(Pt&6)===0?(Ya(0),!1):!0}function pu(){if(Ct!==null){if(Ut===0)var e=Ct.return;else e=Ct,Ii=Xn=null,Dc(e),Os=null,Ra=0,e=Ct;for(;e!==null;)Up(e.alternate,e),e=e.return;Ct=null}}function js(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,C0(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Qi=0,pu(),Vt=e,Ct=r=Fi(e.current,null),Rt=n,Ut=0,Je=null,An=!1,Us=ha(e,n),lu=!1,Is=ti=cu=is=Sn=ie=0,He=qa=null,uu=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var p=31-$e(l),m=1<<p;n|=e[p],l&=~m}return Wi=n,Kr(),r}function cg(e,n){wt=null,B.H=Pa,n===Ls||n===no?(n=Tf(),Ut=3):n===vc?(n=Tf(),Ut=4):Ut=n===Yc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Je=n,Ct===null&&(ie=1,vo(e,oi(n,e.current)))}function ug(){var e=Qe.current;return e===null?!0:(Rt&4194048)===Rt?hi===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?e===hi:!1}function hg(){var e=B.H;return B.H=Pa,e===null?Pa:e}function dg(){var e=B.A;return B.A=s0,e}function Do(){ie=4,An||(Rt&4194048)!==Rt&&Qe.current!==null||(Us=!0),(Sn&134217727)===0&&(is&134217727)===0||Vt===null||_n(Vt,Rt,ti,!1)}function gu(e,n,r){var l=Pt;Pt|=2;var p=hg(),m=dg();(Vt!==e||Rt!==n)&&(Ro=null,js(e,n)),n=!1;var b=ie;t:do try{if(Ut!==0&&Ct!==null){var T=Ct,M=Je;switch(Ut){case 8:pu(),b=6;break t;case 3:case 2:case 9:case 6:Qe.current===null&&(n=!0);var I=Ut;if(Ut=0,Je=null,Gs(e,T,M,I),r&&Us){b=0;break t}break;default:I=Ut,Ut=0,Je=null,Gs(e,T,M,I)}}o0(),b=ie;break}catch(W){cg(e,W)}while(!0);return n&&e.shellSuspendCounter++,Ii=Xn=null,Pt=l,B.H=p,B.A=m,Ct===null&&(Vt=null,Rt=0,Kr()),b}function o0(){for(;Ct!==null;)fg(Ct)}function l0(e,n){var r=Pt;Pt|=2;var l=hg(),p=dg();Vt!==e||Rt!==n?(Ro=null,xo=Ye()+500,js(e,n)):Us=ha(e,n);t:do try{if(Ut!==0&&Ct!==null){n=Ct;var m=Je;e:switch(Ut){case 1:Ut=0,Je=null,Gs(e,n,m,1);break;case 2:case 9:if(Ef(m)){Ut=0,Je=null,pg(n);break}n=function(){Ut!==2&&Ut!==9||Vt!==e||(Ut=7),Ci(e)},m.then(n,n);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:Ef(m)?(Ut=0,Je=null,pg(n)):(Ut=0,Je=null,Gs(e,n,m,7));break;case 5:var b=null;switch(Ct.tag){case 26:b=Ct.memoizedState;case 5:case 27:var T=Ct;if(b?Jg(b):T.stateNode.complete){Ut=0,Je=null;var M=T.sibling;if(M!==null)Ct=M;else{var I=T.return;I!==null?(Ct=I,Lo(I)):Ct=null}break e}}Ut=0,Je=null,Gs(e,n,m,5);break;case 6:Ut=0,Je=null,Gs(e,n,m,6);break;case 8:pu(),ie=6;break t;default:throw Error(s(462))}}c0();break}catch(W){cg(e,W)}while(!0);return Ii=Xn=null,B.H=l,B.A=p,Pt=r,Ct!==null?0:(Vt=null,Rt=0,Kr(),ie)}function c0(){for(;Ct!==null&&!Ov();)fg(Ct)}function fg(e){var n=zp(e.alternate,e,Wi);e.memoizedProps=e.pendingProps,n===null?Lo(e):Ct=n}function pg(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=Lp(r,n,n.pendingProps,n.type,void 0,Rt);break;case 11:n=Lp(r,n,n.pendingProps,n.type.render,n.ref,Rt);break;case 5:Dc(n);default:Up(r,n),n=Ct=df(n,Wi),n=zp(r,n,Wi)}e.memoizedProps=e.pendingProps,n===null?Lo(e):Ct=n}function Gs(e,n,r,l){Ii=Xn=null,Dc(n),Os=null,Ra=0;var p=n.return;try{if(Qb(e,p,n,r,Rt)){ie=1,vo(e,oi(r,e.current)),Ct=null;return}}catch(m){if(p!==null)throw Ct=p,m;ie=1,vo(e,oi(r,e.current)),Ct=null;return}n.flags&32768?(Dt||l===1?e=!0:Us||(Rt&536870912)!==0?e=!1:(An=e=!0,(l===2||l===9||l===3||l===6)&&(l=Qe.current,l!==null&&l.tag===13&&(l.flags|=16384))),gg(n,e)):Lo(n)}function Lo(e){var n=e;do{if((n.flags&32768)!==0){gg(n,An);return}e=n.return;var r=t0(n.alternate,n,Wi);if(r!==null){Ct=r;return}if(n=n.sibling,n!==null){Ct=n;return}Ct=n=e}while(n!==null);ie===0&&(ie=5)}function gg(e,n){do{var r=e0(e.alternate,e);if(r!==null){r.flags&=32767,Ct=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Ct=e;return}Ct=e=r}while(e!==null);ie=6,Ct=null}function mg(e,n,r,l,p,m,b,T,M){e.cancelPendingCommit=null;do Oo();while(ge!==0);if((Pt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=nc,jv(e,r,m,b,T,M),e===Vt&&(Ct=Vt=null,Rt=0),Hs=n,En=e,Qi=r,hu=m,du=p,ag=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,f0(Nr,function(){return Sg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,p=$.p,$.p=2,b=Pt,Pt|=4;try{i0(e,n,r)}finally{Pt=b,$.p=p,B.T=l}}ge=1,yg(),vg(),bg()}}function yg(){if(ge===1){ge=0;var e=En,n=Hs,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var l=$.p;$.p=2;var p=Pt;Pt|=4;try{Qp(n,e);var m=xu,b=nf(e.containerInfo),T=m.focusedElem,M=m.selectionRange;if(b!==T&&T&&T.ownerDocument&&ef(T.ownerDocument.documentElement,T)){if(M!==null&&Zl(T)){var I=M.start,W=M.end;if(W===void 0&&(W=I),"selectionStart"in T)T.selectionStart=I,T.selectionEnd=Math.min(W,T.value.length);else{var Z=T.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var G=H.getSelection(),ot=T.textContent.length,gt=Math.min(M.start,ot),Gt=M.end===void 0?gt:Math.min(M.end,ot);!G.extend&&gt>Gt&&(b=Gt,Gt=gt,gt=b);var P=tf(T,gt),L=tf(T,Gt);if(P&&L&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==L.node||G.focusOffset!==L.offset)){var U=Z.createRange();U.setStart(P.node,P.offset),G.removeAllRanges(),gt>Gt?(G.addRange(U),G.extend(L.node,L.offset)):(U.setEnd(L.node,L.offset),G.addRange(U))}}}}for(Z=[],G=T;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Z.length;T++){var Q=Z[T];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}qo=!!Cu,xu=Cu=null}finally{Pt=p,$.p=l,B.T=r}}e.current=n,ge=2}}function vg(){if(ge===2){ge=0;var e=En,n=Hs,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var l=$.p;$.p=2;var p=Pt;Pt|=4;try{Yp(e,n.alternate,n)}finally{Pt=p,$.p=l,B.T=r}}ge=3}}function bg(){if(ge===4||ge===3){ge=0,Nv();var e=En,n=Hs,r=Qi,l=ag;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ge=5:(ge=0,Hs=En=null,Ag(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(wn=null),Nl(r),n=n.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(ua,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=B.T,p=$.p,$.p=2,B.T=null;try{for(var m=e.onRecoverableError,b=0;b<l.length;b++){var T=l[b];m(T.value,{componentStack:T.stack})}}finally{B.T=n,$.p=p}}(Qi&3)!==0&&Oo(),Ci(e),p=e.pendingLanes,(r&261930)!==0&&(p&42)!==0?e===fu?Va++:(Va=0,fu=e):Va=0,Ya(0)}}function Ag(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ca(n)))}function Oo(){return yg(),vg(),bg(),Sg()}function Sg(){if(ge!==5)return!1;var e=En,n=hu;hu=0;var r=Nl(Qi),l=B.T,p=$.p;try{$.p=32>r?32:r,B.T=null,r=du,du=null;var m=En,b=Qi;if(ge=0,Hs=En=null,Qi=0,(Pt&6)!==0)throw Error(s(331));var T=Pt;if(Pt|=4,ig(m.current),Jp(m,m.current,b,r),Pt=T,Ya(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(ua,m)}catch{}return!0}finally{$.p=p,B.T=l,Ag(e,n)}}function wg(e,n,r){n=oi(r,n),n=Vc(e.stateNode,n,2),e=mn(e,n,2),e!==null&&(da(e,2),Ci(e))}function It(e,n,r){if(e.tag===3)wg(e,e,r);else for(;n!==null;){if(n.tag===3){wg(n,e,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wn===null||!wn.has(l))){e=oi(r,e),r=Ep(2),l=mn(n,r,2),l!==null&&(_p(r,l,n,e),da(l,2),Ci(l));break}}n=n.return}}function mu(e,n,r){var l=e.pingCache;if(l===null){l=e.pingCache=new a0;var p=new Set;l.set(n,p)}else p=l.get(n),p===void 0&&(p=new Set,l.set(n,p));p.has(r)||(lu=!0,p.add(r),e=u0.bind(null,e,n,r),n.then(e,e))}function u0(e,n,r){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Vt===e&&(Rt&r)===r&&(ie===4||ie===3&&(Rt&62914560)===Rt&&300>Ye()-Co?(Pt&2)===0&&js(e,0):cu|=r,Is===Rt&&(Is=0)),Ci(e)}function Eg(e,n){n===0&&(n=md()),e=qn(e,n),e!==null&&(da(e,n),Ci(e))}function h0(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Eg(e,r)}function d0(e,n){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(r=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),Eg(e,r)}function f0(e,n){return Ml(e,n)}var No=null,qs=null,yu=!1,ko=!1,vu=!1,Tn=0;function Ci(e){e!==qs&&e.next===null&&(qs===null?No=qs=e:qs=qs.next=e),ko=!0,yu||(yu=!0,g0())}function Ya(e,n){if(!vu&&ko){vu=!0;do for(var r=!1,l=No;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var m=0;else{var b=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-$e(42|e)+1)-1,m&=p&~(b&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,xg(l,m))}else m=Rt,m=zr(l,l===Vt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ha(l,m)||(r=!0,xg(l,m));l=l.next}while(r);vu=!1}}function p0(){_g()}function _g(){ko=yu=!1;var e=0;Tn!==0&&T0()&&(e=Tn);for(var n=Ye(),r=null,l=No;l!==null;){var p=l.next,m=Tg(l,n);m===0?(l.next=null,r===null?No=p:r.next=p,p===null&&(qs=r)):(r=l,(e!==0||(m&3)!==0)&&(ko=!0)),l=p}ge!==0&&ge!==5||Ya(e),Tn!==0&&(Tn=0)}function Tg(e,n){for(var r=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var b=31-$e(m),T=1<<b,M=p[b];M===-1?((T&r)===0||(T&l)!==0)&&(p[b]=Hv(T,n)):M<=n&&(e.expiredLanes|=T),m&=~T}if(n=Vt,r=Rt,r=zr(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===n&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Dl(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||ha(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(l!==null&&Dl(l),Nl(r)){case 2:case 8:r=pd;break;case 32:r=Nr;break;case 268435456:r=gd;break;default:r=Nr}return l=Cg.bind(null,e),r=Ml(r,l),e.callbackPriority=n,e.callbackNode=r,n}return l!==null&&l!==null&&Dl(l),e.callbackPriority=2,e.callbackNode=null,2}function Cg(e,n){if(ge!==0&&ge!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Oo()&&e.callbackNode!==r)return null;var l=Rt;return l=zr(e,e===Vt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(og(e,l,n),Tg(e,Ye()),e.callbackNode!=null&&e.callbackNode===r?Cg.bind(null,e):null)}function xg(e,n){if(Oo())return null;og(e,n,!0)}function g0(){x0(function(){(Pt&6)!==0?Ml(fd,p0):_g()})}function bu(){if(Tn===0){var e=Ms;e===0&&(e=kr,kr<<=1,(kr&261888)===0&&(kr=256)),Tn=e}return Tn}function Rg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hr(""+e)}function Mg(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function m0(e,n,r,l,p){if(n==="submit"&&r&&r.stateNode===p){var m=Rg((p[Pe]||null).action),b=l.submitter;b&&(n=(n=b[Pe]||null)?Rg(n.formAction):b.getAttribute("formAction"),n!==null&&(m=n,b=null));var T=new Vr("action","action",null,l,p);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Tn!==0){var M=b?Mg(p,b):new FormData(p);Uc(r,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(T.preventDefault(),M=b?Mg(p,b):new FormData(p),Uc(r,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var Au=0;Au<ic.length;Au++){var Su=ic[Au],y0=Su.toLowerCase(),v0=Su[0].toUpperCase()+Su.slice(1);vi(y0,"on"+v0)}vi(rf,"onAnimationEnd"),vi(of,"onAnimationIteration"),vi(lf,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(kb,"onTransitionRun"),vi(Bb,"onTransitionStart"),vi(Pb,"onTransitionCancel"),vi(cf,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xa));function Dg(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],p=l.event;l=l.listeners;t:{var m=void 0;if(n)for(var b=l.length-1;0<=b;b--){var T=l[b],M=T.instance,I=T.currentTarget;if(T=T.listener,M!==m&&p.isPropagationStopped())break t;m=T,p.currentTarget=I;try{m(p)}catch(W){$r(W)}p.currentTarget=null,m=M}else for(b=0;b<l.length;b++){if(T=l[b],M=T.instance,I=T.currentTarget,T=T.listener,M!==m&&p.isPropagationStopped())break t;m=T,p.currentTarget=I;try{m(p)}catch(W){$r(W)}p.currentTarget=null,m=M}}}}function xt(e,n){var r=n[kl];r===void 0&&(r=n[kl]=new Set);var l=e+"__bubble";r.has(l)||(Lg(n,e,2,!1),r.add(l))}function wu(e,n,r){var l=0;n&&(l|=4),Lg(r,e,l,n)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[Bo]){e[Bo]=!0,Ed.forEach(function(r){r!=="selectionchange"&&(b0.has(r)||wu(r,!1,e),wu(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Bo]||(n[Bo]=!0,wu("selectionchange",!1,n))}}function Lg(e,n,r,l){switch(rm(n)){case 2:var p=X0;break;case 8:p=$0;break;default:p=Fu}r=p.bind(null,n,r,e),p=void 0,!Gl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(n,r,{capture:!0,passive:p}):e.addEventListener(n,r,!0):p!==void 0?e.addEventListener(n,r,{passive:p}):e.addEventListener(n,r,!1)}function _u(e,n,r,l,p){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===p)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;T!==null;){if(b=ds(T),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=m=b;continue t}T=T.parentNode}}l=l.return}Bd(function(){var I=m,W=Hl(r),Z=[];t:{var H=uf.get(e);if(H!==void 0){var G=Vr,ot=e;switch(e){case"keypress":if(Gr(r)===0)break t;case"keydown":case"keyup":G=db;break;case"focusin":ot="focus",G=Xl;break;case"focusout":ot="blur",G=Xl;break;case"beforeblur":case"afterblur":G=Xl;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=tb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=gb;break;case rf:case of:case lf:G=nb;break;case cf:G=yb;break;case"scroll":case"scrollend":G=Zv;break;case"wheel":G=bb;break;case"copy":case"cut":case"paste":G=ab;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Id;break;case"toggle":case"beforetoggle":G=Sb}var gt=(n&4)!==0,Gt=!gt&&(e==="scroll"||e==="scrollend"),P=gt?H!==null?H+"Capture":null:H;gt=[];for(var L=I,U;L!==null;){var Q=L;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||P===null||(Q=ga(L,P),Q!=null&&gt.push($a(L,Q,U))),Gt)break;L=L.return}0<gt.length&&(H=new G(H,ot,null,r,W),Z.push({event:H,listeners:gt}))}}if((n&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",H&&r!==Il&&(ot=r.relatedTarget||r.fromElement)&&(ds(ot)||ot[hs]))break t;if((G||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,G?(ot=r.relatedTarget||r.toElement,G=I,ot=ot?ds(ot):null,ot!==null&&(Gt=o(ot),gt=ot.tag,ot!==Gt||gt!==5&&gt!==27&&gt!==6)&&(ot=null)):(G=null,ot=I),G!==ot)){if(gt=Fd,Q="onMouseLeave",P="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Id,Q="onPointerLeave",P="onPointerEnter",L="pointer"),Gt=G==null?H:pa(G),U=ot==null?H:pa(ot),H=new gt(Q,L+"leave",G,r,W),H.target=Gt,H.relatedTarget=U,Q=null,ds(W)===I&&(gt=new gt(P,L+"enter",ot,r,W),gt.target=U,gt.relatedTarget=Gt,Q=gt),Gt=Q,G&&ot)e:{for(gt=A0,P=G,L=ot,U=0,Q=P;Q;Q=gt(Q))U++;Q=0;for(var ht=L;ht;ht=gt(ht))Q++;for(;0<U-Q;)P=gt(P),U--;for(;0<Q-U;)L=gt(L),Q--;for(;U--;){if(P===L||L!==null&&P===L.alternate){gt=P;break e}P=gt(P),L=gt(L)}gt=null}else gt=null;G!==null&&Og(Z,H,G,gt,!1),ot!==null&&Gt!==null&&Og(Z,Gt,ot,gt,!0)}}t:{if(H=I?pa(I):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var kt=$d;else if(Yd(H))if(Kd)kt=Lb;else{kt=Mb;var ut=Rb}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?I&&Ul(I.elementType)&&(kt=$d):kt=Db;if(kt&&(kt=kt(e,I))){Xd(Z,kt,r,W);break t}ut&&ut(e,H,I),e==="focusout"&&I&&H.type==="number"&&I.memoizedProps.value!=null&&Fl(H,"number",H.value)}switch(ut=I?pa(I):window,e){case"focusin":(Yd(ut)||ut.contentEditable==="true")&&(Ss=ut,Jl=I,Ea=null);break;case"focusout":Ea=Jl=Ss=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,sf(Z,r,W);break;case"selectionchange":if(Nb)break;case"keydown":case"keyup":sf(Z,r,W)}var _t;if(Kl)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else As?qd(e,r)&&(Mt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Mt="onCompositionStart");Mt&&(Hd&&r.locale!=="ko"&&(As||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&As&&(_t=Pd()):(cn=W,ql="value"in cn?cn.value:cn.textContent,As=!0)),ut=Po(I,Mt),0<ut.length&&(Mt=new Ud(Mt,e,null,r,W),Z.push({event:Mt,listeners:ut}),_t?Mt.data=_t:(_t=Vd(r),_t!==null&&(Mt.data=_t)))),(_t=Eb?_b(e,r):Tb(e,r))&&(Mt=Po(I,"onBeforeInput"),0<Mt.length&&(ut=new Ud("onBeforeInput","beforeinput",null,r,W),Z.push({event:ut,listeners:Mt}),ut.data=_t)),m0(Z,e,I,r,W)}Dg(Z,n)})}function $a(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Po(e,n){for(var r=n+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=ga(e,r),p!=null&&l.unshift($a(e,p,m)),p=ga(e,n),p!=null&&l.push($a(e,p,m))),e.tag===3)return l;e=e.return}return[]}function A0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Og(e,n,r,l,p){for(var m=n._reactName,b=[];r!==null&&r!==l;){var T=r,M=T.alternate,I=T.stateNode;if(T=T.tag,M!==null&&M===l)break;T!==5&&T!==26&&T!==27||I===null||(M=I,p?(I=ga(r,m),I!=null&&b.unshift($a(r,I,M))):p||(I=ga(r,m),I!=null&&b.push($a(r,I,M)))),r=r.return}b.length!==0&&e.push({event:n,listeners:b})}var S0=/\r\n?/g,w0=/\u0000|\uFFFD/g;function Ng(e){return(typeof e=="string"?e:""+e).replace(S0,`
`).replace(w0,"")}function kg(e,n){return n=Ng(n),Ng(e)===n}function jt(e,n,r,l,p,m){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||ys(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&ys(e,""+l);break;case"className":Ur(e,"class",l);break;case"tabIndex":Ur(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ur(e,r,l);break;case"style":Nd(e,l,m);break;case"data":if(n!=="object"){Ur(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Hr(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&jt(e,n,"name",p.name,p,null),jt(e,n,"formEncType",p.formEncType,p,null),jt(e,n,"formMethod",p.formMethod,p,null),jt(e,n,"formTarget",p.formTarget,p,null)):(jt(e,n,"encType",p.encType,p,null),jt(e,n,"method",p.method,p,null),jt(e,n,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Hr(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Pi);break;case"onScroll":l!=null&&xt("scroll",e);break;case"onScrollEnd":l!=null&&xt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Hr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":xt("beforetoggle",e),xt("toggle",e),Fr(e,"popover",l);break;case"xlinkActuate":Bi(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Bi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Bi(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Bi(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Bi(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Bi(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Bi(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Bi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Bi(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Wv.get(r)||r,Fr(e,r,l))}}function Tu(e,n,r,l,p,m){switch(r){case"style":Nd(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof l=="string"?ys(e,l):(typeof l=="number"||typeof l=="bigint")&&ys(e,""+l);break;case"onScroll":l!=null&&xt("scroll",e);break;case"onScrollEnd":l!=null&&xt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_d.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),n=r.slice(2,p?r.length-7:void 0),m=e[Pe]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(n,m,p),typeof l=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,l,p);break t}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Fr(e,r,l)}}}function Te(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",e),xt("load",e);var l=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var b=r[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:jt(e,n,m,b,r,null)}}p&&jt(e,n,"srcSet",r.srcSet,r,null),l&&jt(e,n,"src",r.src,r,null);return;case"input":xt("invalid",e);var T=m=b=p=null,M=null,I=null;for(l in r)if(r.hasOwnProperty(l)){var W=r[l];if(W!=null)switch(l){case"name":p=W;break;case"type":b=W;break;case"checked":M=W;break;case"defaultChecked":I=W;break;case"value":m=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,n));break;default:jt(e,n,l,W,r,null)}}Md(e,m,T,M,I,b,p,!1);return;case"select":xt("invalid",e),l=b=m=null;for(p in r)if(r.hasOwnProperty(p)&&(T=r[p],T!=null))switch(p){case"value":m=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:jt(e,n,p,T,r,null)}n=m,r=b,e.multiple=!!l,n!=null?ms(e,!!l,n,!1):r!=null&&ms(e,!!l,r,!0);return;case"textarea":xt("invalid",e),m=p=l=null;for(b in r)if(r.hasOwnProperty(b)&&(T=r[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":p=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:jt(e,n,b,T,r,null)}Ld(e,l,p,m);return;case"option":for(M in r)if(r.hasOwnProperty(M)&&(l=r[M],l!=null))switch(M){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:jt(e,n,M,l,r,null)}return;case"dialog":xt("beforetoggle",e),xt("toggle",e),xt("cancel",e),xt("close",e);break;case"iframe":case"object":xt("load",e);break;case"video":case"audio":for(l=0;l<Xa.length;l++)xt(Xa[l],e);break;case"image":xt("error",e),xt("load",e);break;case"details":xt("toggle",e);break;case"embed":case"source":case"link":xt("error",e),xt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in r)if(r.hasOwnProperty(I)&&(l=r[I],l!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:jt(e,n,I,l,r,null)}return;default:if(Ul(n)){for(W in r)r.hasOwnProperty(W)&&(l=r[W],l!==void 0&&Tu(e,n,W,l,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(l=r[T],l!=null&&jt(e,n,T,l,r,null))}function E0(e,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,b=null,T=null,M=null,I=null,W=null;for(G in r){var Z=r[G];if(r.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=Z;default:l.hasOwnProperty(G)||jt(e,n,G,null,l,Z)}}for(var H in l){var G=l[H];if(Z=r[H],l.hasOwnProperty(H)&&(G!=null||Z!=null))switch(H){case"type":m=G;break;case"name":p=G;break;case"checked":I=G;break;case"defaultChecked":W=G;break;case"value":b=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==Z&&jt(e,n,H,G,l,Z)}}zl(e,b,T,M,I,W,m,p);return;case"select":G=b=T=H=null;for(m in r)if(M=r[m],r.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":G=M;default:l.hasOwnProperty(m)||jt(e,n,m,null,l,M)}for(p in l)if(m=l[p],M=r[p],l.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":H=m;break;case"defaultValue":T=m;break;case"multiple":b=m;default:m!==M&&jt(e,n,p,m,l,M)}n=T,r=b,l=G,H!=null?ms(e,!!r,H,!1):!!l!=!!r&&(n!=null?ms(e,!!r,n,!0):ms(e,!!r,r?[]:"",!1));return;case"textarea":G=H=null;for(T in r)if(p=r[T],r.hasOwnProperty(T)&&p!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:jt(e,n,T,null,l,p)}for(b in l)if(p=l[b],m=r[b],l.hasOwnProperty(b)&&(p!=null||m!=null))switch(b){case"value":H=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&jt(e,n,b,p,l,m)}Dd(e,H,G);return;case"option":for(var ot in r)if(H=r[ot],r.hasOwnProperty(ot)&&H!=null&&!l.hasOwnProperty(ot))switch(ot){case"selected":e.selected=!1;break;default:jt(e,n,ot,null,l,H)}for(M in l)if(H=l[M],G=r[M],l.hasOwnProperty(M)&&H!==G&&(H!=null||G!=null))switch(M){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:jt(e,n,M,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)H=r[gt],r.hasOwnProperty(gt)&&H!=null&&!l.hasOwnProperty(gt)&&jt(e,n,gt,null,l,H);for(I in l)if(H=l[I],G=r[I],l.hasOwnProperty(I)&&H!==G&&(H!=null||G!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:jt(e,n,I,H,l,G)}return;default:if(Ul(n)){for(var Gt in r)H=r[Gt],r.hasOwnProperty(Gt)&&H!==void 0&&!l.hasOwnProperty(Gt)&&Tu(e,n,Gt,void 0,l,H);for(W in l)H=l[W],G=r[W],!l.hasOwnProperty(W)||H===G||H===void 0&&G===void 0||Tu(e,n,W,H,l,G);return}}for(var P in r)H=r[P],r.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&jt(e,n,P,null,l,H);for(Z in l)H=l[Z],G=r[Z],!l.hasOwnProperty(Z)||H===G||H==null&&G==null||jt(e,n,Z,H,l,G)}function Bg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var p=r[l],m=p.transferSize,b=p.initiatorType,T=p.duration;if(m&&T&&Bg(b)){for(b=0,T=p.responseEnd,l+=1;l<r.length;l++){var M=r[l],I=M.startTime;if(I>T)break;var W=M.transferSize,Z=M.initiatorType;W&&Bg(Z)&&(M=M.responseEnd,b+=W*(M<T?1:(T-I)/(M-I)))}if(--l,n+=8*(m+b)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cu=null,xu=null;function zo(e){return e.nodeType===9?e:e.ownerDocument}function Pg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ru(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mu=null;function T0(){var e=window.event;return e&&e.type==="popstate"?e===Mu?!1:(Mu=e,!0):(Mu=null,!1)}var Fg=typeof setTimeout=="function"?setTimeout:void 0,C0=typeof clearTimeout=="function"?clearTimeout:void 0,Ug=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ug<"u"?function(e){return Ug.resolve(null).then(e).catch(R0)}:Fg;function R0(e){setTimeout(function(){throw e})}function Cn(e){return e==="head"}function Ig(e,n){var r=n,l=0;do{var p=r.nextSibling;if(e.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(p),$s(n);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Ka(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Ka(r);for(var m=r.firstChild;m;){var b=m.nextSibling,T=m.nodeName;m[fa]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=b}}else r==="body"&&Ka(e.ownerDocument.body);r=p}while(r);$s(n)}function Hg(e,n){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function Du(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Du(r),Bl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function M0(e,n,r,l){for(;e.nodeType===1;){var p=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[fa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=di(e.nextSibling),e===null)break}return null}function D0(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=di(e.nextSibling),e===null))return null;return e}function jg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=di(e.nextSibling),e===null))return null;return e}function Lu(e){return e.data==="$?"||e.data==="$~"}function Ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function L0(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function di(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Nu=null;function Gg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return di(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function qg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function Vg(e,n,r){switch(n=zo(r),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ka(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Bl(e)}var fi=new Map,Yg=new Set;function Fo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zi=$.d;$.d={f:O0,r:N0,D:k0,C:B0,L:P0,m:z0,X:U0,S:F0,M:I0};function O0(){var e=Zi.f(),n=Mo();return e||n}function N0(e){var n=fs(e);n!==null&&n.tag===5&&n.type==="form"?cp(n):Zi.r(e)}var Vs=typeof document>"u"?null:document;function Xg(e,n,r){var l=Vs;if(l&&typeof n=="string"&&n){var p=ai(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Yg.has(p)||(Yg.add(p),e={rel:e,crossOrigin:r,href:n},l.querySelector(p)===null&&(n=l.createElement("link"),Te(n,"link",e),ye(n),l.head.appendChild(n)))}}function k0(e){Zi.D(e),Xg("dns-prefetch",e,null)}function B0(e,n){Zi.C(e,n),Xg("preconnect",e,n)}function P0(e,n,r){Zi.L(e,n,r);var l=Vs;if(l&&e&&n){var p='link[rel="preload"][as="'+ai(n)+'"]';n==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+ai(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+ai(r.imageSizes)+'"]')):p+='[href="'+ai(e)+'"]';var m=p;switch(n){case"style":m=Ys(e);break;case"script":m=Xs(e)}fi.has(m)||(e=y({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),fi.set(m,e),l.querySelector(p)!==null||n==="style"&&l.querySelector(Wa(m))||n==="script"&&l.querySelector(Qa(m))||(n=l.createElement("link"),Te(n,"link",e),ye(n),l.head.appendChild(n)))}}function z0(e,n){Zi.m(e,n);var r=Vs;if(r&&e){var l=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ai(l)+'"][href="'+ai(e)+'"]',m=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xs(e)}if(!fi.has(m)&&(e=y({rel:"modulepreload",href:e},n),fi.set(m,e),r.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Qa(m)))return}l=r.createElement("link"),Te(l,"link",e),ye(l),r.head.appendChild(l)}}}function F0(e,n,r){Zi.S(e,n,r);var l=Vs;if(l&&e){var p=ps(l).hoistableStyles,m=Ys(e);n=n||"default";var b=p.get(m);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(Wa(m)))T.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},r),(r=fi.get(m))&&ku(e,r);var M=b=l.createElement("link");ye(M),Te(M,"link",e),M._p=new Promise(function(I,W){M.onload=I,M.onerror=W}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Uo(b,n,l)}b={type:"stylesheet",instance:b,count:1,state:T},p.set(m,b)}}}function U0(e,n){Zi.X(e,n);var r=Vs;if(r&&e){var l=ps(r).hoistableScripts,p=Xs(e),m=l.get(p);m||(m=r.querySelector(Qa(p)),m||(e=y({src:e,async:!0},n),(n=fi.get(p))&&Bu(e,n),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function I0(e,n){Zi.M(e,n);var r=Vs;if(r&&e){var l=ps(r).hoistableScripts,p=Xs(e),m=l.get(p);m||(m=r.querySelector(Qa(p)),m||(e=y({src:e,async:!0,type:"module"},n),(n=fi.get(p))&&Bu(e,n),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function $g(e,n,r,l){var p=(p=ct.current)?Fo(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Ys(r.href),r=ps(p).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Ys(r.href);var m=ps(p).hoistableStyles,b=m.get(e);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,b),(m=p.querySelector(Wa(e)))&&!m._p&&(b.instance=m,b.state.loading=5),fi.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},fi.set(e,r),m||H0(p,e,r,b.state))),n&&l===null)throw Error(s(528,""));return b}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Xs(r),r=ps(p).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ys(e){return'href="'+ai(e)+'"'}function Wa(e){return'link[rel="stylesheet"]['+e+"]"}function Kg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function H0(e,n,r,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Te(n,"link",r),ye(n),e.head.appendChild(n))}function Xs(e){return'[src="'+ai(e)+'"]'}function Qa(e){return"script[async]"+e}function Wg(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+ai(r.href)+'"]');if(l)return n.instance=l,ye(l),l;var p=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ye(l),Te(l,"style",p),Uo(l,r.precedence,e),n.instance=l;case"stylesheet":p=Ys(r.href);var m=e.querySelector(Wa(p));if(m)return n.state.loading|=4,n.instance=m,ye(m),m;l=Kg(r),(p=fi.get(p))&&ku(l,p),m=(e.ownerDocument||e).createElement("link"),ye(m);var b=m;return b._p=new Promise(function(T,M){b.onload=T,b.onerror=M}),Te(m,"link",l),n.state.loading|=4,Uo(m,r.precedence,e),n.instance=m;case"script":return m=Xs(r.src),(p=e.querySelector(Qa(m)))?(n.instance=p,ye(p),p):(l=r,(p=fi.get(m))&&(l=y({},r),Bu(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),ye(p),Te(p,"link",l),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uo(l,r.precedence,e));return n.instance}function Uo(e,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,m=p,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===n)m=T;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function ku(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Bu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Io=null;function Qg(e,n,r){if(Io===null){var l=new Map,p=Io=new Map;p.set(r,l)}else p=Io,l=p.get(r),l||(l=new Map,p.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),p=0;p<r.length;p++){var m=r[p];if(!(m[fa]||m[Se]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(n)||"";b=e+b;var T=l.get(b);T?T.push(m):l.set(b,[m])}}return l}function Zg(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function j0(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function G0(e,n,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Ys(l.href),m=n.querySelector(Wa(p));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Ho.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=m,ye(m);return}m=n.ownerDocument||n,l=Kg(l),(p=fi.get(p))&&ku(l,p),m=m.createElement("link"),ye(m);var b=m;b._p=new Promise(function(T,M){b.onload=T,b.onerror=M}),Te(m,"link",l),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Ho.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var Pu=0;function q0(e,n){return e.stylesheets&&e.count===0&&Go(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Go(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Pu===0&&(Pu=62500*_0());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Go(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Pu?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function Ho(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Go(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jo=null;function Go(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jo=new Map,n.forEach(V0,e),jo=null,Ho.call(e))}function V0(e,n){if(!(n.state.loading&4)){var r=jo.get(e);if(r)var l=r.get(null);else{r=new Map,jo.set(e,r);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var b=p[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),l=b)}l&&r.set(null,l)}p=n.instance,b=p.getAttribute("data-precedence"),m=r.get(b)||l,m===l&&r.set(null,p),r.set(b,p),this.count++,l=Ho.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Za={$$typeof:C,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function Y0(e,n,r,l,p,m,b,T,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.hiddenUpdates=Ll(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function tm(e,n,r,l,p,m,b,T,M,I,W,Z){return e=new Y0(e,n,r,b,M,I,W,Z,T),n=1,m===!0&&(n|=24),m=We(3,null,null,n),e.current=m,m.stateNode=e,n=gc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:r,cache:n},bc(m),e}function em(e){return e?(e=_s,e):_s}function im(e,n,r,l,p,m){p=em(p),l.context===null?l.context=p:l.pendingContext=p,l=gn(n),l.payload={element:r},m=m===void 0?null:m,m!==null&&(l.callback=m),r=mn(e,l,n),r!==null&&(je(r,e,n),Da(r,e,n))}function nm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function zu(e,n){nm(e,n),(e=e.alternate)&&nm(e,n)}function sm(e){if(e.tag===13||e.tag===31){var n=qn(e,67108864);n!==null&&je(n,e,67108864),zu(e,67108864)}}function am(e){if(e.tag===13||e.tag===31){var n=ei();n=Ol(n);var r=qn(e,n);r!==null&&je(r,e,n),zu(e,n)}}var qo=!0;function X0(e,n,r,l){var p=B.T;B.T=null;var m=$.p;try{$.p=2,Fu(e,n,r,l)}finally{$.p=m,B.T=p}}function $0(e,n,r,l){var p=B.T;B.T=null;var m=$.p;try{$.p=8,Fu(e,n,r,l)}finally{$.p=m,B.T=p}}function Fu(e,n,r,l){if(qo){var p=Uu(l);if(p===null)_u(e,n,l,Vo,r),om(e,l);else if(W0(p,e,n,r,l))l.stopPropagation();else if(om(e,l),n&4&&-1<K0.indexOf(e)){for(;p!==null;){var m=fs(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Un(m.pendingLanes);if(b!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var M=1<<31-$e(b);T.entanglements[1]|=M,b&=~M}Ci(m),(Pt&6)===0&&(xo=Ye()+500,Ya(0))}}break;case 31:case 13:T=qn(m,2),T!==null&&je(T,m,2),Mo(),zu(m,2)}if(m=Uu(l),m===null&&_u(e,n,l,Vo,r),m===p)break;p=m}p!==null&&l.stopPropagation()}else _u(e,n,l,null,r)}}function Uu(e){return e=Hl(e),Iu(e)}var Vo=null;function Iu(e){if(Vo=null,e=ds(e),e!==null){var n=o(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=c(n),e!==null)return e;e=null}else if(r===31){if(e=u(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Vo=e,null}function rm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kv()){case fd:return 2;case pd:return 8;case Nr:case Bv:return 32;case gd:return 268435456;default:return 32}default:return 32}}var Hu=!1,xn=null,Rn=null,Mn=null,Ja=new Map,tr=new Map,Dn=[],K0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function om(e,n){switch(e){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Ja.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(n.pointerId)}}function er(e,n,r,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},n!==null&&(n=fs(n),n!==null&&sm(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function W0(e,n,r,l,p){switch(n){case"focusin":return xn=er(xn,e,n,r,l,p),!0;case"dragenter":return Rn=er(Rn,e,n,r,l,p),!0;case"mouseover":return Mn=er(Mn,e,n,r,l,p),!0;case"pointerover":var m=p.pointerId;return Ja.set(m,er(Ja.get(m)||null,e,n,r,l,p)),!0;case"gotpointercapture":return m=p.pointerId,tr.set(m,er(tr.get(m)||null,e,n,r,l,p)),!0}return!1}function lm(e){var n=ds(e.target);if(n!==null){var r=o(n);if(r!==null){if(n=r.tag,n===13){if(n=c(r),n!==null){e.blockedOn=n,Sd(e.priority,function(){am(r)});return}}else if(n===31){if(n=u(r),n!==null){e.blockedOn=n,Sd(e.priority,function(){am(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Uu(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Il=l,r.target.dispatchEvent(l),Il=null}else return n=fs(r),n!==null&&sm(n),e.blockedOn=r,!1;n.shift()}return!0}function cm(e,n,r){Yo(e)&&r.delete(n)}function Q0(){Hu=!1,xn!==null&&Yo(xn)&&(xn=null),Rn!==null&&Yo(Rn)&&(Rn=null),Mn!==null&&Yo(Mn)&&(Mn=null),Ja.forEach(cm),tr.forEach(cm)}function Xo(e,n){e.blockedOn===n&&(e.blockedOn=null,Hu||(Hu=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Q0)))}var $o=null;function um(e){$o!==e&&($o=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){$o===e&&($o=null);for(var n=0;n<e.length;n+=3){var r=e[n],l=e[n+1],p=e[n+2];if(typeof l!="function"){if(Iu(l||r)===null)continue;break}var m=fs(r);m!==null&&(e.splice(n,3),n-=3,Uc(m,{pending:!0,data:p,method:r.method,action:l},l,p))}}))}function $s(e){function n(M){return Xo(M,e)}xn!==null&&Xo(xn,e),Rn!==null&&Xo(Rn,e),Mn!==null&&Xo(Mn,e),Ja.forEach(n),tr.forEach(n);for(var r=0;r<Dn.length;r++){var l=Dn[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Dn.length&&(r=Dn[0],r.blockedOn===null);)lm(r),r.blockedOn===null&&Dn.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var p=r[l],m=r[l+1],b=p[Pe]||null;if(typeof m=="function")b||um(r);else if(b){var T=null;if(m&&m.hasAttribute("formAction")){if(p=m,b=m[Pe]||null)T=b.formAction;else if(Iu(p)!==null)continue}else T=b.action;typeof T=="function"?r[l+1]=T:(r.splice(l,3),l-=3),um(r)}}}function hm(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function ju(e){this._internalRoot=e}Ko.prototype.render=ju.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,l=ei();im(r,l,e,n,null,null)},Ko.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;im(e.current,2,null,e,null,null),Mo(),n[hs]=null}};function Ko(e){this._internalRoot=e}Ko.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ad();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Dn.length&&n!==0&&n<Dn[r].priority;r++);Dn.splice(r,0,e),r===0&&lm(e)}};var dm=t.version;if(dm!=="19.2.0")throw Error(s(527,dm,"19.2.0"));$.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Z0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{ua=Wo.inject(Z0),Xe=Wo}catch{}}return nr.createRoot=function(e,n){if(!a(e))throw Error(s(299));var r=!1,l="",p=bp,m=Ap,b=Sp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=tm(e,1,!1,null,null,r,l,null,p,m,b,hm),e[hs]=n.current,Eu(e),new ju(n)},nr.hydrateRoot=function(e,n,r){if(!a(e))throw Error(s(299));var l=!1,p="",m=bp,b=Ap,T=Sp,M=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),n=tm(e,1,!0,n,r??null,l,p,M,m,b,T,hm),n.context=em(null),r=n.current,l=ei(),l=Ol(l),p=gn(l),p.callback=null,mn(r,p,l),r=l,n.current.lanes=r,da(n,r),Ci(n),e[hs]=n.current,Eu(e),new Ko(n)},nr.version="19.2.0",nr}var _m;function cA(){if(_m)return Yu.exports;_m=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Yu.exports=lA(),Yu.exports}var uA=cA();var Tm="popstate";function hA(h={}){function t(s,a){let{pathname:o,search:c,hash:u}=s.location;return xh("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function i(s,a){return typeof a=="string"?a:gr(a)}return fA(t,i,null,h)}function Jt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function wi(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dA(){return Math.random().toString(36).substring(2,10)}function Cm(h,t){return{usr:h.state,key:h.key,idx:t}}function xh(h,t,i=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?la(t):t,state:i,key:t&&t.key||s||dA()}}function gr({pathname:h="/",search:t="",hash:i=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(h+=i.charAt(0)==="#"?i:"#"+i),h}function la(h){let t={};if(h){let i=h.indexOf("#");i>=0&&(t.hash=h.substring(i),h=h.substring(0,i));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function fA(h,t,i,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let _=g(),E=_==null?null:_-f;f=_,d&&d({action:u,location:S.location,delta:E})}function v(_,E){u="PUSH";let R=xh(S.location,_,E);f=g()+1;let C=Cm(R,f),O=S.createHref(R);try{c.pushState(C,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(O)}o&&d&&d({action:u,location:S.location,delta:1})}function A(_,E){u="REPLACE";let R=xh(S.location,_,E);f=g();let C=Cm(R,f),O=S.createHref(R);c.replaceState(C,"",O),o&&d&&d({action:u,location:S.location,delta:0})}function w(_){return pA(_)}let S={get action(){return u},get location(){return h(a,c)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Tm,y),d=_,()=>{a.removeEventListener(Tm,y),d=null}},createHref(_){return t(a,_)},createURL:w,encodeLocation(_){let E=w(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:A,go(_){return c.go(_)}};return S}function pA(h,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(i,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:gr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function xy(h,t,i="/"){return gA(h,t,i,!1)}function gA(h,t,i,s){let a=typeof t=="string"?la(t):t,o=an(a.pathname||"/",i);if(o==null)return null;let c=Ry(h);mA(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=xA(o);u=TA(c[d],f,s)}return u}function Ry(h,t=[],i=[],s="",a=!1){let o=(c,u,d=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;Jt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=sn([s,g.relativePath]),v=i.concat(g);c.children&&c.children.length>0&&(Jt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ry(c.children,t,v,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:EA(y,c.index),routesMeta:v})};return h.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of My(c.path))o(c,u,!0,d)}),t}function My(h){let t=h.split("/");if(t.length===0)return[];let[i,...s]=t,a=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=My(s.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...c),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function mA(h){h.sort((t,i)=>t.score!==i.score?i.score-t.score:_A(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var yA=/^:[\w-]+$/,vA=3,bA=2,AA=1,SA=10,wA=-2,xm=h=>h==="*";function EA(h,t){let i=h.split("/"),s=i.length;return i.some(xm)&&(s+=wA),t&&(s+=bA),i.filter(a=>!xm(a)).reduce((a,o)=>a+(yA.test(o)?vA:o===""?AA:SA),s)}function _A(h,t){return h.length===t.length&&h.slice(0,-1).every((s,a)=>s===t[a])?h[h.length-1]-t[t.length-1]:0}function TA(h,t,i=!1){let{routesMeta:s}=h,a={},o="/",c=[];for(let u=0;u<s.length;++u){let d=s[u],f=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=fl({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&i&&!s[s.length-1].route.index&&(y=fl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:sn([o,y.pathname]),pathnameBase:OA(sn([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=sn([o,y.pathnameBase]))}return c}function fl(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[i,s]=CA(h.path,h.caseSensitive,h.end),a=t.match(i);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let w=u[v]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const A=u[v];return y&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:h}}function CA(h,t=!1,i=!0){wi(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function xA(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wi(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function an(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=h.charAt(i);return s&&s!=="/"?null:h.slice(i)||"/"}var RA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MA=h=>RA.test(h);function DA(h,t="/"){let{pathname:i,search:s="",hash:a=""}=typeof h=="string"?la(h):h,o;if(i)if(MA(i))o=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),wi(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?o=Rm(i.substring(1),"/"):o=Rm(i,t)}else o=t;return{pathname:o,search:NA(s),hash:kA(a)}}function Rm(h,t){let i=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?i.length>1&&i.pop():a!=="."&&i.push(a)}),i.length>1?i.join("/"):"/"}function Wu(h,t,i,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LA(h){return h.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Dy(h){let t=LA(h);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function Ly(h,t,i,s=!1){let a;typeof h=="string"?a=la(h):(a={...h},Jt(!a.pathname||!a.pathname.includes("?"),Wu("?","pathname","search",a)),Jt(!a.pathname||!a.pathname.includes("#"),Wu("#","pathname","hash",a)),Jt(!a.search||!a.search.includes("#"),Wu("#","search","hash",a)));let o=h===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=i;else{let y=t.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;a.pathname=v.join("/")}u=y>=0?t[y]:"/"}let d=DA(a,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&i.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var sn=h=>h.join("/").replace(/\/\/+/g,"/"),OA=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),NA=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,kA=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function BA(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Oy=["POST","PUT","PATCH","DELETE"];new Set(Oy);var PA=["GET",...Oy];new Set(PA);var ca=K.createContext(null);ca.displayName="DataRouter";var vl=K.createContext(null);vl.displayName="DataRouterState";K.createContext(!1);var Ny=K.createContext({isTransitioning:!1});Ny.displayName="ViewTransition";var zA=K.createContext(new Map);zA.displayName="Fetchers";var FA=K.createContext(null);FA.displayName="Await";var ki=K.createContext(null);ki.displayName="Navigation";var wr=K.createContext(null);wr.displayName="Location";var rn=K.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var qh=K.createContext(null);qh.displayName="RouteError";function UA(h,{relative:t}={}){Jt(Er(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=K.useContext(ki),{hash:a,pathname:o,search:c}=_r(h,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:sn([i,o])),s.createHref({pathname:u,search:c,hash:a})}function Er(){return K.useContext(wr)!=null}function zn(){return Jt(Er(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(wr).location}var ky="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function By(h){K.useContext(ki).static||K.useLayoutEffect(h)}function IA(){let{isDataRoute:h}=K.useContext(rn);return h?JA():HA()}function HA(){Jt(Er(),"useNavigate() may be used only in the context of a <Router> component.");let h=K.useContext(ca),{basename:t,navigator:i}=K.useContext(ki),{matches:s}=K.useContext(rn),{pathname:a}=zn(),o=JSON.stringify(Dy(s)),c=K.useRef(!1);return By(()=>{c.current=!0}),K.useCallback((d,f={})=>{if(wi(c.current,ky),!c.current)return;if(typeof d=="number"){i.go(d);return}let g=Ly(d,JSON.parse(o),a,f.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:sn([t,g.pathname])),(f.replace?i.replace:i.push)(g,f.state,f)},[t,i,o,a,h])}K.createContext(null);function _r(h,{relative:t}={}){let{matches:i}=K.useContext(rn),{pathname:s}=zn(),a=JSON.stringify(Dy(i));return K.useMemo(()=>Ly(h,JSON.parse(a),s,t==="path"),[h,a,s,t])}function jA(h,t){return Py(h,t)}function Py(h,t,i,s,a){Jt(Er(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=K.useContext(ki),{matches:c}=K.useContext(rn),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let R=y&&y.path||"";zy(f,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=zn(),A;if(t){let R=typeof t=="string"?la(t):t;Jt(g==="/"||R.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${R.pathname}" was given in the \`location\` prop.`),A=R}else A=v;let w=A.pathname||"/",S=w;if(g!=="/"){let R=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=xy(h,{pathname:S});wi(y||_!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),wi(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=XA(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:sn([g,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:sn([g,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,i,s,a);return t&&E?K.createElement(wr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},E):E}function GA(){let h=ZA(),t=BA(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),i=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",h),c=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:o},"ErrorBoundary")," or"," ",K.createElement("code",{style:o},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),i?K.createElement("pre",{style:a},i):null,c)}var qA=K.createElement(GA,null),VA=class extends K.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.onError?this.props.onError(h,t):console.error("React Router caught the following error during render",h)}render(){return this.state.error!==void 0?K.createElement(rn.Provider,{value:this.props.routeContext},K.createElement(qh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YA({routeContext:h,match:t,children:i}){let s=K.useContext(ca);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(rn.Provider,{value:h},i)}function XA(h,t=[],i=null,s=null,a=null){if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let o=h,c=i?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Jt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(i)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:A}=i,w=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=i&&s?(g,y)=>{s(g,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let A,w=!1,S=null,_=null;i&&(A=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||qA,u&&(d<0&&v===0?(zy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):d===v&&(w=!0,_=y.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,v+1)),R=()=>{let C;return A?C=S:w?C=_:y.route.Component?C=K.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,K.createElement(YA,{match:y,routeContext:{outlet:g,matches:E,isDataRoute:i!=null},children:C})};return i&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?K.createElement(VA,{location:i.location,revalidation:i.revalidation,component:S,error:A,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):R()},null)}function Vh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $A(h){let t=K.useContext(ca);return Jt(t,Vh(h)),t}function KA(h){let t=K.useContext(vl);return Jt(t,Vh(h)),t}function WA(h){let t=K.useContext(rn);return Jt(t,Vh(h)),t}function Yh(h){let t=WA(h),i=t.matches[t.matches.length-1];return Jt(i.route.id,`${h} can only be used on routes that contain a unique "id"`),i.route.id}function QA(){return Yh("useRouteId")}function ZA(){let h=K.useContext(qh),t=KA("useRouteError"),i=Yh("useRouteError");return h!==void 0?h:t.errors?.[i]}function JA(){let{router:h}=$A("useNavigate"),t=Yh("useNavigate"),i=K.useRef(!1);return By(()=>{i.current=!0}),K.useCallback(async(a,o={})=>{wi(i.current,ky),i.current&&(typeof a=="number"?h.navigate(a):await h.navigate(a,{fromRouteId:t,...o}))},[h,t])}var Mm={};function zy(h,t,i){!t&&!Mm[h]&&(Mm[h]=!0,wi(!1,i))}K.memo(tS);function tS({routes:h,future:t,state:i,unstable_onError:s}){return Py(h,void 0,i,s,t)}function ol(h){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eS({basename:h="/",children:t=null,location:i,navigationType:s="POP",navigator:a,static:o=!1}){Jt(!Er(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=h.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof i=="string"&&(i=la(i));let{pathname:d="/",search:f="",hash:g="",state:y=null,key:v="default"}=i,A=K.useMemo(()=>{let w=an(d,c);return w==null?null:{location:{pathname:w,search:f,hash:g,state:y,key:v},navigationType:s}},[c,d,f,g,y,v,s]);return wi(A!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:K.createElement(ki.Provider,{value:u},K.createElement(wr.Provider,{children:t,value:A}))}function iS({children:h,location:t}){return jA(Rh(h),t)}function Rh(h,t=[]){let i=[];return K.Children.forEach(h,(s,a)=>{if(!K.isValidElement(s))return;let o=[...t,a];if(s.type===K.Fragment){i.push.apply(i,Rh(s.props.children,o));return}Jt(s.type===ol,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Rh(s.props.children,o)),i.push(c)}),i}var ll="get",cl="application/x-www-form-urlencoded";function bl(h){return h!=null&&typeof h.tagName=="string"}function nS(h){return bl(h)&&h.tagName.toLowerCase()==="button"}function sS(h){return bl(h)&&h.tagName.toLowerCase()==="form"}function aS(h){return bl(h)&&h.tagName.toLowerCase()==="input"}function rS(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function oS(h,t){return h.button===0&&(!t||t==="_self")&&!rS(h)}var Qo=null;function lS(){if(Qo===null)try{new FormData(document.createElement("form"),0),Qo=!1}catch{Qo=!0}return Qo}var cS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qu(h){return h!=null&&!cS.has(h)?(wi(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cl}"`),null):h}function uS(h,t){let i,s,a,o,c;if(sS(h)){let u=h.getAttribute("action");s=u?an(u,t):null,i=h.getAttribute("method")||ll,a=Qu(h.getAttribute("enctype"))||cl,o=new FormData(h)}else if(nS(h)||aS(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?an(d,t):null,i=h.getAttribute("formmethod")||u.getAttribute("method")||ll,a=Qu(h.getAttribute("formenctype"))||Qu(u.getAttribute("enctype"))||cl,o=new FormData(u,h),!lS()){let{name:f,type:g,value:y}=h;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(bl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ll,s=null,a=cl,c=h}return o&&a==="text/plain"&&(c=o,o=void 0),{action:s,method:i.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function hS(h,t,i){let s=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return s.pathname==="/"?s.pathname=`_root.${i}`:t&&an(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function dS(h,t){if(h.id in t)return t[h.id];try{let i=await import(h.module);return t[h.id]=i,i}catch(i){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fS(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function pS(h,t,i){let s=await Promise.all(h.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await dS(o,i);return c.links?c.links():[]}return[]}));return vS(s.flat(1).filter(fS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Dm(h,t,i,s,a,o){let c=(d,f)=>i[f]?d.route.id!==i[f].route.id:!0,u=(d,f)=>i[f].pathname!==d.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function gS(h,t,{includeHydrateFallback:i}={}){return mS(h.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),i&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function mS(h){return[...new Set(h)]}function yS(h){let t={},i=Object.keys(h).sort();for(let s of i)t[s]=h[s];return t}function vS(h,t){let i=new Set;return new Set(t),h.reduce((s,a)=>{let o=JSON.stringify(yS(a));return i.has(o)||(i.add(o),s.push({key:o,link:a})),s},[])}function Fy(){let h=K.useContext(ca);return Xh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function bS(){let h=K.useContext(vl);return Xh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var $h=K.createContext(void 0);$h.displayName="FrameworkContext";function Uy(){let h=K.useContext($h);return Xh(h,"You must render this element inside a <HydratedRouter> element"),h}function AS(h,t){let i=K.useContext($h),[s,a]=K.useState(!1),[o,c]=K.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,v=K.useRef(null);K.useEffect(()=>{if(h==="render"&&c(!0),h==="viewport"){let S=E=>{E.forEach(R=>{c(R.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[h]),K.useEffect(()=>{if(s){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{a(!0)},w=()=>{a(!1),c(!1)};return i?h!=="intent"?[o,v,{}]:[o,v,{onFocus:sr(u,A),onBlur:sr(d,w),onMouseEnter:sr(f,A),onMouseLeave:sr(g,w),onTouchStart:sr(y,A)}]:[!1,v,{}]}function sr(h,t){return i=>{h&&h(i),i.defaultPrevented||t(i)}}function SS({page:h,...t}){let{router:i}=Fy(),s=K.useMemo(()=>xy(i.routes,h,i.basename),[i.routes,h,i.basename]);return s?K.createElement(ES,{page:h,matches:s,...t}):null}function wS(h){let{manifest:t,routeModules:i}=Uy(),[s,a]=K.useState([]);return K.useEffect(()=>{let o=!1;return pS(h,t,i).then(c=>{o||a(c)}),()=>{o=!0}},[h,t,i]),s}function ES({page:h,matches:t,...i}){let s=zn(),{manifest:a,routeModules:o}=Uy(),{basename:c}=Fy(),{loaderData:u,matches:d}=bS(),f=K.useMemo(()=>Dm(h,t,d,a,s,"data"),[h,t,d,a,s]),g=K.useMemo(()=>Dm(h,t,d,a,s,"assets"),[h,t,d,a,s]),y=K.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let w=new Set,S=!1;if(t.forEach(E=>{let R=a.routes[E.route.id];!R||!R.hasLoader||(!f.some(C=>C.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||R.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let _=hS(h,c,"data");return S&&w.size>0&&_.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[_.pathname+_.search]},[c,u,s,a,f,t,h,o]),v=K.useMemo(()=>gS(g,a),[g,a]),A=wS(g);return K.createElement(K.Fragment,null,y.map(w=>K.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),v.map(w=>K.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),A.map(({key:w,link:S})=>K.createElement("link",{key:w,nonce:i.nonce,...S})))}function _S(...h){return t=>{h.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var Iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Iy&&(window.__reactRouterVersion="7.9.6")}catch{}function TS({basename:h,children:t,window:i}){let s=K.useRef();s.current==null&&(s.current=hA({window:i,v5Compat:!0}));let a=s.current,[o,c]=K.useState({action:a.action,location:a.location}),u=K.useCallback(d=>{K.startTransition(()=>c(d))},[c]);return K.useLayoutEffect(()=>a.listen(u),[a,u]),K.createElement(eS,{basename:h,children:t,location:o.location,navigationType:o.action,navigator:a})}var Hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=K.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:a,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},A){let{basename:w}=K.useContext(ki),S=typeof f=="string"&&Hy.test(f),_,E=!1;if(typeof f=="string"&&S&&(_=f,Iy))try{let Y=new URL(window.location.href),tt=f.startsWith("//")?new URL(Y.protocol+f):new URL(f),et=an(tt.pathname,w);tt.origin===Y.origin&&et!=null?f=et+tt.search+tt.hash:E=!0}catch{wi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=UA(f,{relative:a}),[C,O,D]=AS(s,v),k=MS(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y});function z(Y){t&&t(Y),Y.defaultPrevented||k(Y)}let V=K.createElement("a",{...v,...D,href:_||R,onClick:E||o?t:z,ref:_S(A,O),target:d,"data-discover":!S&&i==="render"?"true":void 0});return C&&!S?K.createElement(K.Fragment,null,V,K.createElement(SS,{page:R})):V});nn.displayName="Link";var CS=K.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=_r(c,{relative:f.relative}),v=zn(),A=K.useContext(vl),{navigator:w,basename:S}=K.useContext(ki),_=A!=null&&kS(y)&&u===!0,E=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,R=v.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(R=R.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&S&&(C=an(C,S)||C);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=R===E||!a&&R.startsWith(E)&&R.charAt(O)==="/",k=C!=null&&(C===E||!a&&C.startsWith(E)&&C.charAt(E.length)==="/"),z={isActive:D,isPending:k,isTransitioning:_},V=D?t:void 0,Y;typeof s=="function"?Y=s(z):Y=[s,D?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let tt=typeof o=="function"?o(z):o;return K.createElement(nn,{...f,"aria-current":V,className:Y,ref:g,style:tt,to:c,viewTransition:u},typeof d=="function"?d(z):d)});CS.displayName="NavLink";var xS=K.forwardRef(({discover:h="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:a,state:o,method:c=ll,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},A)=>{let w=OS(),S=NS(u,{relative:f}),_=c.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&Hy.test(u),R=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,D=O?.getAttribute("formmethod")||c;w(O||C.currentTarget,{fetcherKey:t,method:D,navigate:i,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:y})};return K.createElement("form",{ref:A,method:_,action:S,onSubmit:s?d:R,...v,"data-discover":!E&&h==="render"?"true":void 0})});xS.displayName="Form";function RS(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jy(h){let t=K.useContext(ca);return Jt(t,RS(h)),t}function MS(h,{target:t,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:c}={}){let u=IA(),d=zn(),f=_r(h,{relative:o});return K.useCallback(g=>{if(oS(g,t)){g.preventDefault();let y=i!==void 0?i:gr(d)===gr(f);u(h,{replace:y,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,f,i,s,t,h,a,o,c])}var DS=0,LS=()=>`__${String(++DS)}__`;function OS(){let{router:h}=jy("useSubmit"),{basename:t}=K.useContext(ki),i=QA();return K.useCallback(async(s,a={})=>{let{action:o,method:c,encType:u,formData:d,body:f}=uS(s,t);if(a.navigate===!1){let g=a.fetcherKey||LS();await h.fetch(g,i,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await h.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:i,flushSync:a.flushSync,viewTransition:a.viewTransition})},[h,t,i])}function NS(h,{relative:t}={}){let{basename:i}=K.useContext(ki),s=K.useContext(rn);Jt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={..._r(h||".",{relative:t})},c=zn();if(h==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:sn([i,o.pathname])),gr(o)}function kS(h,{relative:t}={}){let i=K.useContext(Ny);Jt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=jy("useViewTransitionState"),a=_r(h,{relative:t});if(!i.isTransitioning)return!1;let o=an(i.currentLocation.pathname,s)||i.currentLocation.pathname,c=an(i.nextLocation.pathname,s)||i.nextLocation.pathname;return fl(a.pathname,c)!=null||fl(a.pathname,o)!=null}const BS={sm:{padding:"8px 14px",fontSize:"14px"},md:{padding:"10px 20px",fontSize:"15px"},lg:{padding:"12px 22px",fontSize:"16px"}};function kn({children:h,variant:t="primary",size:i="md",fullWidth:s=!1,as:a="button",className:o,...c}){const u=a,d=["btn",`btn-${t}`,o].filter(Boolean).join(" ");return N.jsx(u,{className:d,style:{width:s?"100%":"auto",...BS[i]},...c,children:h})}function Gy({size:h="md",withTagline:t=!1}){const i={sm:18,md:22,lg:26},s=i[h]||i.md;return N.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[N.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[N.jsx("span",{style:{fontWeight:900,fontSize:s,color:"var(--color-text)",letterSpacing:"-0.02em"},children:"Niibl"}),N.jsx("span",{style:{fontWeight:700,fontSize:s*.6,color:"var(--color-terracotta)"},children:"beta"})]}),t?N.jsx("span",{style:{fontSize:12,color:"rgba(61,64,91,0.7)",fontWeight:600},children:"Just a bite smarter"}):null]})}const Lm=[{label:"Home",to:"/"},{label:"Converter",to:"/app"},{label:"Saved",to:"/saved"}];function PS(){const h=zn(),[t,i]=K.useState(!1);return K.useEffect(()=>{i(!1)},[h.pathname]),N.jsxs("header",{className:"header-shell",children:[N.jsxs("div",{className:"container header-inner",children:[N.jsx(nn,{to:"/",style:{display:"flex",alignItems:"center",gap:8},children:N.jsx(Gy,{size:"lg"})}),N.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:12},children:[N.jsxs("div",{className:"nav-desktop",children:[N.jsx("div",{className:"nav-links",children:Lm.map(s=>{const a=h.pathname===s.to;return N.jsx(nn,{to:s.to,style:{fontWeight:600,fontSize:14,color:a?"var(--color-terracotta)":"var(--color-text)",padding:"8px 10px",borderRadius:8,transition:"background 150ms ease"},children:s.label},s.to)})}),N.jsx(kn,{as:nn,to:"/app",variant:"primary",size:"sm",children:"Open Converter"})]}),N.jsx("button",{className:"nav-mobile-toggle",type:"button",onClick:()=>i(s=>!s),"aria-label":"Toggle menu",children:N.jsx("span",{className:"hamburger-lines"})})]})]}),N.jsx("div",{className:`container nav-mobile ${t?"open":""}`,children:N.jsx("div",{className:"nav-links",style:{flexDirection:"column",alignItems:"flex-start"},children:Lm.map(s=>{const a=h.pathname===s.to;return N.jsx(nn,{to:s.to,style:{fontWeight:700,fontSize:16,color:a?"var(--color-terracotta)":"var(--color-text)",padding:"10px 0"},children:s.label},s.to)})})})]})}function zS(){return N.jsx("footer",{style:{background:"var(--color-cream-muted)",marginTop:64},children:N.jsxs("div",{className:"container",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,paddingBlock:20},children:[N.jsx(Gy,{size:"md",withTagline:!0}),N.jsx("div",{className:"muted-text",style:{fontSize:13},children:"Niibl  Just A Bite  2024"})]})})}function FS({children:h}){return N.jsxs("div",{className:"page",children:[N.jsx(PS,{}),N.jsx("main",{children:h}),N.jsx(zS,{})]})}function US(){return N.jsx("section",{className:"section",style:{background:"var(--color-cream)"},children:N.jsxs("div",{className:"container hero-grid",children:[N.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:18},children:[N.jsx("div",{className:"badge badge-terracotta",style:{width:"fit-content"},children:"Just a bite smarter"}),N.jsx("h1",{style:{fontSize:46},children:"Cook Smarter. Just A Bite."}),N.jsx("p",{style:{fontSize:18,color:"rgba(61,64,91,0.85)",maxWidth:560},children:"Niibl helps you convert, scale, and save recipes effortlessly. Paste or upload your recipe, choose servings, and let the converter handle the math."}),N.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[N.jsx(kn,{as:nn,to:"/app",variant:"primary",size:"lg",children:"Try the Converter"}),N.jsx(kn,{as:nn,to:"#how",variant:"secondary",children:"How It Works"})]})]}),N.jsx("div",{children:N.jsx("div",{className:"card card-elevated",style:{minHeight:260,background:"linear-gradient(135deg, #ffffff 0%, #f9f5ed 50%, #ffe8df 100%)",display:"grid",placeItems:"center",border:"1px solid var(--color-border)"},children:N.jsxs("div",{style:{textAlign:"center"},children:[N.jsx("div",{className:"badge badge-sage",style:{marginBottom:10},children:"Preview"}),N.jsx("h3",{style:{marginBottom:8},children:"Upload  Confirm  Convert"}),N.jsx("p",{className:"muted-text",children:"A friendly preview of your converted recipe lives here."})]})})})]})})}function mr({title:h,subtitle:t,children:i,className:s,accent:a}){const o=["card","card-elevated",s].filter(Boolean).join(" ");return N.jsxs("div",{className:o,children:[a?N.jsx("div",{style:{width:"100%",height:4,borderRadius:9999,background:a,marginBottom:14}}):null,h?N.jsx("h3",{style:{fontSize:20,marginBottom:8},children:h}):null,t?N.jsx("p",{className:"muted-text",style:{marginBottom:12},children:t}):null,i]})}function IS({stepNumber:h,title:t,description:i}){return N.jsxs(mr,{accent:"var(--color-terracotta)",children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[N.jsxs("div",{className:"badge badge-terracotta",style:{borderRadius:10,fontWeight:800,fontSize:13},children:["Step ",h]}),N.jsx("h3",{style:{fontSize:20},children:t})]}),N.jsx("p",{className:"muted-text",children:i})]})}const HS=[{stepNumber:1,title:"Upload",description:"Paste your recipe text or drop an image/PDF. We keep it neat and ready to parse."},{stepNumber:2,title:"Confirm",description:"Check servings and units. Adjust sliders before we do the math for you."},{stepNumber:3,title:"Convert",description:"Instantly scale ingredients and instructions. Copy, save, or share your recipe."}];function jS(){return N.jsx("section",{id:"how",className:"section",style:{background:"var(--color-cream-muted)"},children:N.jsxs("div",{className:"container",children:[N.jsx("h2",{className:"section-heading",children:"How Niibl Works"}),N.jsx("div",{className:"grid-3",children:HS.map(h=>N.jsx(IS,{...h},h.stepNumber))})]})})}function GS({title:h,description:t,icon:i}){return N.jsxs(mr,{children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[N.jsx("div",{style:{width:40,height:40,borderRadius:12,background:"var(--color-sage-ghost)",display:"grid",placeItems:"center",color:"var(--color-terracotta)",fontWeight:800},children:i||""}),N.jsx("h3",{style:{fontSize:18},children:h})]}),N.jsx("p",{className:"muted-text",children:t})]})}const qS=[{title:"Reduce waste",description:"Scale recipes to the exact servings you need and stop guessing with leftovers.",icon:""},{title:"Scale effortlessly",description:"Move a slider to instantly adjust ingredient amounts without manual math.",icon:""},{title:"Save favorites",description:"Keep your best conversions handy. Reopen and tweak in seconds.",icon:""}];function VS(){return N.jsx("section",{className:"section",style:{background:"var(--color-cream)"},children:N.jsxs("div",{className:"container",children:[N.jsx("h2",{className:"section-heading",children:"Why Niibl?"}),N.jsx("div",{className:"grid-3",children:qS.map(h=>N.jsx(GS,{...h},h.title))})]})})}function YS(){return N.jsx("section",{className:"section",style:{background:"var(--color-navy)"},children:N.jsxs("div",{className:"container",style:{display:"grid",gap:16,textAlign:"center"},children:[N.jsx("h2",{style:{color:"var(--color-cream)",fontSize:32},children:"Ready to convert your first recipe?"}),N.jsx("p",{style:{color:"rgba(244,241,222,0.85)",fontSize:16},children:"Jump into the converter to paste, upload, and scale in one flow."}),N.jsx("div",{style:{display:"flex",justifyContent:"center"},children:N.jsx(kn,{as:nn,to:"/app",variant:"primary",size:"lg",children:"Open the Converter"})})]})})}function XS(){return N.jsxs("div",{children:[N.jsx(US,{}),N.jsx(jS,{}),N.jsx(VS,{}),N.jsx(YS,{})]})}const Om=[{amount:1,unit:"cup",name:"flour"},{amount:.5,unit:"cup",name:"sugar"},{amount:2,unit:"pcs",name:"eggs"},{amount:.25,unit:"cup",name:"butter"}];function $S(h){if(!h)return null;const t=h.trim().split(/\s+/);let i=0;return t.forEach(s=>{if(s.includes("/")){const[a,o]=s.split("/").map(Number);!Number.isNaN(a)&&!Number.isNaN(o)&&o!==0&&(i+=a/o)}else{const a=Number(s);Number.isNaN(a)||(i+=a)}}),i||null}function KS(h){if(!h?.trim())return{title:"Converted Recipe",ingredients:Om,instructions:"Add your instructions to keep steps aligned with the converted amounts."};const t=h.split(/\n+/).map(a=>a.trim()).filter(Boolean),i=[],s=[];return t.forEach(a=>{if(/^\d+\.\s/.test(a)){s.push(a);return}const o=a.match(/^([\d][\d\s\/.]*)\s+([A-Za-z]+)?\s*(.*)$/),c=o?$S(o[1]):null;if(c){const u=o?.[2]||"",d=o?.[3]||a.replace(o?.[1]||"","").trim();i.push({amount:c,unit:u,name:d||"Ingredient"})}else s.push(a)}),{title:t[0]||"Converted Recipe",ingredients:i.length?i:Om,instructions:s.join(`
`)||"Add your instructions to keep steps aligned."}}function WS(h,t){return h.map(i=>({...i,amount:Number((i.amount*t).toFixed(2)),highlightChange:t!==1}))}const qy="niibl_saved_recipes";function Vy(){try{const h=localStorage.getItem(qy);return h?JSON.parse(h):[]}catch(h){return console.error("Unable to read saved recipes",h),[]}}function QS(h){try{localStorage.setItem(qy,JSON.stringify(h))}catch(t){console.error("Unable to persist recipes",t)}}function ZS(){return Vy()}function JS(h){const t=Vy(),i=crypto.randomUUID?crypto.randomUUID():`${Date.now()}`,s={...h,id:i,createdAt:new Date().toISOString()};return QS([s,...t]),s}var Zu={exports:{}},Nm;function t1(){return Nm||(Nm=1,(function(h){var t=(function(i){var s=Object.prototype,a=s.hasOwnProperty,o=Object.defineProperty||function(X,q,x){X[q]=x.value},c,u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",g=u.toStringTag||"@@toStringTag";function y(X,q,x){return Object.defineProperty(X,q,{value:x,enumerable:!0,configurable:!0,writable:!0}),X[q]}try{y({},"")}catch{y=function(q,x,F){return q[x]=F}}function v(X,q,x,F){var j=q&&q.prototype instanceof C?q:C,J=Object.create(j.prototype),nt=new B(F||[]);return o(J,"_invoke",{value:ft(X,x,nt)}),J}i.wrap=v;function A(X,q,x){try{return{type:"normal",arg:X.call(q,x)}}catch(F){return{type:"throw",arg:F}}}var w="suspendedStart",S="suspendedYield",_="executing",E="completed",R={};function C(){}function O(){}function D(){}var k={};y(k,d,function(){return this});var z=Object.getPrototypeOf,V=z&&z(z($([])));V&&V!==s&&a.call(V,d)&&(k=V);var Y=D.prototype=C.prototype=Object.create(k);O.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:O,configurable:!0}),O.displayName=y(D,g,"GeneratorFunction");function tt(X){["next","throw","return"].forEach(function(q){y(X,q,function(x){return this._invoke(q,x)})})}i.isGeneratorFunction=function(X){var q=typeof X=="function"&&X.constructor;return q?q===O||(q.displayName||q.name)==="GeneratorFunction":!1},i.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,D):(X.__proto__=D,y(X,g,"GeneratorFunction")),X.prototype=Object.create(Y),X},i.awrap=function(X){return{__await:X}};function et(X,q){function x(J,nt,ct,at){var Tt=A(X[J],X,nt);if(Tt.type==="throw")at(Tt.arg);else{var st=Tt.arg,yt=st.value;return yt&&typeof yt=="object"&&a.call(yt,"__await")?q.resolve(yt.__await).then(function(Nt){x("next",Nt,ct,at)},function(Nt){x("throw",Nt,ct,at)}):q.resolve(yt).then(function(Nt){st.value=Nt,ct(st)},function(Nt){return x("throw",Nt,ct,at)})}}var F;function j(J,nt){function ct(){return new q(function(at,Tt){x(J,nt,at,Tt)})}return F=F?F.then(ct,ct):ct()}o(this,"_invoke",{value:j})}tt(et.prototype),y(et.prototype,f,function(){return this}),i.AsyncIterator=et,i.async=function(X,q,x,F,j){j===void 0&&(j=Promise);var J=new et(v(X,q,x,F),j);return i.isGeneratorFunction(q)?J:J.next().then(function(nt){return nt.done?nt.value:J.next()})};function ft(X,q,x){var F=w;return function(J,nt){if(F===_)throw new Error("Generator is already running");if(F===E){if(J==="throw")throw nt;return it()}for(x.method=J,x.arg=nt;;){var ct=x.delegate;if(ct){var at=mt(ct,x);if(at){if(at===R)continue;return at}}if(x.method==="next")x.sent=x._sent=x.arg;else if(x.method==="throw"){if(F===w)throw F=E,x.arg;x.dispatchException(x.arg)}else x.method==="return"&&x.abrupt("return",x.arg);F=_;var Tt=A(X,q,x);if(Tt.type==="normal"){if(F=x.done?E:S,Tt.arg===R)continue;return{value:Tt.arg,done:x.done}}else Tt.type==="throw"&&(F=E,x.method="throw",x.arg=Tt.arg)}}}function mt(X,q){var x=q.method,F=X.iterator[x];if(F===c)return q.delegate=null,x==="throw"&&X.iterator.return&&(q.method="return",q.arg=c,mt(X,q),q.method==="throw")||x!=="return"&&(q.method="throw",q.arg=new TypeError("The iterator does not provide a '"+x+"' method")),R;var j=A(F,X.iterator,q.arg);if(j.type==="throw")return q.method="throw",q.arg=j.arg,q.delegate=null,R;var J=j.arg;if(!J)return q.method="throw",q.arg=new TypeError("iterator result is not an object"),q.delegate=null,R;if(J.done)q[X.resultName]=J.value,q.next=X.nextLoc,q.method!=="return"&&(q.method="next",q.arg=c);else return J;return q.delegate=null,R}tt(Y),y(Y,g,"Generator"),y(Y,d,function(){return this}),y(Y,"toString",function(){return"[object Generator]"});function pt(X){var q={tryLoc:X[0]};1 in X&&(q.catchLoc=X[1]),2 in X&&(q.finallyLoc=X[2],q.afterLoc=X[3]),this.tryEntries.push(q)}function At(X){var q=X.completion||{};q.type="normal",delete q.arg,X.completion=q}function B(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(pt,this),this.reset(!0)}i.keys=function(X){var q=Object(X),x=[];for(var F in q)x.push(F);return x.reverse(),function j(){for(;x.length;){var J=x.pop();if(J in q)return j.value=J,j.done=!1,j}return j.done=!0,j}};function $(X){if(X){var q=X[d];if(q)return q.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var x=-1,F=function j(){for(;++x<X.length;)if(a.call(X,x))return j.value=X[x],j.done=!1,j;return j.value=c,j.done=!0,j};return F.next=F}}return{next:it}}i.values=$;function it(){return{value:c,done:!0}}return B.prototype={constructor:B,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(At),!X)for(var q in this)q.charAt(0)==="t"&&a.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=c)},stop:function(){this.done=!0;var X=this.tryEntries[0],q=X.completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var q=this;function x(at,Tt){return J.type="throw",J.arg=X,q.next=at,Tt&&(q.method="next",q.arg=c),!!Tt}for(var F=this.tryEntries.length-1;F>=0;--F){var j=this.tryEntries[F],J=j.completion;if(j.tryLoc==="root")return x("end");if(j.tryLoc<=this.prev){var nt=a.call(j,"catchLoc"),ct=a.call(j,"finallyLoc");if(nt&&ct){if(this.prev<j.catchLoc)return x(j.catchLoc,!0);if(this.prev<j.finallyLoc)return x(j.finallyLoc)}else if(nt){if(this.prev<j.catchLoc)return x(j.catchLoc,!0)}else if(ct){if(this.prev<j.finallyLoc)return x(j.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(X,q){for(var x=this.tryEntries.length-1;x>=0;--x){var F=this.tryEntries[x];if(F.tryLoc<=this.prev&&a.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var j=F;break}}j&&(X==="break"||X==="continue")&&j.tryLoc<=q&&q<=j.finallyLoc&&(j=null);var J=j?j.completion:{};return J.type=X,J.arg=q,j?(this.method="next",this.next=j.finallyLoc,R):this.complete(J)},complete:function(X,q){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&q&&(this.next=q),R},finish:function(X){for(var q=this.tryEntries.length-1;q>=0;--q){var x=this.tryEntries[q];if(x.finallyLoc===X)return this.complete(x.completion,x.afterLoc),At(x),R}},catch:function(X){for(var q=this.tryEntries.length-1;q>=0;--q){var x=this.tryEntries[q];if(x.tryLoc===X){var F=x.completion;if(F.type==="throw"){var j=F.arg;At(x)}return j}}throw new Error("illegal catch attempt")},delegateYield:function(X,q,x){return this.delegate={iterator:$(X),resultName:q,nextLoc:x},this.method==="next"&&(this.arg=c),R}},i})(h.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(Zu)),Zu.exports}var Ju,km;function Kh(){return km||(km=1,Ju=(h,t)=>`${h}-${t}-${Math.random().toString(16).slice(3,8)}`),Ju}var th,Bm;function Yy(){if(Bm)return th;Bm=1;const h=Kh();let t=0;return th=({id:i,action:s,payload:a={}})=>{let o=i;return typeof o>"u"&&(o=h("Job",t),t+=1),{id:o,action:s,payload:a}},th}var ar={},Pm;function Wh(){if(Pm)return ar;Pm=1;let h=!1;return ar.logging=h,ar.setLogging=t=>{h=t},ar.log=(...t)=>h?console.log.apply(this,t):null,ar}var eh,zm;function e1(){if(zm)return eh;zm=1;const h=Yy(),{log:t}=Wh(),i=Kh();let s=0;return eh=()=>{const a=i("Scheduler",s),o={},c={};let u=[];s+=1;const d=()=>u.length,f=()=>Object.keys(o).length,g=()=>{if(u.length!==0){const S=Object.keys(o);for(let _=0;_<S.length;_+=1)if(typeof c[S[_]]>"u"){u[0](o[S[_]]);break}}},y=(S,_)=>new Promise((E,R)=>{const C=h({action:S,payload:_});u.push(async O=>{u.shift(),c[O.id]=C;try{E(await O[S].apply(this,[..._,C.id]))}catch(D){R(D)}finally{delete c[O.id],g()}}),t(`[${a}]: Add ${C.id} to JobQueue`),t(`[${a}]: JobQueue length=${u.length}`),g()});return{addWorker:S=>(o[S.id]=S,t(`[${a}]: Add ${S.id}`),t(`[${a}]: Number of workers=${f()}`),g(),S.id),addJob:async(S,..._)=>{if(f()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return y(S,_)},terminate:async()=>{Object.keys(o).forEach(async S=>{await o[S].terminate()}),u=[]},getQueueLen:d,getNumWorkers:f}},eh}function i1(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ih,Fm;function n1(){return Fm||(Fm=1,ih=h=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof i1=="function"&&(t.type="node"),typeof h>"u"?t:t[h]}),ih}var nh,Um;function s1(){if(Um)return nh;Um=1;const t=n1()("type")==="browser"?i=>new URL(i,window.location.href).href:i=>i;return nh=i=>{const s={...i};return["corePath","workerPath","langPath"].forEach(a=>{i[a]&&(s[a]=t(s[a]))}),s},nh}var sh,Im;function Xy(){return Im||(Im=1,sh={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),sh}const a1="6.0.1",r1={version:a1};var ah,Hm;function o1(){return Hm||(Hm=1,ah={workerBlobURL:!0,logger:()=>{}}),ah}var rh,jm;function l1(){if(jm)return rh;jm=1;const h=r1.version;return rh={...o1(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${h}/dist/worker.min.js`},rh}var oh,Gm;function c1(){return Gm||(Gm=1,oh=({workerPath:h,workerBlobURL:t})=>{let i;if(Blob&&URL&&t){const s=new Blob([`importScripts("${h}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(s))}else i=new Worker(h);return i}),oh}var lh,qm;function u1(){return qm||(qm=1,lh=h=>{h.terminate()}),lh}var ch,Vm;function h1(){return Vm||(Vm=1,ch=(h,t)=>{h.onmessage=({data:i})=>{t(i)}}),ch}var uh,Ym;function d1(){return Ym||(Ym=1,uh=async(h,t)=>{h.postMessage(t)}),uh}var hh,Xm;function f1(){if(Xm)return hh;Xm=1;const h=i=>new Promise((s,a)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=({target:{error:{code:c}}})=>{a(Error(`File could not be read! Code=${c}`))},o.readAsArrayBuffer(i)}),t=async i=>{let s=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?s=atob(i.split(",")[1]).split("").map(a=>a.charCodeAt(0)):s=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(s=await t(i.src)),i.tagName==="VIDEO"&&(s=await t(i.poster)),i.tagName==="CANVAS"&&await new Promise(a=>{i.toBlob(async o=>{s=await h(o),a()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const a=await i.convertToBlob();s=await h(a)}else(i instanceof File||i instanceof Blob)&&(s=await h(i));return new Uint8Array(s)};return hh=t,hh}var dh,$m;function p1(){if($m)return dh;$m=1;const h=l1(),t=c1(),i=u1(),s=h1(),a=d1(),o=f1();return dh={defaultOptions:h,spawnWorker:t,terminateWorker:i,onMessage:s,send:a,loadImage:o},dh}var fh,Km;function $y(){if(Km)return fh;Km=1;const h=s1(),t=Yy(),{log:i}=Wh(),s=Kh(),a=Xy(),{defaultOptions:o,spawnWorker:c,terminateWorker:u,onMessage:d,loadImage:f,send:g}=p1();let y=0;return fh=async(v="eng",A=a.LSTM_ONLY,w={},S={})=>{const _=s("Worker",y),{logger:E,errorHandler:R,...C}=h({...o,...w}),O={},D=typeof v=="string"?v.split("+"):v;let k=A,z=S;const V=[a.DEFAULT,a.LSTM_ONLY].includes(A)&&!C.legacyCore;let Y,tt;const et=new Promise((st,yt)=>{tt=st,Y=yt}),ft=st=>{Y(st.message)};let mt=c(C);mt.onerror=ft,y+=1;const pt=({id:st,action:yt,payload:Nt})=>new Promise((oe,me)=>{i(`[${_}]: Start ${st}, action=${yt}`);const le=`${yt}-${st}`;O[le]={resolve:oe,reject:me},g(mt,{workerId:_,jobId:st,action:yt,payload:Nt})}),At=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),B=st=>pt(t({id:st,action:"load",payload:{options:{lstmOnly:V,corePath:C.corePath,logging:C.logging}}})),$=(st,yt,Nt)=>pt(t({id:Nt,action:"FS",payload:{method:"writeFile",args:[st,yt]}})),it=(st,yt)=>pt(t({id:yt,action:"FS",payload:{method:"readFile",args:[st,{encoding:"utf8"}]}})),X=(st,yt)=>pt(t({id:yt,action:"FS",payload:{method:"unlink",args:[st]}})),q=(st,yt,Nt)=>pt(t({id:Nt,action:"FS",payload:{method:st,args:yt}})),x=(st,yt)=>pt(t({id:yt,action:"loadLanguage",payload:{langs:st,options:{langPath:C.langPath,dataPath:C.dataPath,cachePath:C.cachePath,cacheMethod:C.cacheMethod,gzip:C.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(k)&&!C.legacyLang}}})),F=(st,yt,Nt,oe)=>pt(t({id:oe,action:"initialize",payload:{langs:st,oem:yt,config:Nt}})),j=(st="eng",yt,Nt,oe)=>{if(V&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(yt))throw Error("Legacy model requested but code missing.");const me=yt||k;k=me;const le=Nt||z;z=le;const Fn=(typeof st=="string"?st.split("+"):st).filter(xl=>!D.includes(xl));return D.push(...Fn),Fn.length>0?x(Fn,oe).then(()=>F(st,me,le,oe)):F(st,me,le,oe)},J=(st={},yt)=>pt(t({id:yt,action:"setParameters",payload:{params:st}})),nt=async(st,yt={},Nt={text:!0},oe)=>pt(t({id:oe,action:"recognize",payload:{image:await f(st),options:yt,output:Nt}})),ct=async(st,yt)=>{if(V)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return pt(t({id:yt,action:"detect",payload:{image:await f(st)}}))},at=async()=>(mt!==null&&(u(mt),mt=null),Promise.resolve());d(mt,({workerId:st,jobId:yt,status:Nt,action:oe,data:me})=>{const le=`${oe}-${yt}`;if(Nt==="resolve")i(`[${st}]: Complete ${yt}`),O[le].resolve({jobId:yt,data:me}),delete O[le];else if(Nt==="reject")if(O[le].reject(me),delete O[le],oe==="load"&&Y(me),R)R(me);else throw Error(me);else Nt==="progress"&&E({...me,userJobId:yt})});const Tt={id:_,worker:mt,load:At,writeText:$,readText:it,removeFile:X,FS:q,reinitialize:j,setParameters:J,recognize:nt,detect:ct,terminate:at};return B().then(()=>x(v)).then(()=>F(v,A,S)).then(()=>tt(Tt)).catch(()=>{}),et},fh}var ph,Wm;function g1(){if(Wm)return ph;Wm=1;const h=$y();return ph={recognize:async(s,a,o)=>{const c=await h(a,1,o);return c.recognize(s).finally(async()=>{await c.terminate()})},detect:async(s,a)=>{const o=await h("osd",0,a);return o.detect(s).finally(async()=>{await o.terminate()})}},ph}var gh,Qm;function m1(){return Qm||(Qm=1,gh={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),gh}var mh,Zm;function y1(){return Zm||(Zm=1,mh={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),mh}var yh,Jm;function v1(){if(Jm)return yh;Jm=1,t1();const h=e1(),t=$y(),i=g1(),s=m1(),a=Xy(),o=y1(),{setLogging:c}=Wh();return yh={languages:s,OEM:a,PSM:o,createScheduler:h,createWorker:t,setLogging:c,...i},yh}var b1=v1();const A1=tA(b1),Ne=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Mh=[.001,0,0,.001,0,0],vh=1.35,ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},On={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},yr="pdfjs_internal_editor_",St={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},S1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Dh={TRIANGLES:1,LATTICE:2},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ul={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ws={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Al={ERRORS:0,WARNINGS:1,INFOS:5},vr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},rr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},w1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Sl=Al.WARNINGS;function E1(h){Number.isInteger(h)&&(Sl=h)}function _1(){return Sl}function wl(h){Sl>=Al.INFOS&&console.info(`Info: ${h}`)}function bt(h){Sl>=Al.WARNINGS&&console.warn(`Warning: ${h}`)}function Yt(h){throw new Error(h)}function Ot(h,t){h||Yt(t)}function T1(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ky(h,t=null,i=null){if(!h)return null;if(i&&typeof h=="string"&&(i.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),i.tryConvertEncoding))try{h=D1(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return T1(s)?s:null}function Wy(h,t,i=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):i&&Ky(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Et(h,t,i,s=!1){return Object.defineProperty(h,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const cs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class ty extends cs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class bh extends cs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class Lh extends cs{constructor(t){super(t,"InvalidPDFException")}}class pl extends cs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class C1 extends cs{constructor(t){super(t,"FormatError")}}class Bn extends cs{constructor(t){super(t,"AbortException")}}function Qy(h){(typeof h!="object"||h?.length===void 0)&&Yt("Invalid argument for bytesToString");const t=h.length,i=8192;if(t<i)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=i){const o=Math.min(a+i,t),c=h.subarray(a,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Tr(h){typeof h!="string"&&Yt("Invalid argument for stringToBytes");const t=h.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=h.charCodeAt(s)&255;return i}function x1(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function R1(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function M1(){try{return new Function(""),!0}catch{return!1}}class Me{static get isLittleEndian(){return Et(this,"isLittleEndian",R1())}static get isEvalSupported(){return Et(this,"isEvalSupported",M1())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Et(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Et(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return Et(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return Et(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ah=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class lt{static makeHexColor(t,i,s){return`#${Ah[t]}${Ah[i]}${Ah[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const a=t[s],o=t[s+1];t[s]=a*i[0]+o*i[2]+i[4],t[s+1]=a*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const a=i[0],o=i[1],c=i[2],u=i[3],d=i[4],f=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],v=t[s+g+1];t[s+g]=y*a+v*c+d,t[s+g+1]=y*o+v*u+f}}static applyInverseTransform(t,i){const s=t[0],a=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-a*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+a*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const a=i[0],o=i[1],c=i[2],u=i[3],d=i[4],f=i[5],g=t[0],y=t[1],v=t[2],A=t[3];let w=a*g+d,S=w,_=a*v+d,E=_,R=u*y+f,C=R,O=u*A+f,D=O;if(o!==0||c!==0){const k=o*g,z=o*v,V=c*y,Y=c*A;w+=V,E+=V,_+=Y,S+=Y,R+=k,D+=k,O+=z,C+=z}s[0]=Math.min(s[0],w,_,S,E),s[1]=Math.min(s[1],R,O,C,D),s[2]=Math.max(s[2],w,_,S,E),s[3]=Math.max(s[3],R,O,C,D)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],a=t[1],o=t[2],c=t[3],u=s**2+a**2,d=s*o+a*c,f=o**2+c**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-d**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>c?null:[s,o,a,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,a)}static#t(t,i,s,a,o,c,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,v=f*f,A=v*f,w=y*(y*(y*t+3*f*i)+3*v*s)+A*a,S=y*(y*(y*o+3*f*c)+3*v*u)+A*d;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,i,s,a,o,c,u,d,f,g,y,v){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,a,o,c,u,d,-y/g,v);return}const A=g**2-4*y*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,i,s,a,o,c,u,d,(-g+w)/S,v),this.#t(t,i,s,a,o,c,u,d,(-g-w)/S,v)}static bezierBoundingBox(t,i,s,a,o,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,d),this.#e(t,s,o,u,i,a,c,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,a,c,d,3*(-i+3*(a-c)+d),6*(i-2*a+c),3*(a-i),f)}}function D1(h){return decodeURIComponent(escape(h))}let Sh=null,ey=null;function L1(h){return Sh||(Sh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ey=new Map([["","t"]])),h.replaceAll(Sh,(t,i,s)=>i?i.normalize("NFKC"):ey.get(s))}function Zy(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Qy(h)}const Js="pdfjs_internal_id_";function O1(h,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,a,...o]=i;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const c=o.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function ke(h,t,i){return Math.min(Math.max(h,t),i)}function Jy(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Qy(h))}function N1(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Tr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(i=>{i(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,i)=>t+i,0)});class br{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function a(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(br.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&i.push({str:c}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class tv{static setupStorage(t,i,s,a,o){const c=a.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:a,linkService:o}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);c.append(y),u&&br.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[y,v,A]=g.at(-1);if(v+1===y.children.length){g.pop();continue}const w=y.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),A.append(E);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:i,intent:o,linkService:s}),w.children?.length>0)g.push([w,-1,_]);else if(w.value){const E=document.createTextNode(w.value);u&&br.shouldBuildText(S)&&f.push(E),_.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Ji="http://www.w3.org/2000/svg";class oa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Cr(h,t="text"){if(hr(h,document.baseURI)){const i=await fetch(h);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(a.response);return}i(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class xr{constructor({viewBox:t,userUnit:i,scale:s,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=c,s*=i;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,v,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,v=0,A=1;break;case 90:g=0,y=1,v=1,A=0;break;case 270:g=0,y=-1,v=-1,A=0;break;case 0:g=1,y=0,v=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,A=-A);let w,S,_,E;g===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+c,_=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+c,_=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[g*s,y*s,v*s,A*s,w-g*s*d-v*s*f,S-y*s*d-A*s*f],this.width=_,this.height=E}get rawDims(){const t=this.viewBox;return Et(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new xr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return lt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];lt.applyTransform(i,this.transform);const s=[t[2],t[3]];return lt.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return lt.applyInverseTransform(s,this.transform),s}}class Qh extends cs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function El(h){const t=h.length;let i=0;for(;i<t&&h[i].trim()==="";)i++;return h.substring(i,i+5).toLowerCase()==="data:"}function Zh(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function k1(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function B1(h,t="document.pdf"){if(typeof h!="string")return t;if(El(h))return bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return a(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class iy{started=Object.create(null);times=[];time(t){t in this.started&&bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-a}ms
`);return t.join("")}}function hr(h,t){const i=t?URL.parse(h,t):URL.parse(h);return i?.protocol==="http:"||i?.protocol==="https:"}function yi(h){h.preventDefault()}function ne(h){h.preventDefault(),h.stopPropagation()}function P1(h){console.log("Deprecated API usage: "+h)}class Oh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let a=parseInt(i[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(s,a,o,c,u,d))}}function z1(h,{scale:t=1,rotation:i=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new xr({viewBox:o,userUnit:1,scale:t,rotation:i})}function Rr(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(bt(`Not a valid color format: "${h}"`),[0,0,0])}function F1(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of h.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;h.set(i,Rr(s))}t.remove()}function Zt(h){const{a:t,b:i,c:s,d:a,e:o,f:c}=h.getTransform();return[t,i,s,a,o,c]}function Mi(h){const{a:t,b:i,c:s,d:a,e:o,f:c}=h.getTransform().invertSelf();return[t,i,s,a,o,c]}function os(h,t,i=!1,s=!0){if(t instanceof xr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=h,u=Me.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Ni{constructor(){const{pixelRatio:t}=Ni;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,a,o=-1){let c=1/0,u=1/0,d=1/0;s=Ni.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*i))),a!==-1&&(u=a/t,d=a/i);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const Nh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class U1{static get isDarkMode(){return Et(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class I1{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),Et(this,"commentForegroundColor",Rr(s))}}function H1(h,t,i,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),i=Math.round(i*s+a),[h,t,i]}function ny(h,t){const i=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(i,s,a),c=Math.min(i,s,a),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const d=o-c;switch(t[1]=u<.5?d/(o+c):d/(2-o-c),o){case i:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-i)/d+2)*60;break;case a:t[0]=((i-s)/d+4)*60;break}}t[2]=u}function kh(h,t){const i=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,c=o*(1-Math.abs(i/60%2-1)),u=a-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function sy(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function ay(h,t,i){kh(h,i),i.map(sy);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];kh(t,i),i.map(sy);const a=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const ry=new Map;function j1(h,t){const i=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=ry.get(i);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),c=a.subarray(3,6);ny(h,c);const u=a.subarray(6,9);ny(t,u);const d=u[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),ay(c,u,o)<f){let g,y;d?(g=c[2],y=1):(g=0,y=c[2]);const v=.005;for(;y-g>v;){const A=c[2]=(g+y)/2;d===ay(c,u,o)<f?g=A:y=A}c[2]=d?y:g}return kh(c,o),s=lt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),ry.set(i,s),s}function ev({html:h,dir:t,className:i},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=h.split(/(?:\r\n?|\n)/);for(let u=0,d=c.length;u<d;++u){const f=c[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else tv.render({xfaHtml:h,div:a,intent:"richText"});a.firstChild.classList.add("richText",i),s.append(a)}function iv(h){const t=new Path2D;if(!h)return t;for(let i=0,s=h.length;i<s;)switch(h[i++]){case rr.moveTo:t.moveTo(h[i++],h[i++]);break;case rr.lineTo:t.lineTo(h[i++],h[i++]);break;case rr.curveTo:t.bezierCurveTo(h[i++],h[i++],h[i++],h[i++],h[i++],h[i++]);break;case rr.quadraticCurveTo:t.quadraticCurveTo(h[i++],h[i++],h[i++],h[i++]);break;case rr.closePath:t.closePath();break;default:bt(`Unrecognized drawing path operator: ${h[i-1]}`);break}return t}class pr{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,pr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",yi,{signal:i}),t.addEventListener("pointerdown",pr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const a=this.#n.toolbarPosition;if(a){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ne(t)}#h(t){this.#n._focusEventsAllowed=!0,ne(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",yi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",pr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(a,i)):this.#i.append(s,a),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){switch(t){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const a=this.#i.querySelector(s);a&&t==="comment"&&this.addComment(i,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class G1{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",yi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,a=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(i?o.width:0);if(c>s){a=u,s=c;continue}i?u>a&&(a=u):u<a&&(a=u)}return[i?1-a:a,s]}show(t,i,s){const[a,o]=this.#r(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,i,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",yi,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function nv(h,t,i){for(const s of i)t.addEventListener(s,h[s].bind(h))}class Ft{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Ft.#e||=new Set).add(t)}static setPointer(t,i){Ft.#t||=i,Ft.#i??=t}static setTimeStamp(t){Ft.#n=t}static isSamePointerId(t){return Ft.#t===t}static isSamePointerIdOrRemove(t){return Ft.#t===t?!0:(Ft.#e?.delete(t),!1)}static isSamePointerType(t){return Ft.#i===t}static isInitializedAndDifferentPointerType(t){return Ft.#i!==null&&!Ft.isSamePointerType(t)}static isSameTimeStamp(t){return Ft.#n===t}static isUsingMultiplePointers(){return Ft.#e?.size>=1}static clearPointerType(){Ft.#i=null}static clearPointerIds(){Ft.#t=NaN,Ft.#e=null}static clearTimeStamp(){Ft.#n=NaN}}class q1{#t=0;get id(){return`${yr}${this.#t++}`}}class Jh{#t=Zy();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Et(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof i=="string"?(s.url=i,a=await Cr(i,"blob")):i instanceof File?a=s.file=i:i instanceof Blob&&(a=i),a.type==="image/svg+xml"){const o=Jh._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){bt(a),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:a,type:o}=t;return this.#i(`${i}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(i.width,i.height);return a.getContext("2d").drawImage(i,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=a.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class V1{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(c&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Mr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=Me.platform;for(const[s,a,o={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(a.bind(t,...c,i)(),o||ne(i))}}class td{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return F1(t),Et(this,"_colors",t)}convert(t){const i=Rr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,a]of this._colors)if(a.every((o,c)=>o===i[c]))return td._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?lt.makeHexColor(...i):t}}class Pn{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new V1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#T=null;#E=null;#S=null;#x=null;#A=!1;#_=null;#D=new q1;#R=!1;#M=!1;#z=!1;#O=null;#k=null;#F=null;#B=null;#q=null;#C=St.NONE;#w=new Set;#N=null;#U=null;#H=null;#X=null;#Y=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#V=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Pn.prototype,i=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Mr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,a,o,c,u,d,f,g,y,v,A,w,S,_){const E=this._signal=this.#t.signal;this.#V=t,this.#Z=i,this.#J=s,this.#a=a,this.#l=o,this.#U=c,this.#Y=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#T=d.filterFactory,this.#H=f,this.#x=g||null,this.#y=y,this.#b=v,this.#v=A,this.#q=w||null,this.viewParameters={realScale:oa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Et(this,"hcmFilter",this.#H?this.#T.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Et(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Et(this,"_highlightColors",this.#x?new Map(this.#x.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Et(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[a,o]of t){const c=a.endsWith("_HCM");if(s&&c){i.set(a.replace("_HCM",""),o);continue}!s&&!c&&i.set(a,o)}return Et(this,"highlightColors",i)}get highlightColorNames(){return Et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,a){this.#l?.showDialog(this,t,i,s,a)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),i())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=i;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:a,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+c&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*oa.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const v=this.#tt(g),A=this.#C===St.NONE,w=()=>{const S=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(St.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#_||=new G1(this),this.#_.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${yr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#N)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=i,this.#L({hasSelectedText:!0}),!(this.#C!==St.HIGHLIGHT&&this.#C!==St.NONE)&&(this.#C===St.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===St.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===St.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#w)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#w){const a=s.serialize(!0);a&&i.push(a)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){bt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==St.NONE&&!this.isEditorHandlingKeyboard&&Pn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===St.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Lt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#L({isEditing:this.#C!==St.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,a=!1,o=!1){if(this.#C!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===St.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===St.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#i.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const c of this.#i.values())c.addStandaloneCommentButton();t===St.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#r.values())c.updateMode(t);if(t===St.POPUP){this.#n||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const c=new Set,u=[];for(const d of this.#i.values()){const{annotationElementId:f,hasComment:g,deleted:y}=d;f&&c.add(f),g&&!y&&u.push(d.getData())}for(const d of this.#n){const{id:f,popupRef:g,contentsObj:y}=d;g&&y?.str&&!c.has(f)&&!this.#m.has(f)&&u.push(d)}this.#l?.showSidebar(u)}if(!i){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const c of this.#i.values())c.uid===i?(this.setSelected(c),o?c.editComment():a?c.enterInEditMode():c.focus()):c.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Lt.CREATE:this.currentLayer.addNewEditor(i);return;case Lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#X?.get(Lt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Lt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#w)i!==t&&i.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(a,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},a=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#w)i.unselect();this.#w.clear();for(const i of t)i.isEmpty()||(this.#w.add(i),i.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==St.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[a,o]=this.#j,c=[...this.#w],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,i||=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(a,o,c,u)=>{if(this.#i.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)s(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==St.NONE}get imageManager(){return Et(this,"imageManager",new Jh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,v)=>({x:(g-a)/c,y:1-(f+y-s)/o,width:v/c,height:y/o});break;case"180":u=(f,g,y,v)=>({x:1-(f+y-s)/o,y:1-(g+v-a)/c,width:y/o,height:v/c});break;case"270":u=(f,g,y,v)=>({x:1-(g+v-a)/c,y:(f-s)/o,width:v/c,height:y/o});break;default:u=(f,g,y,v)=>({x:(f-s)/o,y:(g-a)/c,width:y/o,height:v/c});break}const d=[];for(let f=0,g=i.rangeCount;f<g;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:v,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||d.push(u(v,A,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#C===St.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const a=this.#B?.get(t);a&&(a.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Oi{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Oi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Oi._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Oi.#f.missing),i.setAttribute("data-l10n-id",Oi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",yi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Oi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Oi.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Oi.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Zo{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const a=this.#i.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-a)/c,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",yi,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,ne(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,ne(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,a;if(i)[s,a]=i;else{[s,a]=this.#i.commentButtonPosition;const{width:g,height:y,x:v,y:A}=this.#i;s=v+s*g,a=A+a*y}const o=this.#i.parent.boundingClientRect,{x:c,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,c+s*d,u+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#o=null,this.#a=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class _l{#t;#e=!1;#n=null;#i;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=a,this.#a=o,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ni.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#g.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",ne,c),o.addEventListener("pointermove",ne,c),o.addEventListener("pointercancel",ne,c),o.addEventListener("pointerup",ne,c),this.#r?.()}if(ne(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ne(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:a,screenY:o}=i,{screenX:c,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:v}=d,A=y-f,w=v-g,S=c-a,_=u-o,E=Math.hypot(S,_)||1,R=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(R-E)<=_l.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(a+c)/2,(o+u)/2];this.#a?.(C,R,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ne(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class dt{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#b=!1;#v=null;#T=0;#E=0;#S=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#_=dt._zIndex++;static _borderLineWidth=-1;static _colorManager=new td;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=dt.prototype._resizeWithKeyboard,i=Pn.TRANSLATE_SMALL,s=Pn.TRANSLATE_BIG;return Et(this,"_resizerKeyboardManager",new Mr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],dt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new Y1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(dt._l10n??=t,dt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),dt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);dt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,a){const[o,c]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(i+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,a]=this.parentDimensions;this.setAt(t*s,i*a,this.width*s,this.height*a),this._onTranslated()}#D([t,i],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:g}=s;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=dt,a=s/t,o=s/i;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,a]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=s,d*=a,o*=s,c*=a,this._mustFixPosition)switch(t){case 0:o=ke(o,0,s-u),c=ke(c,0,a-d);break;case 90:o=ke(o,0,s-d),c=ke(c,u,a);break;case 180:o=ke(o,u,s),c=ke(c,d,a);break;case 270:o=ke(o,d,s),c=ke(c,0,a-u);break}this.x=o/=s,this.y=c/=a;const[f,g]=this.getBaseTranslation();o+=f,c+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return dt.#R(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return dt.#R(t,i,360-this.parentRotation)}#M(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),a.addEventListener("contextmenu",yi,{signal:i}),a.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=Me.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ne,{passive:!1,signal:c}),window.addEventListener("contextmenu",yi,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,i,s,a){this.width=s,this.height=a,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===i&&u===s&&d===a||this.addCommands({cmd:this.#k.bind(this,o,c,u,d),undo:this.#k.bind(this,t,i,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=dt.MIN_SIZE/s,g=dt.MIN_SIZE/a,y=this.#M(this.rotation),v=(B,$)=>[y[0]*B+y[2]*$,y[1]*B+y[3]*$],A=this.#M(360-this.rotation),w=(B,$)=>[A[0]*B+A[2]*$,A[1]*B+A[3]*$];let S,_,E=!1,R=!1;switch(t){case"topLeft":E=!0,S=(B,$)=>[0,0],_=(B,$)=>[B,$];break;case"topMiddle":S=(B,$)=>[B/2,0],_=(B,$)=>[B/2,$];break;case"topRight":E=!0,S=(B,$)=>[B,0],_=(B,$)=>[0,$];break;case"middleRight":R=!0,S=(B,$)=>[B,$/2],_=(B,$)=>[0,$/2];break;case"bottomRight":E=!0,S=(B,$)=>[B,$],_=(B,$)=>[0,0];break;case"bottomMiddle":S=(B,$)=>[B/2,$],_=(B,$)=>[B/2,0];break;case"bottomLeft":E=!0,S=(B,$)=>[0,$],_=(B,$)=>[B,0];break;case"middleLeft":R=!0,S=(B,$)=>[0,$/2],_=(B,$)=>[B,$/2];break}const C=S(u,d),O=_(u,d);let D=v(...O);const k=dt._round(o+D[0]),z=dt._round(c+D[1]);let V=1,Y=1,tt,et;if(i.fromKeyboard)({deltaX:tt,deltaY:et}=i);else{const{screenX:B,screenY:$}=i,[it,X]=this.#l;[tt,et]=this.screenToPageTranslation(B-it,$-X),this.#l[0]=B,this.#l[1]=$}if([tt,et]=w(tt/s,et/a),E){const B=Math.hypot(u,d);V=Y=Math.max(Math.min(Math.hypot(O[0]-C[0]-tt,O[1]-C[1]-et)/B,1/u,1/d),f/u,g/d)}else R?V=ke(Math.abs(O[0]-C[0]-tt),f,1)/u:Y=ke(Math.abs(O[1]-C[1]-et),g,1)/d;const ft=dt._round(u*V),mt=dt._round(d*Y);D=v(..._(ft,mt));const pt=k-D[0],At=z-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ft,this.height=mt,this.x=pt,this.y=At,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new pr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Oi.initialize(dt._l10n),this.#n=new Oi(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Zo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:a}}=this.#i;return{text:i,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Zo(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Zo(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Zo(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),nv(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new _l({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const c=this.#M(this.rotation),u=(k,z)=>[c[0]*k+c[2]*z,c[1]*k+c[3]*z],[d,f]=this.parentDimensions,g=this.x,y=this.y,v=this.width,A=this.height,w=dt.MIN_SIZE/d,S=dt.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/A),w/v,S/A);const _=dt._round(v*o),E=dt._round(A*o);if(_===v&&E===A)return;this.#u||=[g,y,v,A];const R=u(v/2,A/2),C=dt._round(g+R[0]),O=dt._round(y+R[1]),D=u(_/2,E/2);this.x=C-D[0],this.y=O-D[1],this.width=_,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=Me.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#N(t)}#N(t){const{isMac:i}=Me.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#N(f),s&&this._onStopDragging()};i&&(this.#T=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:v}=f;if(v!==this.#s){ne(f);return}const[A,w]=this.screenToPageTranslation(g-this.#T,y-this.#E);this.#T=g,this.#E=y,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",ne,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#x||f.isPrimary)&&u(f),ne(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ne(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,g=i/a,y=this.x*o,v=this.y*c,A=this.width*o,w=this.height*c;switch(s){case 0:return[y+f+u,c-v-g-w+d,y+f+A+u,c-v-g+d];case 90:return[y+g+u,c-v+f+d,y+g+w+u,c-v+f+A+d];case 180:return[y-f-A+u,c-v+g+d,y-f+u,c-v+g+w+d];case 270:return[y-g-w+u,c-v-f-A+d,y-g+u,c-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,a,o,c]=t,u=o-s,d=c-a;switch(this.rotation){case 0:return[s,i-c,u,d];case 90:return[s,i-a,d,u];case 180:return[o,i-a,u,d];case 270:return[o,i-c,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:a,deleted:o,richText:c},uid:u,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return i<c&&a>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const a=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,c]=a.pageDimensions,[u,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=d/c,a.width=f/o,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#P(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#x?.destroy(),this.#x=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,a,o,c]=this.getPDFRect();return[dt._round(s+(o-s)*t),dt._round(a+(c-a)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#X.bind(this),u=this.#Y.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",dt._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const c of i){if(c===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",dt._l10nResizer[f])}}this.#j(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){dt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#b?t:""}#j(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#b&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#P(){this.#b=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let a=this.#S.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},dt._telemetryTimeout),this.#S.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class Y1 extends dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const oy=3285377520,pi=4294901760,Di=65535;class sv{constructor(t){this.h1=t?t&4294967295:oy,this.h2=t?t&4294967295:oy}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,_=t.length;S<_;S++){const E=t.charCodeAt(S);E<=255?i[s++]=E:(i[s++]=E>>>8,i[s++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,c=new Uint32Array(i.buffer,0,a);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,v=461845907,A=y&Di,w=v&Di;for(let S=0;S<a;S++)S&1?(u=c[S],u=u*y&pi|u*A&Di,u=u<<15|u>>>17,u=u*v&pi|u*w&Di,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*y&pi|d*A&Di,d=d<<15|d>>>17,d=d*v&pi|d*w&Di,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[a*4+2]<<16;case 2:u^=i[a*4+1]<<8;case 1:u^=i[a*4],u=u*y&pi|u*A&Di,u=u<<15|u>>>17,u=u*v&pi|u*w&Di,a&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&pi|t*36045&Di,i=i*4283543511&pi|((i<<16|t>>>16)*2950163797&pi)>>>16,t^=i>>>1,t=t*444984403&pi|t*60499&Di,i=i*3301882366&pi|((i<<16|t>>>16)*3120437893&pi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Bh=Object.freeze({map:null,hash:"",transfer:void 0});class ed{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof dt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof dt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let a=!1;if(s!==void 0)for(const[o,c]of Object.entries(i))s[o]!==c&&(a=!0,s[o]=c);else a=!0,this.#i.set(t,i);a&&this.#r(),i instanceof dt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new av(this)}get serializable(){if(this.#i.size===0)return Bh;const t=new Map,i=new sv,s=[],a=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof dt?u.serialize(!1,a):u;d&&(t.set(c,d),i.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:Bh}get editorStats(){let t=null;const i=new Map;let s=0,a=0;for(const o of this.#i.values()){if(!(o instanceof dt)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const v=y.get(g)??0;y.set(g,v+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,c]of i)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class av extends ed{#t;constructor(t){super();const{map:i,hash:s,transfer:a}=t.serializable,o=structuredClone(i,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Yt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Et(this,"modifiedIds",{ids:new Set,hash:""})}}class X1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Ot(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=t,u=new FontFace(a,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw bt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Et(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Et(this,"isSyncFontLoadingSupported",Ne||Me.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Ot(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:i,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Et(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(O,D){return O.charCodeAt(D)<<24|O.charCodeAt(D+1)<<16|O.charCodeAt(D+2)<<8|O.charCodeAt(D+3)&255}function a(O,D,k,z){const V=O.substring(0,D),Y=O.substring(D+k);return V+z+Y}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(O,D){if(++f>30){bt("Load test font never loaded."),D();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(g.bind(null,O,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,y.length,y);const w=16,S=1482184792;let _=s(v,w);for(o=0,c=y.length-3;o<c;o+=4)_=_-S+s(y,o)|0;o<y.length&&(_=_-S+s(y+"XXX",o)|0),v=a(v,w,4,x1(_));const E=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(R);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=O,C.append(D)}this._document.body.append(C),g(y,()=>{C.remove(),i.complete()})}}class $1{#t;constructor(t,i=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Jy(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let a;try{a=t.get(s)}catch(c){bt(`getPathGenerator - ignoring character: "${c}".`)}const o=iv(a);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class ia{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let a=0;for(const f of ia.strings){const g=i.encode(t[f]);s[f]=g,a+=4+g.length}const o=new ArrayBuffer(a),c=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of ia.strings){const g=s[f],y=g.length;u.setUint32(d,y),c.set(g,d+4),d+=4+y}return Ot(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Ot(t<ia.strings.length,"Invalid string index");let i=0;for(let a=0;a<t;a++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class na{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let a=0;for(const v of na.strings){const A=i.encode(t[v]);s[v]=A,a+=4+A.length}a+=4;let o,c,u=1+a;t.style&&(o=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+o.length+4+c.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const v of na.strings){const A=s[v],w=A.length;a+=4+w,g.setUint32(y,w),f.set(A,y+4),y+=4+w}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Ot(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Ot(t<na.strings.length,"Invalid string index");let i=5;for(let a=0;a<t;a++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const a=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class qt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#o;constructor({data:t,extra:i}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),i&&Object.assign(this,i)}#c(t){Ot(t<qt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(i)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Ot(t<qt.numbers.length,"Invalid number index"),this.#o.getFloat64(qt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=qt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=qt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=qt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Ot(t<qt.strings.length,"Invalid string index");let i=qt.#r+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,i+4,s)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=qt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=qt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=qt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#a,t+4,a)),new ia(o.buffer)}get systemFontInfo(){let t=qt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,t+4,s)),new na(a.buffer)}static write(t){const i=t.systemFontInfo?na.write(t.systemFontInfo):null,s=t.cssFontInfo?ia.write(t.cssFontInfo):null,a=new TextEncoder,o={};let c=0;for(const S of qt.strings)o[S]=a.encode(t[S]),c+=4+o[S].length;const u=qt.#r+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;const v=qt.bools.length;let A=0,w=0;for(let S=0;S<v;S++){const _=t[qt.bools[S]];A|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||S===v-1)&&(g.setUint8(y++,A),A=0,w=0)}Ot(y===qt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of qt.numbers)g.setFloat64(y,t[S]),y+=8;if(Ot(y===qt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Ot(y===qt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Ot(y===qt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Ot(y===qt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(qt.#r,0),y+=4;for(const S of qt.strings){const _=o[S],E=_.length;g.setUint32(y,E),f.set(_,y+4),y+=4+E}if(g.setUint32(qt.#r,y-qt.#r-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Ot(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Ot(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Ot(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class be{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,a=[],o=[],c=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,d=t[1],a=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(a.length/2),y=Math.floor(o.length/3),v=c.length,A=u.length;let w=0;for(const D of u)w+=1,w=Math.ceil(w/4)*4,w+=4+D.coords.length*4,w+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(w+=4);const S=20+g*8+y*3+v*8+(s?16:0)+(f?3:0)+w,_=new ArrayBuffer(S),E=new DataView(_),R=new Uint8Array(_);E.setUint8(be.#t,i),E.setUint8(be.#e,s?1:0),E.setUint8(be.#n,f?1:0),E.setUint8(be.#i,d),E.setUint32(be.#r,g,!0),E.setUint32(be.#a,y,!0),E.setUint32(be.#s,v,!0),E.setUint32(be.#o,A,!0);let C=20;new Float32Array(_,C,g*2).set(a),C+=g*8,R.set(o,C),C+=y*3;for(const[D,k]of c)E.setFloat32(C,D,!0),C+=4,E.setUint32(C,parseInt(k.slice(1),16),!0),C+=4;if(s)for(const D of s)E.setFloat32(C,D,!0),C+=4;f&&(R.set(f,C),C+=3);for(let D=0;D<u.length;D++){const k=u[D];E.setUint8(C,k.type),C+=1,C=Math.ceil(C/4)*4,E.setUint32(C,k.coords.length,!0),C+=4,new Int32Array(_,C,k.coords.length).set(k.coords),C+=k.coords.length*4,E.setUint32(C,k.colors.length,!0),C+=4,new Int32Array(_,C,k.colors.length).set(k.colors),C+=k.colors.length*4,k.verticesPerRow!==void 0&&(E.setUint32(C,k.verticesPerRow,!0),C+=4)}return _}getIR(){const t=this.view,i=this.data[be.#t],s=!!this.data[be.#e],a=!!this.data[be.#n],o=t.getUint32(be.#r,!0),c=t.getUint32(be.#a,!0),u=t.getUint32(be.#s,!0),d=t.getUint32(be.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const v=[];for(let _=0;_<u;++_){const E=t.getFloat32(f,!0);f+=4;const R=t.getUint32(f,!0);f+=4,v.push([E,`#${R.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let _=0;_<4;++_)A.push(t.getFloat32(f,!0)),f+=4}let w=null;a&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let _=0;_<d;++_){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const R=t.getUint32(f,!0);f+=4;const C=new Int32Array(this.buffer,f,R);f+=R*4;const O=t.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,O);f+=O*4;const k={type:E,coords:C,colors:D};E===Dh.LATTICE&&(k.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(k)}if(i===1)return["RadialAxial","axial",A,v,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,v,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const _=this.data[be.#i];let E=null;if(g.length>0){let R=g[0],C=g[0],O=g[1],D=g[1];for(let k=0;k<g.length;k+=2){const z=g[k],V=g[k+1];R=R>z?z:R,O=O>V?V:O,C=C<z?z:C,D=D<V?V:D}E=[R,O,C,D]}return["Mesh",_,g,y,S,E,A,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}function K1(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Ne)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function W1(h){if(Ne&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Tr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jo(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const Ph=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,Q1=h=>typeof h=="object"&&typeof h?.name=="string",Z1=O1.bind(null,Ph,Q1);class J1{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,i,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){bt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(i,a)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const tl={DATA:1,ERROR:2},fe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ly(){}function qe(h){if(h instanceof Bn||h instanceof Lh||h instanceof ty||h instanceof pl||h instanceof bh)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new Bn(h.message);case"InvalidPDFException":return new Lh(h.message);case"PasswordException":return new ty(h.message,h.code);case"ResponseException":return new pl(h.message,h.status,h.missing);case"UnknownErrorException":return new bh(h.message,h.details)}return new bh(h.message,h.toString())}class dr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===tl.DATA)a.resolve(t.data);else if(t.callback===tl.ERROR)a.reject(qe(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(c){o.postMessage({sourceName:s,targetName:a,callback:tl.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:a,callback:tl.ERROR,callbackId:t.callbackId,reason:qe(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:i},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,i,s,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:c,targetName:u,stream:fe.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Ot(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:fe.CANCEL,streamId:o,reason:qe(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:fe.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:fe.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Ot(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:fe.ERROR,streamId:i,reason:qe(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:fe.START_COMPLETE,streamId:i,reason:qe(f)})})}#i(t){const i=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case fe.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(qe(t.reason));break;case fe.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(qe(t.reason));break;case fe.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||ly).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:i,reason:qe(f)})});break;case fe.ENQUEUE:if(Ot(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case fe.CLOSE:if(Ot(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,i);break;case fe.ERROR:Ot(c,"error should have stream controller"),c.controller.error(qe(t.reason)),this.#r(c,i);break;case fe.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(qe(t.reason)),this.#r(c,i);break;case fe.CANCEL:if(!u)break;const d=qe(t.reason);Promise.try(u.onCancel||ly,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:fe.CANCEL_COMPLETE,streamId:i,reason:qe(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class rv{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Yt("Abstract method `_createCanvas` called.")}}class tw extends rv{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class ov{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class cy extends ov{async _fetch(t){const i=await Cr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Tr(i)}}class lv{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,a,o){return"none"}destroy(t=!1){}}class ew extends lv{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(Ji,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Ji,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[i,s,a]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,c[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(El(i)?bt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Wy(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,a,o]=this.#d(t),c=t.length===1?s:`${s}${a}${o}`;if(i=this.#o.get(c),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(c,d);const f=this.#g(u);return this.#p(s,a,o,f),d}addHCMFilter(t,i){const s=`${t}-${i}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!i))return o.url;const c=this.#b(t);t=lt.makeHexColor(...c);const u=this.#b(i);if(i=lt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const w=A/255;d[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const v=(A,w)=>{const S=c[A]/255,_=u[A]/255,E=new Array(w+1);for(let R=0;R<=w;R++)E[R]=S+R/w*(_-S);return E.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),a=`alpha_${s}`;if(i=this.#o.get(a),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(a,c);const u=this.#g(o);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",i=this.#o.get(a),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(a,c);const u=this.#g(o);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,a,o){const c=`${i}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[d,f]=[i,s].map(this.#b.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,A]=[a,o].map(this.#b.bind(this));y<g&&([g,y,v,A]=[y,g,A,v]),this.#l.style.color="";const w=(E,R,C)=>{const O=new Array(256),D=(y-g)/C,k=E/255,z=(R-E)/(255*C);let V=0;for(let Y=0;Y<=C;Y++){const tt=Math.round(g+Y*D),et=k+Y*z;for(let ft=V;ft<=tt;ft++)O[ft]=et;V=tt+1}for(let Y=V;Y<256;Y++)O[Y]=O[V-1];return O.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,_=u.filter=this.#g(S);return this.#m(_),this.#p(w(v[0],A[0],5),w(v[1],A[1],5),w(v[2],A[2],5),_),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const i=this.#r.createElementNS(Ji,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(Ji,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#r.createElementNS(Ji,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const a=this.#r.createElementNS(Ji,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#p(t,i,s,a){const o=this.#r.createElementNS(Ji,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#y(t,i){const s=this.#r.createElementNS(Ji,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#b(t){return this.#l.style.color=t,Rr(getComputedStyle(this.#l).getPropertyValue("color"))}}class cv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class uy extends cv{async _fetch(t){const i=await Cr(t,"arraybuffer");return new Uint8Array(i)}}class uv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class hy extends uv{async _fetch(t){const i=await Cr(t,"arraybuffer");return new Uint8Array(i)}}Ne&&bt("Please use the `legacy` build in Node.js environments.");async function id(h){const i=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(i)}class iw extends lv{}class nw extends rv{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class sw extends ov{async _fetch(t){return id(t)}}class aw extends cv{async _fetch(t){return id(t)}}class rw extends uv{async _fetch(t){return id(t)}}const Ks="__forcedDependency",{floor:dy,ceil:fy}=Math;function el(h,t,i,s,a,o){h[t*4+0]=Math.min(h[t*4+0],i),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const zh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class ow{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===zh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const il=(h,t)=>{if(!h)return;let i=h.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},h.set(t,i)),i};class lw{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ks]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(zh,i.length)):this.#u.fill(zh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ks]:{__proto__:this.#e[Ks]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(il(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(il(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(il(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#a.push(lt.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(Ks,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ks,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,a,o,c){const u=lt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform()),d=[1/0,1/0,-1/0,-1/0];lt.axialAlignedBoundingBox([s,o,a,c],u,d);const f=lt.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,a,o,c){const u=this.#s;if(u[0]===1/0)return this;const d=lt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform());if(u[0]===-1/0)return lt.axialAlignedBoundingBox([s,o,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return lt.axialAlignedBoundingBox([s,o,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,a=1,o=0,c=0,u){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],lt.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||c!==0)&&lt.scaleMinMax([a,0,0,-a,o,c],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=c-y.actualBoundingBoxAscent&&g[3]>=c+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,a=this.#t,o=this.#e;for(const c of i)c in this.#t?s.add(a[c]):c in o&&o[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[Ks]),this.#p){const s=il(this.#p,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#i.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=dy(this.#o[0]*256/this.#f),a=dy(this.#o[1]*256/this.#m),o=fy(this.#o[2]*256/this.#f),c=fy(this.#o[3]*256/this.#m);el(this.#g,t,s,a,o,c);for(const u of this.#l)u!==t&&el(this.#g,u,s,a,o,c);for(const u of this.#i)u!==t&&el(this.#g,u,s,a,o,c);for(const u of this.#r)u!==t&&el(this.#g,u,s,a,o,c);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new ow(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class gl{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof gl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,a,o,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,a,o,c),this}recordBBox(t,i,s,a,o,c){return this.#n||this.#t.recordBBox(this.#e,i,s,a,o,c),this}recordCharacterBBox(t,i,s,a,o,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,a,o,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const gi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Fh(h,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],i,s),h.clip(a)}class nd{isModifyingCurrentTransform(){return!1}getPattern(){Yt("Abstract method `getPattern` called.")}}class cw extends nd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,a){let o;if(a===Re.STROKE||a===Re.FILL){const c=i.current.getClippedPathBoundingBox(a,Zt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),s=lt.transform(s,[1,0,0,1,c[0],c[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),Fh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Fh(t,this._bbox),o=this._createGradient(t);return o}}function wh(h,t,i,s,a,o,c,u){const d=t.coords,f=t.colors,g=h.data,y=h.width*4;let v;d[i+1]>d[s+1]&&(v=i,i=s,s=v,v=o,o=c,c=v),d[s+1]>d[a+1]&&(v=s,s=a,a=v,v=c,c=u,u=v),d[i+1]>d[s+1]&&(v=i,i=s,s=v,v=o,o=c,c=v);const A=(d[i]+t.offsetX)*t.scaleX,w=(d[i+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,_=(d[s+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,R=(d[a+1]+t.offsetY)*t.scaleY;if(w>=R)return;const C=f[o],O=f[o+1],D=f[o+2],k=f[c],z=f[c+1],V=f[c+2],Y=f[u],tt=f[u+1],et=f[u+2],ft=Math.round(w),mt=Math.round(R);let pt,At,B,$,it,X,q,x;for(let F=ft;F<=mt;F++){if(F<_){const at=F<w?0:(w-F)/(w-_);pt=A-(A-S)*at,At=C-(C-k)*at,B=O-(O-z)*at,$=D-(D-V)*at}else{let at;F>R?at=1:_===R?at=0:at=(_-F)/(_-R),pt=S-(S-E)*at,At=k-(k-Y)*at,B=z-(z-tt)*at,$=V-(V-et)*at}let j;F<w?j=0:F>R?j=1:j=(w-F)/(w-R),it=A-(A-E)*j,X=C-(C-Y)*j,q=O-(O-tt)*j,x=D-(D-et)*j;const J=Math.round(Math.min(pt,it)),nt=Math.round(Math.max(pt,it));let ct=y*F+J*4;for(let at=J;at<=nt;at++)j=(pt-at)/(pt-it),j<0?j=0:j>1&&(j=1),g[ct++]=At-(At-X)*j|0,g[ct++]=B-(B-q)*j|0,g[ct++]=$-($-x)*j|0,g[ct++]=255}}function uw(h,t,i){const s=t.coords,a=t.colors;let o,c;switch(t.type){case Dh.LATTICE:const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)wh(h,i,s[g],s[g+1],s[g+u],a[g],a[g+1],a[g+u]),wh(h,i,s[g+u+1],s[g+1],s[g+u],a[g+u+1],a[g+1],a[g+u])}break;case Dh.TRIANGLES:for(o=0,c=s.length;o<c;o+=3)wh(h,i,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class hw extends nd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,w=g/v,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/w},_=y+4,E=v+4,R=s.getCanvas("mesh",_,E),C=R.context,O=C.createImageData(y,v);if(i){const k=O.data;for(let z=0,V=k.length;z<V;z+=4)k[z]=i[0],k[z+1]=i[1],k[z+2]=i[2],k[z+3]=255}for(const k of this._figures)uw(O,k,S);return C.putImageData(O,2,2),{canvas:R.canvas,offsetX:u-2*A,offsetY:d-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,a){Fh(t,this._bbox);const o=new Float32Array(2);if(a===Re.SHADING)lt.singularValueDecompose2dScale(Zt(t),o);else if(this.matrix){lt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;lt.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else lt.singularValueDecompose2dScale(i.baseTransform,o);const c=this._createMeshCanvas(o,a===Re.SHADING?null:this._background,i.cachedCanvases);return a!==Re.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class dw extends nd{getPattern(){return"hotpink"}}function fw(h){switch(h[0]){case"RadialAxial":return new cw(h);case"Mesh":return new hw(h);case"Dummy":return new dw}throw new Error(`Unknown IR type: ${h[0]}`)}const py={COLORED:1,UNCOLORED:2};class sd{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,i){const{bbox:s,operatorList:a,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),wl("TilingType: "+c);const y=s[0],v=s[1],A=s[2],w=s[3],S=A-y,_=w-v,E=new Float32Array(2);lt.singularValueDecompose2dScale(this.matrix,E);const[R,C]=E;lt.singularValueDecompose2dScale(this.baseTransform,E);const O=R*E[0],D=C*E[1];let k=S,z=_,V=!1,Y=!1;const tt=Math.ceil(f*O),et=Math.ceil(g*D),ft=Math.ceil(S*O),mt=Math.ceil(_*D);tt>=ft?k=f:V=!0,et>=mt?z=g:Y=!0;const pt=this.getSizeAndScale(k,this.ctx.canvas.width,O),At=this.getSizeAndScale(z,this.ctx.canvas.height,D),B=t.cachedCanvases.getCanvas("pattern",pt.size,At.size),$=B.context,it=d.createCanvasGraphics($,i);if(it.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(it,o,u),$.translate(-pt.scale*y,-At.scale*v),it.transform(0,pt.scale,0,0,At.scale,0,0),$.save(),it.dependencyTracker?.save(),this.clipBbox(it,y,v,A,w),it.baseTransform=Zt(it.ctx),it.executeOperatorList(a),it.endDrawing(),it.dependencyTracker?.restore(),$.restore(),V||Y){const X=B.canvas;V&&(k=f),Y&&(z=g);const q=this.getSizeAndScale(k,this.ctx.canvas.width,O),x=this.getSizeAndScale(z,this.ctx.canvas.height,D),F=q.size,j=x.size,J=t.cachedCanvases.getCanvas("pattern-workaround",F,j),nt=J.context,ct=V?Math.floor(S/f):0,at=Y?Math.floor(_/g):0;for(let Tt=0;Tt<=ct;Tt++)for(let st=0;st<=at;st++)nt.drawImage(X,F*Tt,j*st,F,j,0,0,F,j);return{canvas:J.canvas,scaleX:q.scale,scaleY:x.scale,offsetX:y,offsetY:v}}return{canvas:B.canvas,scaleX:pt.scale,scaleY:At.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,i,s){const a=Math.max(sd.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,a,o){const c=a-i,u=o-s;t.ctx.rect(i,s,c,u),lt.axialAlignedBoundingBox([i,s,a,o],Zt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const a=t.ctx,o=t.current;switch(i){case py.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=c,a.strokeStyle=o.strokeColor=u;break;case py.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new C1(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,a,o){let c=s;a!==Re.SHADING&&(c=lt.transform(c,i.baseTransform),this.matrix&&(c=lt.transform(c,this.matrix)));const u=this.createPatternCanvas(i,o);let d=new DOMMatrix(c);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function pw({src:h,srcPos:t=0,dest:i,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Me.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],g=s>>3,y=s&7,v=h.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<a;w++){for(const _=t+g;t<_;t++){const E=t<v?h[t]:255;i[A++]=E&128?f:d,i[A++]=E&64?f:d,i[A++]=E&32?f:d,i[A++]=E&16?f:d,i[A++]=E&8?f:d,i[A++]=E&4?f:d,i[A++]=E&2?f:d,i[A++]=E&1?f:d}if(y===0)continue;const S=t<v?h[t++]:255;for(let _=0;_<y;_++)i[A++]=S&1<<7-_?f:d}return{srcPos:t,destPos:A}}const gy=16,my=100,gw=15,yy=10,Ve=16,Eh=new DOMMatrix,ni=new Float32Array(2),ta=new Float32Array([1/0,1/0,-1/0,-1/0]);function mw(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,a,o,c,u){t.transform(i,s,a,o,c,u),this.__originalTransform(i,s,a,o,c,u)},h.setTransform=function(i,s,a,o,c,u){t.setTransform(i,s,a,o,c,u),this.__originalSetTransform(i,s,a,o,c,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){t.rotate(i),this.__originalRotate(i)},h.clip=function(i){t.clip(i),this.__originalClip(i)},h.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},h.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},h.bezierCurveTo=function(i,s,a,o,c,u){t.bezierCurveTo(i,s,a,o,c,u),this.__originalBezierCurveTo(i,s,a,o,c,u)},h.rect=function(i,s,a,o){t.rect(i,s,a,o),this.__originalRect(i,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class yw{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,i,s)):(a=this.canvasFactory.create(i,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function nl(h,t,i,s,a,o,c,u,d,f){const[g,y,v,A,w,S]=Zt(h);if(y===0&&v===0){const R=c*g+w,C=Math.round(R),O=u*A+S,D=Math.round(O),k=(c+d)*g+w,z=Math.abs(Math.round(k)-C)||1,V=(u+f)*A+S,Y=Math.abs(Math.round(V)-D)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(A),C,D),h.drawImage(t,i,s,a,o,0,0,z,Y),h.setTransform(g,y,v,A,w,S),[z,Y]}if(g===0&&A===0){const R=u*v+w,C=Math.round(R),O=c*y+S,D=Math.round(O),k=(u+f)*v+w,z=Math.abs(Math.round(k)-C)||1,V=(c+d)*y+S,Y=Math.abs(Math.round(V)-D)||1;return h.setTransform(0,Math.sign(y),Math.sign(v),0,C,D),h.drawImage(t,i,s,a,o,0,0,Y,z),h.setTransform(g,y,v,A,w,S),[Y,z]}h.drawImage(t,i,s,a,o,c,u,d,f);const _=Math.hypot(g,y),E=Math.hypot(v,A);return[_*d,E*f]}class vy{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Mh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ce.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=ta.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,i=null){const s=this.minMax.slice();if(t===Re.STROKE){i||Yt("Stroke bounding box must include transform."),lt.singularValueDecompose2dScale(i,ni);const a=ni[0]*this.lineWidth/2,o=ni[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ta,0)}getClippedPathBoundingBox(t=Re.FILL,i=null){return lt.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function by(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const i=t.height,s=t.width,a=i%Ve,o=(i-a)/Ve,c=a===0?o:o+1,u=h.createImageData(s,Ve);let d=0,f;const g=t.data,y=u.data;let v,A,w,S;if(t.kind===ul.GRAYSCALE_1BPP){const _=g.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),R=E.length,C=s+7>>3,O=4294967295,D=Me.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(w=v<o?Ve:a,f=0,A=0;A<w;A++){const k=_-d;let z=0;const V=k>C?s:k*8-7,Y=V&-8;let tt=0,et=0;for(;z<Y;z+=8)et=g[d++],E[f++]=et&128?O:D,E[f++]=et&64?O:D,E[f++]=et&32?O:D,E[f++]=et&16?O:D,E[f++]=et&8?O:D,E[f++]=et&4?O:D,E[f++]=et&2?O:D,E[f++]=et&1?O:D;for(;z<V;z++)tt===0&&(et=g[d++],tt=128),E[f++]=et&tt?O:D,tt>>=1}for(;f<R;)E[f++]=0;h.putImageData(u,0,v*Ve)}}else if(t.kind===ul.RGBA_32BPP){for(A=0,S=s*Ve*4,v=0;v<o;v++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=Ve;v<c&&(S=s*a*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===ul.RGB_24BPP)for(w=Ve,S=s*w,v=0;v<c;v++){for(v>=o&&(w=a,S=s*w),f=0,A=S;A--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;h.putImageData(u,0,v*Ve)}else throw new Error(`bad image kind: ${t.kind}`)}function Ay(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,a=i%Ve,o=(i-a)/Ve,c=a===0?o:o+1,u=h.createImageData(s,Ve);let d=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const v=y<o?Ve:a;({srcPos:d}=pw({src:f,srcPos:d,dest:g,width:s,height:v,nonBlackColor:0})),h.putImageData(u,0,y*Ve)}}function or(h,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function sl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Sy(h,t){if(t)return!0;lt.singularValueDecompose2dScale(h,ni);const i=Math.fround(Ni.pixelRatio*oa.PDF_TO_CSS_UNITS);return ni[0]<=i&&ni[1]<=i}const vw=["butt","round","square"],bw=["miter","round","bevel"],Aw={},wy={};class sa{constructor(t,i,s,a,o,{optionalContentConfig:c,markedContentStack:u=null},d,f,g){this.ctx=t,this.current=new vy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new yw(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),sl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(t,i,s,a,o){const c=t.argsArray,u=t.fnArray;let d=i||0;const f=c.length;if(f===d)return d;const g=f-d>yy&&typeof s=="function",y=g?Date.now()+gw:0;let v=0;const A=this.commonObjs,w=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],_=c[d]??null,S!==vr.dependency)_===null?this[S](d):this[S](d,..._);else for(const E of _){this.dependencyTracker?.recordNamedData(E,d);const R=E.startsWith("g_")?A:w;if(!R.has(E))return R.get(E,s),d}if(d++,d===f)return d;if(g&&++v>yy){if(Date.now()>y)return s(),d;v=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=a,f="prescale1",g,y;for(;o>2&&u>1||c>2&&d>1;){let v=u,A=d;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),g=this.cachedCanvases.getCanvas(f,v,A),y=g.context,y.clearRect(0,0,v,A),y.drawImage(t,0,0,u,d,0,0,v,A),t=g.canvas,u=v,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,i){const s=this.ctx,{width:a,height:o}=i,c=this.current.fillColor,u=this.current.patternFill,d=Zt(s);let f,g,y,v;if((i.bitmap||i.data)&&i.count>1){const tt=i.bitmap||i.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(tt),f||(f=new Map,this._cachedBitmapsMap.set(tt,f));const et=f.get(g);if(et&&!u){const ft=Math.round(Math.min(d[0],d[2])+d[4]),mt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,gi.transformAndFill),{canvas:et,offsetX:ft,offsetY:mt}}y=et}y||(v=this.cachedCanvases.getCanvas("maskCanvas",a,o),Ay(v.context,i));let A=lt.transform(d,[1/a,0,0,-1/o,0,0]);A=lt.transform(A,[1,0,0,1,0,-o]);const w=ta.slice();lt.axialAlignedBoundingBox([0,0,a,o],A,w);const[S,_,E,R]=w,C=Math.round(E-S)||1,O=Math.round(R-_)||1,D=this.cachedCanvases.getCanvas("fillCanvas",C,O),k=D.context,z=S,V=_;k.translate(-z,-V),k.transform(...A),y||(y=this._scaleImage(v.canvas,Mi(k)),y=y.img,f&&u&&f.set(g,y)),k.imageSmoothingEnabled=Sy(Zt(k),i.interpolate),nl(k,y,0,0,y.width,y.height,0,0,a,o),k.globalCompositeOperation="source-in";const Y=lt.transform(Mi(k),[1,0,0,1,-z,-V]);return k.fillStyle=u?c.getPattern(s,this,Y,Re.FILL,t):c,k.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,D.canvas)),this.dependencyTracker?.recordDependencies(t,gi.transformAndFill),{canvas:D.canvas,offsetX:Math.round(z),offsetY:Math.round(V)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=vw[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=bw[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(i),a.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,a]of i)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),or(this.suspendedCtx,c),mw(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),or(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,a){const o=a[0],c=a[1],u=a[2]-o,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,a,o,c,u,d,f,g,y){let v=t.canvas,A=d-g,w=f-y;if(c)if(A<0||w<0||A+s>v.width||w+a>v.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,a),E=_.context;E.drawImage(v,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,s,a),E.globalCompositeOperation="source-over",v=_.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(A,w,s,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,s,a),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,a),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(v,A,w,s,a,d,f,s,a),i.restore()}save(t){this.inSMaskMode&&or(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&or(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,a,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,a,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const c=i===vr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=iv(o)),lt.axialAlignedBoundingBox(a,Zt(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Mi(a),Re.STROKE,t),c){const u=new Path2D;u.addPath(i,a.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),a.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,gi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Re.STROKE,Zt(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const a=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Mi(a),Re.FILL,t),f){const g=new Path2D;g.addPath(i,a.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(i,"evenodd"),this.pendingEOFill=!1):a.fill(i)),this.dependencyTracker?.recordDependencies(t,gi.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,d)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,gi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Aw}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=wy}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;i!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(i!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:c,x:u,y:d,fontSize:f,path:g}of i)g&&a.addPath(g,new DOMMatrix(c).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const a=this.commonObjs.get(i),o=this.current;if(!a)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=a.fontMatrix||Mh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&bt("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const c=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=s;s<gy?g=gy:s>my&&(g=my),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),a}paintChar(t,i,s,a,o,c){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,v=g&Ce.FILL_STROKE_MASK,A=!!(g&Ce.ADD_TO_PATH_FLAG),w=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,i)),_&&(f.disableFontFace||w||S)){u.save(),u.translate(s,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(v===Ce.FILL||v===Ce.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const R=this.#n(_,E,o);u.fill(R)}else u.fill(_);if(v===Ce.STROKE||v===Ce.FILL_STROKE)if(c){E||=u.getTransform(),u.setTransform(...c);const{a:R,b:C,c:O,d:D}=E,k=lt.inverseTransform(c),z=lt.transform([R,C,O,D,0,0],k);lt.singularValueDecompose2dScale(z,ni),u.lineWidth*=Math.max(ni[0],ni[1])/y,u.stroke(this.#n(_,E,c))}else u.lineWidth/=y,u.stroke(_);u.restore()}else(v===Ce.FILL||v===Ce.FILL_STROKE)&&(u.fillText(i,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(i))),(v===Ce.STROKE||v===Ce.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(i)).recordDependencies(t,gi.stroke),u.strokeText(i,s,a));A&&((this.pendingTextPaths||=[]).push({transform:Zt(u),x:s,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<i.length;a+=4)if(i[a]>0&&i[a]<255){s=!0;break}return Et(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,gi.showText).resetBBox(t),this.current.textRenderingMode&Ce.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,v=i.length,A=a.vertical,w=A?1:-1,S=a.defaultVMetrics,_=o*s.fontMatrix[0],E=s.textRenderingMode===Ce.FILL&&!a.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),g>0?c.scale(y,-1):c.scale(y,1);let R,C;if(s.patternFill){c.save();const V=s.fillColor.getPattern(c,this,Mi(c),Re.FILL,t);R=Zt(c),c.restore(),c.fillStyle=V}if(s.patternStroke){c.save();const V=s.strokeColor.getPattern(c,this,Mi(c),Re.STROKE,t);C=Zt(c),c.restore(),c.strokeStyle=V}let O=s.lineWidth;const D=s.textMatrixScale;if(D===0||O===0){const V=s.textRenderingMode&Ce.FILL_STROKE_MASK;(V===Ce.STROKE||V===Ce.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=D;if(u!==1&&(c.scale(u,u),O/=u),c.lineWidth=O,a.isInvalidPDFjsFont){const V=[];let Y=0;for(const et of i)V.push(et.unicode),Y+=et.width;const tt=V.join("");if(c.fillText(tt,0,0),this.dependencyTracker!==null){const et=c.measureText(tt);this.dependencyTracker.recordBBox(t,this.ctx,-et.actualBoundingBoxLeft,et.actualBoundingBoxRight,-et.actualBoundingBoxAscent,et.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=Y*_*y,c.restore(),this.compose();return}let k=0,z;for(z=0;z<v;++z){const V=i[z];if(typeof V=="number"){k+=w*V*o/1e3;continue}let Y=!1;const tt=(V.isSpace?f:0)+d,et=V.fontChar,ft=V.accent;let mt,pt,At=V.width;if(A){const it=V.vmetric||S,X=-(V.vmetric?it[1]:At*.5)*_,q=it[2]*_;At=it?-it[0]:At,mt=X/u,pt=(k+q)/u}else mt=k/u,pt=0;let B;if(a.remeasure&&At>0){B=c.measureText(et);const it=B.width*1e3/o*u;if(At<it&&this.isFontSubpixelAAEnabled){const X=At/it;Y=!0,c.save(),c.scale(X,1),mt/=X}else At!==it&&(mt+=(At-it)/2e3*o/u)}if(this.contentVisible&&(V.isInFont||a.missingFile)){if(E&&!ft)c.fillText(et,mt,pt),this.dependencyTracker?.recordCharacterBBox(t,c,B?{bbox:null}:a,o/u,mt,pt,()=>B??c.measureText(et));else if(this.paintChar(t,et,mt,pt,R,C),ft){const it=mt+o*ft.offset.x/u,X=pt-o*ft.offset.y/u;this.paintChar(t,ft.fontChar,it,X,R,C)}}const $=A?At*_-tt*g:At*_+tt*g;k+=$,Y&&c.restore()}A?s.y-=k:s.x+=k*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,a=this.current,o=a.font,c=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,y=a.textHScale*u,v=a.fontMatrix||Mh,A=i.length,w=a.textRenderingMode===Ce.INVISIBLE;let S,_,E,R;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new gl(C,t):null,S=0;S<A;++S){if(_=i[S],typeof _=="number"){R=d*_*c/1e3,this.ctx.translate(R,0),a.x+=R*y;continue}const O=(_.isSpace?g:0)+f,D=o.charProcOperatorList[_.operatorListId];D?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...v),this.executeOperatorList(D),this.restore()):bt(`Type3 character "${_.operatorListId}" is not available.`);const k=[_.width,0];lt.applyTransform(k,v),E=k[0]*c+O,s.translate(E,0),a.x+=E*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,a,o,c,u){const d=new Path2D;d.rect(a,o,c-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,o,u).recordClipBox(t,this.ctx,a,c,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const a=this.baseTransform||Zt(this.ctx),o={createCanvasGraphics:(c,u)=>new sa(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new gl(this.dependencyTracker,u,!0):null)};s=new sd(i,this.ctx,o,a)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let a;return this.cachedPatterns.has(i)?a=this.cachedPatterns.get(i):(a=fw(this.getObject(t,i)),this.cachedPatterns.set(i,a)),s&&(a.matrix=s),a}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,i);s.fillStyle=a.getPattern(s,this,Mi(s),Re.SHADING,t);const o=Mi(s);if(o){const{width:c,height:u}=s.canvas,d=ta.slice();lt.axialAlignedBoundingBox([0,0,c,u],o,d);const[f,g,y,v]=d;this.ctx.fillRect(f,g,y-f,v-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,gi.transform).recordDependencies(t,gi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Yt("Should not call beginInlineImage")}beginImageData(){Yt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Zt(this.ctx),s)){lt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,c,u]=s,d=new Path2D;d.rect(a,o,c-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||wl("TODO: Support non-isolated groups."),i.knockout&&bt("Knockout groups not supported.");const a=Zt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=ta.slice();lt.axialAlignedBoundingBox(i.bbox,Zt(s),o);const c=[0,0,s.canvas.width,s.canvas.height];o=lt.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,f,g),A=v.context;A.translate(-u,-d),A.transform(...a);let w=new Path2D;const[S,_,E,R]=i.bbox;if(w.rect(S,_,E-S,R-_),i.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(i.matrix)),w=C}A.clip(w),i.smask&&this.smaskStack.push({canvas:v.canvas,context:A,offsetX:u,offsetY:d,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),or(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Zt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=ta.slice();lt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,a,o,c){if(this.#t(),sl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,lt.singularValueDecompose2dScale(Zt(this.ctx),ni);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:v,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(ni[0],0,0,-ni[1],0,d*ni[1]),sl(this.ctx)}else{sl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new vy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const a=this.ctx,o=this._createMaskCanvas(t,i),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,a=0,o=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const d=this.ctx;d.save();const f=Zt(d);d.transform(s,a,o,c,0,0);const g=this._createMaskCanvas(t,i);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,v=u.length;y<v;y+=2){const A=lt.transform(f,[s,a,o,c,u[y],u[y+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,gi.transformAndFill);for(const c of i){const{data:u,width:d,height:f,transform:g}=c,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=y.context;v.save();const A=this.getObject(t,u,c);Ay(v,A),v.globalCompositeOperation="source-in",v.fillStyle=o?a.getPattern(v,this,Mi(s),Re.FILL,t):a,v.fillRect(0,0,d,f),v.restore(),s.save(),s.transform(...g),s.scale(1,-1),nl(s,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,a,o){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){bt("Dependent image isn't ready yet");return}const u=c.width,d=c.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,a=i.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;by(g,i),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Mi(o));o.imageSmoothingEnabled=Sy(Zt(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,gi.imageXObject).recordOperation(t),nl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;by(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)a.save(),a.transform(...c.transform),a.scale(1,-1),nl(a,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,gi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===wy?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Zt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:a,d:o}=this.ctx.getTransform();let c,u;if(s===0&&a===0){const d=Math.abs(i),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const g=d*t;c=u=g<1?1/g:1}else if(t===0)c=1/d,u=1/f;else{const g=d*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(i*o-s*a),f=Math.hypot(i,s),g=Math.hypot(a,o);if(t===0)c=g/d,u=f/d;else{const y=t*d;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,c),Eh.a=1/o,Eh.d=1/c;const d=new Path2D;if(d.addPath(t,Eh),u.length>0){const f=Math.max(o,c);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in vr)sa.prototype[h]!==void 0&&(sa.prototype[vr[h]]=sa.prototype[h]);class aa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Sw{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Qs=Symbol("INTERNAL");class ww{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&ii.DISPLAY),this.#e=!!(t&ii.PRINT),this.name=i,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==Qs&&Yt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class Ew{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=ii.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new ww(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Qs,!1);for(const s of t.on)this.#e.get(s)._setVisible(Qs,!0);for(const s of t.off)this.#e.get(s)._setVisible(Qs,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let a=1;a<i;a++){const o=t[a];let c;if(Array.isArray(o))c=this.#r(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return bt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return wl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return bt(`Unknown optional content policy ${t.policy}.`),!0}return bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const a=this.#e.get(t);if(!a){bt(`Optional content group not found: ${t}`);return}if(s&&i&&a.rbGroups.length)for(const o of a.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(Qs,!1,!0);a._setVisible(Qs,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,i);break;case"OFF":this.setVisibility(a,!1,i);break;case"Toggle":this.setVisibility(a,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new sv;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class _w{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Ot(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Ot(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Ot(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Tw(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Cw(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Tw{constructor(t,i,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Zh(a)?a:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Cw{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xw(h){let t=!0,i=s("filename\\*","i").exec(h);if(i){i=i[1];let g=u(i);return g=unescape(g),g=d(g),g=f(g),o(g)}if(i=c(h),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(h),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(g,{fatal:!0}),A=Tr(y);y=v.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let v;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=A.exec(g))!==null;){let[,S,_,E]=v;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,E]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[_,E]=y[S];E=u(E),_&&(E=unescape(E),S===0&&(E=d(E))),w.push(E)}return w.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let v=0;v<y.length;++v){const A=y[v].indexOf('"');A!==-1&&(y[v]=y[v].slice(0,A),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const v=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return a(v,w)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(v,w);try{w=atob(w)}catch{}return a(v,w)})}return""}function hv(h,t){const i=new Headers;if(!h||!t||typeof t!="object")return i;for(const s in t){const a=t[s];a!==void 0&&i.append(s,a)}return i}function Tl(h){return URL.parse(h)?.origin??null}function dv({responseHeaders:h,isHttp:t,rangeChunkSize:i,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*i)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function fv(h){const t=h.get("Content-Disposition");if(t){let i=xw(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Zh(i))return i}return null}function Dr(h,t){return new pl(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function pv(h){return h===200||h===206}function gv(h,t,i){return{method:"GET",headers:h,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function mv(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(bt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class Rw{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=hv(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ot(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Mw(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Dw(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Mw{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),a=i.url;fetch(a,gv(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Tl(o.url),!pv(o.status))throw Dr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=dv({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=fv(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Bn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:mv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Dw{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const c=a.url;fetch(c,gv(o,this._withCredentials,this._abortController)).then(u=>{const d=Tl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!pv(u.status))throw Dr(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:mv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const _h=200,Th=206;function Lw(h){const t=h.response;return typeof t!="string"?t:Tr(t).buffer}class Ow{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=hv(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,c]of this.headers)i.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Th):a.expectedStatus=_h,i.responseType="arraybuffer",Ot(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||_h;if(!(o===_h&&s.expectedStatus===Th)&&o!==s.expectedStatus){s.onError(a.status);return}const u=Lw(a);if(o===Th){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(bt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class Nw{constructor(t){this._source=t,this._manager=new Ow(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Ot(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new kw(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new Bw(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class kw{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Tl(i.responseURL);const s=i.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=dv({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=fv(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Dr(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Bw{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Tl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Dr(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Pw=/^[a-z][a-z0-9\-+.]+:/i;function zw(h){if(Pw.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class Fw{constructor(t){this.source=t,this.url=zw(t.url),Ot(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ot(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Uw(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Iw(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Uw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Dr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Bn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Iw{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lr=Symbol("INITIAL_DATA");class yv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:lr}}get(t,i=null){if(i){const a=this.#e(t);return a.promise.then(()=>i(a.data)),null}const s=this.#t[t];if(!s||s.data===lr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==lr}delete(t){const i=this.#t[t];return!i||i.data===lr?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==lr&&(yield[t,i])}}}const Hw=1e5,Ey=30;class Oe{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#T=new WeakMap;static#E=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Ni.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=a,this.#s=o,Oe.#M(),os(i,s),this.#t.promise.finally(()=>{Oe.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=Me.platform;return Et(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#x(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Oe.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Ni.pixelRatio,a=t.rotation;if(a!==this.#d&&(i?.(),this.#d=a,os(this.#l,{rotation:a})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:Oe.#D(this.#r)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#_(o)}}cancel(){const t=new Bn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#x(t){if(this.#n)return;this.#a.ctx??=Oe.#D(this.#r);const i=this.#u,s=this.#m;for(const a of t){if(i.length>Hw){bt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#A(a)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const a=lt.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=Oe.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*Oe.#z(u,c,this.#r);let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const v="calc(var(--total-scale-factor) *",A=i.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#s).toFixed(2)}%`):(A.left=`${v}${g.toFixed(2)}px)`,A.top=`${v}${y.toFixed(2)}px)`),A.fontSize=`${v}${(Oe.#E*d).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(w=!0)}if(w&&(s.canvasWidth=c.vertical?t.height:t.width),this.#p.set(i,s),this.#a.div=i,this.#a.properties=s,this.#_(this.#a),s.hasText&&this.#e.append(i),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:i,properties:s,ctx:a}=t,{style:o}=i;let c="";if(Oe.#E>1&&(c=`scale(${1/Oe.#E})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=s;Oe.#R(a,f*this.#h,u);const{width:g}=a.measureText(i.textContent);g>0&&(c=`scaleX(${d*this.#h/g}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#S.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#D(t=null){let i=this.#v.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,i),this.#T.set(i,{size:0,family:""})}return i}static#R(t,i,s){const a=this.#T.get(t);i===a.size&&s===a.family||(t.font=`${i}px ${s}`,a.size=i,a.family=s)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#z(t,i,s){const a=this.#b.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=Ey,this.#R(o,Ey,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Me.platform.isFirefox&&bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#b.set(t,f),f}}const jw=100;function vv(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new ad,{docId:i}=t,s=h.url?K1(h.url):null,a=h.data?W1(h.data):null,o=h.httpHeaders||null,c=h.withCredentials===!0,u=h.password??null,d=h.range instanceof bv?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof Ar?h.worker:null;const y=h.verbosity,v=typeof h.docBaseUrl=="string"&&!El(h.docBaseUrl)?h.docBaseUrl:null,A=Jo(h.cMapUrl),w=h.cMapPacked!==!1,S=h.CMapReaderFactory||(Ne?sw:cy),_=Jo(h.iccUrl),E=Jo(h.standardFontDataUrl),R=h.StandardFontDataFactory||(Ne?aw:uy),C=Jo(h.wasmUrl),O=h.WasmFactory||(Ne?rw:hy),D=h.stopAtErrors!==!0,k=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,z=h.isEvalSupported!==!1,V=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Ne,Y=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Ne&&(Me.platform.isFirefox||!globalThis.chrome),tt=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,et=typeof h.disableFontFace=="boolean"?h.disableFontFace:Ne,ft=h.fontExtraProperties===!0,mt=h.enableXfa===!0,pt=h.ownerDocument||globalThis.document,At=h.disableRange===!0,B=h.disableStream===!0,$=h.disableAutoFetch===!0,it=h.pdfBug===!0,X=h.CanvasFactory||(Ne?nw:tw),q=h.FilterFactory||(Ne?iw:ew),x=h.enableHWA===!0,F=h.useWasm!==!1,j=d?d.length:h.length??NaN,J=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Ne&&!et,nt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===cy&&R===uy&&O===hy&&A&&E&&C&&hr(A,document.baseURI)&&hr(E,document.baseURI)&&hr(C,document.baseURI)),ct=null;E1(y);const at={canvasFactory:new X({ownerDocument:pt,enableHWA:x}),filterFactory:new q({docId:i,ownerDocument:pt}),cMapReaderFactory:nt?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:nt?null:new R({baseUrl:E}),wasmFactory:nt?null:new O({baseUrl:C})};g||(g=Ar.create({verbosity:y,port:aa.workerPort}),t._worker=g);const Tt={docId:i,apiVersion:"5.4.394",data:a,password:u,disableAutoFetch:$,rangeChunkSize:f,length:j,docBaseUrl:v,enableXfa:mt,evaluatorOptions:{maxImageSize:k,disableFontFace:et,ignoreErrors:D,isEvalSupported:z,isOffscreenCanvasSupported:V,isImageDecoderSupported:Y,canvasMaxAreaInBytes:tt,fontExtraProperties:ft,useSystemFonts:J,useWasm:F,useWorkerFetch:nt,cMapUrl:A,iccUrl:_,standardFontDataUrl:E,wasmUrl:C}},st={ownerDocument:pt,pdfBug:it,styleElement:ct,loadingParams:{disableAutoFetch:$,enableXfa:mt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const yt=g.messageHandler.sendWithPromise("GetDocRequest",Tt,a?[a.buffer]:null);let Nt;if(d)Nt=new _w(d,{disableRange:At,disableStream:B});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const oe=hr(s)?Rw:Ne?Fw:Nw;Nt=new oe({url:s,length:j,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:At,disableStream:B})}return yt.then(oe=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const me=new dr(i,oe,g.port),le=new Vw(me,t,Nt,st,at,x);t._transport=le,me.send("Ready",null)})}).catch(t._capability.reject),t}class ad{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ad.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class bv{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,a=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Gw{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class qw{#t=!1;constructor(t,i,s,a=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=a?new iy:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new yv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new xr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:a="display",annotationMode:o=On.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,v),{renderingIntent:_,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let R=this._intentStates.get(E);R||(R=Object.create(null),this._intentStates.set(E,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const C=!!(_&ii.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(A||O),k=Y=>{if(R.renderTasks.delete(z),D){const tt=z.gfx?.dependencyTracker.take();tt&&(z.stepper&&z.stepper.setOperatorBBoxes(tt,z.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=tt))}C&&(this.#t=!0),this.#e(),Y?(z.capability.reject(Y),this._abortOperatorList({intentState:R,reason:Y instanceof Error?Y:new Error(Y)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new ea({callback:k,params:{canvas:i,canvasContext:t,dependencyTracker:D?new lw(i,R.operatorList.length,O):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(R.renderTasks||=new Set).add(z);const V=z.task;return Promise.all([R.displayReadyCapability.promise,d]).then(([Y,tt])=>{if(this.destroyed){k();return}if(this._stats?.time("Rendering"),!(tt.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:Y,optionalContentConfig:tt}),z.operatorListChanged()}).catch(k),V}getOperatorList({intent:t="display",annotationMode:i=On.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,i,s,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>br.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,a){function o(){c.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new iy),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,a=t.length;s<a;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:c}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:a},c).getReader(),f=this._intentStates.get(i);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Qh){let a=jw;i.extraDelay>0&&i.extraDelay<1e3&&(a+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},a);return}}if(t.streamReader.cancel(new Bn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Nn,Si,en,ss,yl,as,rs,Be,hl,Av,Sv,fr,ra,dl;const Qt=class Qt{constructor({name:t=null,port:i=null,verbosity:s=_1()}={}){xi(this,Be);xi(this,Nn,Promise.withResolvers());xi(this,Si,null);xi(this,en,null);xi(this,ss,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Wt(Qt,rs).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Wt(Qt,rs).set(i,this),Ri(this,Be,Av).call(this,i)}else Ri(this,Be,Sv).call(this)}get promise(){return Wt(this,Nn).promise}get port(){return Wt(this,en)}get messageHandler(){return Wt(this,Si)}destroy(){this.destroyed=!0,Wt(this,ss)?.terminate(),Ge(this,ss,null),Wt(Qt,rs).delete(Wt(this,en)),Ge(this,en,null),Wt(this,Si)?.destroy(),Ge(this,Si,null)}static create(t){const i=Wt(this,rs).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Qt(t)}static get workerSrc(){if(aa.workerSrc)return aa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Et(this,"_setupFakeWorkerGlobal",(async()=>Wt(this,ra,dl)?Wt(this,ra,dl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Nn=new WeakMap,Si=new WeakMap,en=new WeakMap,ss=new WeakMap,yl=new WeakMap,as=new WeakMap,rs=new WeakMap,Be=new WeakSet,hl=function(){Wt(this,Nn).resolve(),Wt(this,Si).send("configure",{verbosity:this.verbosity})},Av=function(t){Ge(this,en,t),Ge(this,Si,new dr("main","worker",t)),Wt(this,Si).on("ready",()=>{}),Ri(this,Be,hl).call(this)},Sv=function(){if(Wt(Qt,as)||Wt(Qt,ra,dl)){Ri(this,Be,fr).call(this);return}let{workerSrc:t}=Qt;try{Qt._isSameOrigin(window.location,t)||(t=Qt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new dr("main","worker",i),a=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?Wt(this,Nn).reject(new Error("Worker was destroyed")):Ri(this,Be,fr).call(this)},o=new AbortController;i.addEventListener("error",()=>{Wt(this,ss)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}Ge(this,Si,s),Ge(this,en,i),Ge(this,ss,i),Ri(this,Be,hl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{Ri(this,Be,fr).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{wl("The worker has been disabled.")}Ri(this,Be,fr).call(this)},fr=function(){Wt(Qt,as)||(bt("Setting up fake worker."),Ge(Qt,as,!0)),Qt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Wt(this,Nn).reject(new Error("Worker was destroyed"));return}const i=new J1;Ge(this,en,i);const s=`fake${pm(Qt,yl)._++}`,a=new dr(s+"_worker",s,i);t.setup(a,i),Ge(this,Si,new dr(s,s+"_worker",i)),Ri(this,Be,hl).call(this)}).catch(t=>{Wt(this,Nn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ra=new WeakSet,dl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},xi(Qt,ra),xi(Qt,yl,0),xi(Qt,as,!1),xi(Qt,rs,new WeakMap),Ne&&(Ge(Qt,as,!0),aa.workerSrc||="./pdf.worker.mjs"),Qt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(i,s);return s.origin===a.origin},Qt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Qt.fromPort=t=>{if(P1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Qt.create(t)};let Ar=Qt;class Vw{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,a,o,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new yv,this.fontLoader=new X1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,i=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,a),a}get annotationStorage(){return Et(this,"annotationStorage",new ed)}getRenderingIntent(t,i=On.ENABLE,s=null,a=!1,o=!1){let c=ii.DISPLAY,u=Bh;switch(t){case"any":c=ii.ANY;break;case"display":break;case"print":c=ii.PRINT;break;default:bt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&ii.PRINT&&s instanceof av?s:this.annotationStorage;switch(i){case On.DISABLE:c+=ii.ANNOTATIONS_DISABLE;break;case On.ENABLE:break;case On.ENABLE_FORMS:c+=ii.ANNOTATIONS_FORMS;break;case On.ENABLE_STORAGE:c+=ii.ANNOTATIONS_STORAGE,u=d.serializable;break;default:bt(`getRenderingIntent - invalid annotationMode: ${i}`)}a&&(c+=ii.IS_EDITING),o&&(c+=ii.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[c,u.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Oe.cleanup(),this._networkStream?.cancelAllRequests(new Bn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,a)=>{Ot(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}Ot(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this._fullReader;return(!a||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,a)=>{Ot(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}Ot(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new Gw(s,this))}),t.on("DocException",s=>{i._capability.reject(qe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw qe(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};i.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const y=o.error;bt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const c=new qt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,v)=>globalThis.FontInspector.fontAdded(y,v):null,d=new $1(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Ot(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,v]of y.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(s,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new be(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,c])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const c=new qw(i,o,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#n.set(i,a),a}getPageIndex(t){return Ph(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(i=>new Ew(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new Sw(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Oe.cleanup()}}cachedPageNumber(t){if(!Ph(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class Yw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class ea{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Yw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ea.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ea.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new sa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ea.#e.delete(this._canvas),t||=new Qh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ea.#e.delete(this._canvas),this.callback())))}}const Xw="5.4.394",$w="2cc809ade";class mi{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Et(this,"_keyboardManager",new Mr([[["Escape","mac+Escape"],mi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],mi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],mi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],mi.prototype._moveToPrevious],[["Home","mac+Home"],mi.prototype._moveToBeginning],[["End","mac+End"],mi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",mi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",yi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",mi.#d[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.ariaSelected=a===this.#n,o.addEventListener("click",this.#f.bind(this,a),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Lt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastChild?.focus()}#m(t){mi._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Sr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Sr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Sr.#i[t]),a.addEventListener("input",()=>{this.#n.updateParams(i,a.value)},{signal:this.#n._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function _y(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function cr(h){return Math.max(0,Math.min(255,255*h))}class Ty{static CMYK_G([t,i,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=cr(t),[t,t,t]}static G_HTML([t]){const i=_y(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(cr)}static RGB_HTML(t){return`#${t.map(_y).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,i+a)]}static CMYK_rgb([t,i,s,a]){return[cr(1-Math.min(1,t+a)),cr(1-Math.min(1,s+a)),cr(1-Math.min(1,i+a))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const a=1-t,o=1-i,c=1-s,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class Kw{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${i}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${i}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Yt("Abstract method `_createSVG` called.")}}class ml extends Kw{_createSVG(t){return document.createElementNS(Ji,t)}}const Ww=9,ls=new WeakSet,Qw=new Date().getTimezoneOffset()*60*1e3;class Ch{static create(t){switch(t.data.annotationType){case pe.LINK:return new rd(t);case pe.TEXT:return new Jw(t);case pe.WIDGET:switch(t.data.fieldType){case"Tx":return new tE(t);case"Btn":return t.data.radioButton?new wv(t):t.data.checkBox?new iE(t):new nE(t);case"Ch":return new sE(t);case"Sig":return new eE(t)}return new us(t);case pe.POPUP:return new Uh(t);case pe.FREETEXT:return new Ev(t);case pe.LINE:return new rE(t);case pe.SQUARE:return new oE(t);case pe.CIRCLE:return new lE(t);case pe.POLYLINE:return new _v(t);case pe.CARET:return new uE(t);case pe.INK:return new od(t);case pe.POLYGON:return new cE(t);case pe.HIGHLIGHT:return new Tv(t);case pe.UNDERLINE:return new hE(t);case pe.SQUIGGLY:return new dE(t);case pe.STRIKEOUT:return new fE(t);case pe.STAMP:return new Cv(t);case pe.FILEATTACHMENT:return new pE(t);default:return new te(t)}}}class te{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return te._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:a}=this.data;let o=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],o=i[u+2]):i[u+1]===c&&(o=Math.max(o,i[u+2]));return[o,c]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>c?(c=u[d+1],o=u[d]):u[d+1]===c&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${yr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${yr}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let a=this.#n?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#n.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(c-t[3]+d)/c}%`,a===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:i,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof us)&&!(this instanceof rd)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof Uh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,_=i.borderStyle.verticalCornerRadius;if(S>0||_>0){const R=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;c.borderRadius=R}else if(this instanceof wv){const R=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=R}switch(i.borderStyle.style){case Ws.SOLID:c.borderStyle="solid";break;case Ws.DASHED:c.borderStyle="dashed";break;case Ws.BEVELED:bt("Unimplemented border style: beveled");break;case Ws.INSET:bt("Unimplemented border style: inset");break;case Ws.UNDERLINE:c.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,c.borderColor=lt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=lt.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:v,pageY:A}=a.rawDims;c.left=`${100*(f[0]-v)/g}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(c.width=`${100*u/g}%`,c.height=`${100*d/y}%`):this.setRotation(w,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*c/a}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,a)=>{const o=a.detail[i],c=o[0],u=o.slice(1);a.target.style[s]=Ty[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Ty[`${c}_rgb`](u)})};return Et(this,"_commonActions",{display:i=>{const{display:s}=i.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const a of Object.keys(i.detail))(t[a]||s[a])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[a,o]of Object.entries(i)){const c=s[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete i[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,E,R]=t.subarray(2,6);if(a===S&&o===_&&i===E&&s===R)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:_}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-i,f=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=g.createElement("defs");y.append(v);const A=g.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),v.append(A);for(let S=2,_=t.length;S<_;S+=8){const E=t[S],R=t[S+1],C=t[S+2],O=t[S+3],D=g.createElement("rect"),k=(C-i)/d,z=(o-R)/f,V=(E-C)/d,Y=(R-O)/f;D.setAttribute("x",k),D.setAttribute("y",z),D.setAttribute("width",V),D.setAttribute("height",Y),A.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${z}" width="${V}" height="${Y}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,a;t?(s={str:t.text},a=t.date):(s=i.contentsObj,a=i.modificationDate),this.#n=new Uh({data:{color:i.color,titleObj:i.titleObj,modificationDate:a,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===i)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!ls.has(f)){bt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==i&&ls.has(a)&&s.push({id:c,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Zw extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class rd extends te{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",a=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,a),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:c}=i,u=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const v=this._fieldObjects[y]||[];for(const{id:A}of v)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const v of y)g.has(v.id)===c&&u.push(v)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const v=document.querySelector(`[data-element-id="${y}"]`);if(v){if(!ls.has(v)){bt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class Jw extends te{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class us extends te{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Me.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,a,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}})})}_setEventListeners(t,i,s,a){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":lt.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||Ww,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(vh*a))||1,y=f/g;c=Math.min(a,d(y/vh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(f/vh))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=lt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class tE extends us{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),o.setValue(c.id,{[a]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(i,{value:this.data.fieldValue});let o=a.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ls.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,v=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(v&&(_.type=g,y&&(_.step=y)),d.userValue){const E=d.userValue;if(v)if(g==="time"){const R=new Date(E),C=[R.getHours(),R.getMinutes(),R.getSeconds()];_.value=C.map(O=>O.toString().padStart(2,"0")).join(":")}else _.value=new Date(E-Qw).toISOString().split(g==="date"?"T":".",1)[0];else _.value=E}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(E){d.userValue=E.detail.value??"",v||t.setValue(i,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:R}=E.detail;d.formattedValue=R,R!=null&&E.target!==document.activeElement&&(E.target.value=R);const C={formattedValue:R};v&&(C.value=R),t.setValue(i,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:R}=E.detail,{target:C}=E;if(R===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",R);let O=d.userValue;!O||O.length<=R||(O=O.slice(0,R),C.value=d.userValue=O,t.setValue(i,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:E}=_;if(v){if(E&&g==="time"){const R=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),_.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();_.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:E}=S,{value:R,selectionStart:C,selectionEnd:O}=E;let D=C,k=O;switch(S.inputType){case"deleteWordBackward":{const z=R.substring(0,C).match(/\w*[^\w]*$/);z&&(D-=z[0].length);break}case"deleteWordForward":{const z=R.substring(C).match(/^[^\w]*\w*/);z&&(k+=z[0].length);break}case"deleteContentBackward":C===O&&(D-=1);break;case"deleteContentForward":C===O&&(k+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:R,change:_||"",willCommit:!1,selStart:D,selEnd:k}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class eE extends us{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class iE extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let a=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ls.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,s)){const g=d&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class wv extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let a=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof a=="string"&&(a=a!==i.buttonValue,t.setValue(s,{value:a})),a)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(ls.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const v=g&&y.id===s;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class nE extends rd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class sE extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),a=document.createElement("select");ls.add(a),a.setAttribute("data-element-id",i),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:v,multiple:A}=a;return A?Array.prototype.filter.call(v,w=>w.selected).map(w=>w[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(v){c?.();const A=v.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(v){a.multiple=!0},remove(v){const A=a.options,w=v.detail.remove;A[w].selected=!1,a.remove(w),A.length>0&&Array.prototype.findIndex.call(A,_=>_.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(v)}),d=u(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(v){const{index:A,displayValue:w,exportValue:S}=v.detail.insert,_=a.children[A],E=document.createElement("option");E.textContent=w,E.value=S,_?_.before(E):a.append(E),t.setValue(i,{value:u(!0),items:f(v)}),d=u(!1)},items(v){const{items:A}=v.detail;for(;a.length!==0;)a.remove(0);for(const w of A){const{displayValue:S,exportValue:_}=w,E=document.createElement("option");E.textContent=S,E.value=_,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(v)}),d=u(!1)},indices(v){const A=new Set(v.detail.indices);for(const w of v.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=u(!0),v=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Uh extends te{constructor(t){const{data:i,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&te._hasPopupData(i)}),this.elements=s,o&&te._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new aE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=i,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${Js}${a}`).join(",")),this.container}}class aE{#t=null;#e=this.#q.bind(this);#n=this.#U.bind(this);#i=this.#N.bind(this);#r=this.#w.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#b=null;#v=null;#T=null;#E=null;#S=null;#x=!1;#A=null;#_=null;constructor({container:t,color:i,elements:s,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:g,open:y,commentManager:v=null}){this.#s=t,this.#E=a,this.#o=c,this.#T=u,this.#d=d,this.#a=i,this.#v=f,this.#h=g,this.#l=s,this.#t=v,this.#A=s[0],this.#c=Oh.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),v||(this.#D(),this.#s.hidden=!0,y&&this.#w())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#M(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:a,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#A.commentText,this.#_}set comment(t){t!==this.comment&&(this.#A.commentText=this.#_=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-a)/c,(i+s-o)/u]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#b||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:c,width:u,height:d}=a;this.#t.showDialog(null,this,o+i*u,c+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=lt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}ev({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#T,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#T.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},a={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:a});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):i&&(i.deleted?this.remove():(this.#z(),this.#_=i.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(s||i?.deleted){this.remove();return}this.#D(),this.#S||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),i&&i.text&&(this.#T=this.#B(i.text),this.#c=Oh.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#T}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#x=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#v;for(const w of this.#l)if(!u||lt.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const d=lt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=d[0]+g,v=d[1];this.#u=[100*(y-a)/i,100*(v-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#x&&(this.#m||this.#N(),this.#x=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class Ev extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=St.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class rE extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class oE extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",i-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lE extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _v extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:a},width:o,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let g=0,y=i.length;g<y;g+=2){const v=i[g]-t[0],A=t[3]-i[g+1];d.push(`${v},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class cE extends _v{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class uE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class od extends te{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?St.HIGHLIGHT:St.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:c,width:u,height:d}=this.#n(i,t),f=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,v=s.length;y<v;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:a}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(a){const{transform:c,width:u,height:d}=this.#n(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tv extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=St.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class hE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class dE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class fE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Cv extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=St.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class pE extends te{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=Me.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ld{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=g||new ed,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;os(s,this.viewport);const a=new Map,o=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ml,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const d=u.annotationType===pe.POPUP;if(d){const y=a.get(u.id);if(!y)continue;if(!this._commentManager){o.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Ch.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=c.elements=a.get(u.id);c.data=u;const f=Ch.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Js}${u.id}`,u.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:a}}of this.#s){const o=s.id=`${Js}${a}`;t.push(this.#r?.getAriaAttributes(o).then(c=>{if(c)for(const[u,d]of c)s.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[s,a,o,c]}},{data:{rect:[u,d,f,g]}})=>{if(s===o&&a===c)return 1;if(u===f&&d===g)return-1;const y=c,v=a,A=(a+c)/2,w=g,S=d,_=(d+g)/2;if(A>=w&&_<=v)return-1;if(_>=y&&A<=S)return 1;const E=(s+o)/2,R=(u+f)/2;return E-R});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#a,svgFactory:new ml,parent:this};for(const s of t){s.borderStyle||=ld._defaultBorderStyle,i.data=s;const a=Ch.create(i);a.isRenderable&&(a.render(),a.contentElement.id=`${Js}${s.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,os(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${i}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,a.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:a}=t,o=new Zw({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${Js}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(a=>a.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ws.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const al=/\r\n?|\n/g;class Ae extends dt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ae.prototype,i=o=>o.isEmpty(),s=Pn.TRANSLATE_SMALL,a=Pn.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Mr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static _type="freetext";static _editorType=St.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ae._defaultColor||dt._defaultLineColor,this.#i=t.fontSize||Ae._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){dt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Lt.FREETEXT_SIZE:Ae._defaultFontSize=i;break;case Lt.FREETEXT_COLOR:Ae._defaultColor=i;break}}updateParams(t,i){switch(t){case Lt.FREETEXT_SIZE:this.#r(i);break;case Lt.FREETEXT_COLOR:this.#a(i);break}}static get defaultPropertiesToUpdate(){return[[Lt.FREETEXT_SIZE,Ae._defaultFontSize],[Lt.FREETEXT_COLOR,Ae._defaultColor||dt._defaultLineColor]]}get propertiesToUpdate(){return[[Lt.FREETEXT_SIZE,this.#i],[Lt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Sr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.FREETEXT_COLOR}#r(t){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#i)*this.parentScale),this.#i=a,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const i=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ae._internalPadding*t,-(Ae._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ae.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ae._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,g]=this.pageDimensions,[y,v]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-y)/f,w=i+this.height-(c[1]-v)/g;break;case 90:A=t+(c[0]-y)/f,w=i-(c[1]-v)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(c[0]-y)/f,w=i-(c[1]-v)/g,[u,d]=[-u,-d];break;case 270:A=t+(c[0]-y-this.height*g)/f,w=i+(c[1]-v-this.width*f)/g,[u,d]=[-d,u];break}this.setAt(A*a,w*o,u,d)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(al,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=Ae.#h(i.getData("text")||"").replaceAll(al,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(al,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=g;continue}w.push(Ae.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(al,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(A=g),A.push(Ae.#c(S))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let v=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(v<=w){y.setStart(A,v),y.setEnd(A,v);break}v-=w}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ae._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let a=null;if(t instanceof Ev){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:g,popupRef:y,richText:v,contentsObj:A,creationDate:w,modificationDate:S},textContent:_,textPosition:E,parent:{page:{pageNumber:R}}}=t;if(!_||_.length===0)return null;a=t={annotationType:St.FREETEXT,color:Array.from(u),fontSize:c,value:_.join(`
`),position:E,pageIndex:R-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:v,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=lt.makeHexColor(...t.color),o.#t=Ae.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class rt{static PRECISION=1e-4;toSVGPath(){Yt("Abstract method `toSVGPath` must be implemented.")}get box(){Yt("Abstract getter `box` must be implemented.")}serialize(t,i){Yt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,a,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u]*a,c[u+1]=s+t[u+1]*o;return c}static _rescaleAndSwap(t,i,s,a,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u+1]*a,c[u+1]=s+t[u]*o;return c}static _translate(t,i,s,a){a||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)a[o]=i+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,a,o){switch(o){case 90:return[1-i/s,t/a];case 180:return[1-t/s,1-i/a];case 270:return[i/s,1-t/a];default:return[t/s,i/a]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,a,o,c){return[(t+5*s)/6,(i+5*a)/6,(5*s+o)/6,(5*a+c)/6,(s+o)/2,(a+c)/2]}}class ns{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=ns.#m+ns.#g;constructor({x:t,y:i},s,a,o,c,u=0){this.#t=s,this.#h=o*a,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=ns.#m*a,this.#c=ns.#u*a,this.#d=a,this.#f.push(t,i)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,a,o,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-a)/c,(this.#s+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-a)/c]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,a,o,c]=this.#t;let[u,d,f,g]=this.#a.subarray(8,12);const y=t-f,v=i-g,A=Math.hypot(y,v);if(A<this.#c)return!1;const w=A-this.#l,S=w/A,_=S*y,E=S*v;let R=u,C=d;u=f,d=g,f+=_,g+=E,this.#f?.push(t,i);const O=-E/w,D=_/w,k=O*this.#h,z=D*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+k,g+z],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-k,g-z],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+k,d+z],2),this.#r.push(NaN,NaN,NaN,NaN,(u+k-s)/o,(d+z-a)/c),this.#a.set([u-k,d-z],14),this.#e.push(NaN,NaN,NaN,NaN,(u-k-s)/o,(d-z-a)/c)),this.#a.set([R,C,u,d,f,g],6),!this.isEmpty()):(this.#a.set([R,C,u,d,f,g],6),Math.abs(Math.atan2(C-d,R-u)-Math.atan2(E,_))<Math.PI/2?([u,d,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+g)/2-a)/c),[u,d,R,C]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+u)/2-s)/o,((C+d)/2-a)/c),!0):([R,C,u,d,f,g]=this.#a.subarray(0,6),this.#r.push(((R+5*u)/6-s)/o,((C+5*d)/6-a)/c,((5*u+f)/6-s)/o,((5*d+g)/6-a)/c,((u+f)/2-s)/o,((d+g)/2-a)/c),[f,g,u,d,R,C]=this.#a.subarray(12,18),this.#e.push(((R+5*u)/6-s)/o,((C+5*d)/6-a)/c,((5*u+f)/6-s)/o,((5*d+g)/6-a)/c,((u+f)/2-s)/o,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#v(s);for(let a=i.length-6;a>=6;a-=6)isNaN(i[a])?s.push(`L${i[a+4]} ${i[a+5]}`):s.push(`C${i[a]} ${i[a+1]} ${i[a+2]} ${i[a+3]} ${i[a+4]} ${i[a+5]}`);return this.#b(s),s.join(" ")}#y(){const[t,i,s,a]=this.#t,[o,c,u,d]=this.#p();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-i)/a} L${(this.#a[4]-t)/s} ${(this.#a[5]-i)/a} L${o} ${c} L${u} ${d} L${(this.#a[16]-t)/s} ${(this.#a[17]-i)/a} L${(this.#a[14]-t)/s} ${(this.#a[15]-i)/a} Z`}#b(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#v(t){const[i,s,a,o]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[d,f,g,y]=this.#p();t.push(`L${(c[0]-i)/a} ${(c[1]-s)/o} L${d} ${f} L${g} ${y} L${(u[0]-i)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,a,o,c){return new xv(t,i,s,a,o,c)}getOutlines(){const t=this.#r,i=this.#e,s=this.#a,[a,o,c,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,v=d.length-2;y<v;y+=2)d[y]=(this.#f[y]-a)/c,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#s-a)/c,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#T(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#S(f,g);for(let y=i.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(i[y+v])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[y+v],f[g+1]=i[y+v+1],g+=2}return this.#E(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#T(t){const i=this.#a,[s,a,o,c]=this.#t,[u,d,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-a)/c,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-a)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-a)/c,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-a)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#E(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[o,c,u,d]=this.#t,[f,g,y,v]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/d],i),i+=24}}class xv extends rt{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,i,s,a,o,c){super(),this.#s=t,this.#r=i,this.#t=s,this.#a=a,this.#n=o,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,d,f,g]=this.#e;for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,v=i.length;y<v;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,a],o){const c=s-t,u=a-i;let d,f;switch(o){case 0:d=rt._rescale(this.#s,t,a,c,-u),f=rt._rescale(this.#r,t,a,c,-u);break;case 90:d=rt._rescaleAndSwap(this.#s,t,i,c,u),f=rt._rescaleAndSwap(this.#r,t,i,c,u);break;case 180:d=rt._rescale(this.#s,s,i,-c,u),f=rt._rescale(this.#r,s,i,-c,u);break;case 270:d=rt._rescaleAndSwap(this.#s,s,a,-c,-u),f=rt._rescaleAndSwap(this.#r,s,a,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],a=i[5];const o=[s,a,s,a];let c=s,u=a,d=s,f=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],_=i[A+5];isNaN(i[A])?(lt.pointBoundingBox(S,_,o),u>_?(c=S,u=_):u===_&&(c=g(c,S)),f<_?(d=S,f=_):f===_&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,lt.bezierBoundingBox(s,a,...i.slice(A,A+6),y),lt.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=g(c,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=g(d,y[2]))),s=S,a=_}const v=this.#e;v[0]=o[0]-this.#n,v[1]=o[1]-this.#n,v[2]=o[2]-o[0]+2*this.#n,v[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,i,s,a,o,c=0){return new ns(t,i,s,a,o,c)}getNewOutline(t,i){const[s,a,o,c]=this.#e,[u,d,f,g]=this.#t,y=o*f,v=c*g,A=s*f+u,w=a*g+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*v+w},this.#t,this.#a,t,this.#i,i??this.#n);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+A,y:this.#r[_+1]*v+w});return S.getOutlines()}}class Ih{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:_,width:E,height:R}of t){const C=Math.floor((S-i)/c)*c,O=Math.ceil((S+E+i)/c)*c,D=Math.floor((_-i)/c)*c,k=Math.ceil((_+R+i)/c)*c,z=[C,D,k,!0],V=[O,D,k,!1];this.#i.push(z,V),lt.rectBoundingBox(C,D,O,k,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let y=a?-1/0:1/0,v=1/0;const A=this.#i.at(a?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[_,E,R,C]=S;!C&&a?E<v?(v=E,y=_):E===v&&(y=Math.max(y,_)):C&&!a&&(E<v?(v=E,y=_):E===v&&(y=Math.min(y,_))),S[0]=(_-f)/u,S[1]=(E-g)/d,S[2]=(R-g)/d}this.#t=new Float32Array([f,g,u,d]),this.#e=[y,v],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,d,f]=c;i.push([u,d,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const d=i[c][2],f=i[c+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,d,f,g,y]=c;s.delete(c);let v=u,A=d;for(o=[u,f],a.push(o);;){let w;if(s.has(g))w=g;else if(s.has(y))w=y;else break;s.delete(w),[u,d,f,g,y]=w,v!==u&&(o.push(v,A,u,A===d?d:f),v=u),A=A===d?f:d}o.push(v,A)}return new gE(a,this.#t,this.#e,this.#n)}#s(t){const i=this.#r;let s=0,a=i.length-1;for(;s<=a;){const o=s+a>>1,c=i[o][0];if(c===t)return o;c<t?s=o+1:a=o-1}return a+1}#o([,t,i]){const s=this.#s(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let a=s;a<this.#r.length;a++){const[o,c]=this.#r[a];if(o!==t)break;if(o===t&&c===i){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,c]=this.#r[a];if(o!==t)break;if(o===t&&c===i){this.#r.splice(a,1);return}}}#l(t){const[i,s,a]=t,o=[[i,s,a]],c=this.#s(a);for(let u=0;u<c;u++){const[d,f]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,v,A]=o[g];if(!(f<=v||A<=d)){if(v>=d){if(A>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>f&&o.push([i,f,A])}}}return o}}class gE extends rt{#t;#e;constructor(t,i,s,a){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const i of this.#e){let[s,a]=i;t.push(`M${s} ${a}`);for(let o=2;o<i.length;o+=2){const c=i[o],u=i[o+1];c===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,a],o){const c=[],u=s-t,d=a-i;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=a-f[y+1]*d;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Hh extends ns{newFreeDrawOutline(t,i,s,a,o,c){return new mE(t,i,s,a,o,c)}}class mE extends xv{newOutliner(t,i,s,a,o,c=0){return new Hh(t,i,s,a,o,c)}}class re extends dt{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=St.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=re.prototype;return Et(this,"_keyboardManager",new Mr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||re._defaultColor,this.#p=t.thickness||re._defaultThickness,this.opacity=t.opacity||re._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Ih(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new Ih(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#a;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#p/2+a,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:re.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:re.#_(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[y,v]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*v/y,this.height=d*y/v;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[y,v]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*v/y,this.height=d*y/v;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-c)/d];const{lastPoint:g}=this.#a;this.#m=[(g[0]-o)/u,(g[1]-c)/d]}static initialize(t,i){dt.initialize(t,i),re._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Lt.HIGHLIGHT_COLOR:re._defaultColor=i;break;case Lt.HIGHLIGHT_THICKNESS:re._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Lt.HIGHLIGHT_COLOR:this.#T(i);break;case Lt.HIGHLIGHT_THICKNESS:this.#E(i);break}}static get defaultPropertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,re._defaultColor],[Lt.HIGHLIGHT_THICKNESS,re._defaultThickness]]}get propertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,this.color||re._defaultColor],[Lt.HIGHLIGHT_THICKNESS,this.#p||re._defaultThickness],[Lt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#T(t){const i=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:i.bind(this,t,re._defaultOpacity),undo:i.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const i=this.#p,s=a=>{this.#p=a,this.#S(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new mi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#x():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,i,s,a],o){switch(o){case 90:return[1-i-a,t,a,s];case 180:return[1-t-s,1-i-a,s,a];case 270:return[i,1-t-s,a,s]}return[t,i,s,a]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=re.#_(this.#l.box,t)):s=re.#_([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:re.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),nv(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){re._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:g,height:y}of o){const v=d*t+s,A=(1-f)*i+a;c[u]=c[u+4]=v,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=v+g*t,c[u+5]=c[u+7]=A-y*i,u+=8}return c}#O(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,i,{target:s,x:a,y:o}){const{x:c,y:u,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),v=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",v,{signal:y}),window.addEventListener("pointerup",v,{signal:y}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",yi,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Hh({x:a,y:o},[c,u,d,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let a=null;if(t instanceof Tv){const{data:{quadPoints:w,rect:S,rotation:_,id:E,color:R,opacity:C,popupRef:O,richText:D,contentsObj:k,creationDate:z,modificationDate:V},parent:{page:{pageNumber:Y}}}=t;a=t={annotationType:St.HIGHLIGHT,color:Array.from(R),opacity:C,quadPoints:w,boxes:null,pageIndex:Y-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:D,comment:k?.str||null,creationDate:z,modificationDate:V}}else if(t instanceof od){const{data:{inkLists:w,rect:S,rotation:_,id:E,color:R,borderStyle:{rawWidth:C},popupRef:O,richText:D,contentsObj:k,creationDate:z,modificationDate:V},parent:{page:{pageNumber:Y}}}=t;a=t={annotationType:St.HIGHLIGHT,color:Array.from(R),thickness:C,inkLists:w,boxes:null,pageIndex:Y-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:D,comment:k?.str||null,creationDate:z,modificationDate:V}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,i,s);f.color=lt.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[v,A]=f.pageTranslation;if(c){const w=f.#n=[];for(let S=0;S<c.length;S+=8)w.push({x:(c[S]-v)/g,y:1-(c[S+1]-A)/y,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/y});f.#b(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-v,y:y-(w[1]-A)},_=new Hh(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let C=0,O=w.length;C<O;C+=2)S.x=w[C]-v,S.y=y-(w[C+1]-A),_.add(S);const{id:E,clipPathId:R}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#v({highlightOutlines:_.getOutlines(),highlightId:E,clipPathId:R}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#z(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==i[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Rv{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Yt("Not implemented")}}class zt extends dt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(zt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(i))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Yt("Not implemented")}static get typesMap(){Yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(zt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,i[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,i[a]]);return t}_updateProperty(t,i,s){const a=this._drawingOptions,o=a[i],c=u=>{a.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,a]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/o),a*(o/c)];case 180:return[1-t,1-i,s,a];case 270:return[1-i,t,s*(c/o),a*(o/c)];default:return[t,i,s,a]}}#d(){const{x:t,y:i,width:s,height:a,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/c),a*(c/o)];case 180:return[1-t,1-i,s,a];case 270:return[i,1-t,s*(o/c),a*(c/o)];default:return[t,i,s,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:a,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-i-a,t,a,s];case 2:return[1-t-s,1-i-a,s,a];case 3:return[i,1-t-s,a,s];case 4:return[t,i-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-i,a*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,i-a,s,a];case 9:return[1-i,t-s,a,s];case 10:return[1-t,1-i,s,a];case 11:return[i-a,1-t,a,s];case 12:return[t-a*(d/u),i,a*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-i-s*(u/d),a*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),a*(d/u)];default:return[t,i,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,a,o){Yt("Not implemented")}static startDrawing(t,i,s,a){const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:f}=a;if(Ft.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:v}=o.getBoundingClientRect(),A=zt.#i=new AbortController,w=t.combinedSignal(A);if(Ft.setPointer(f,d),window.addEventListener("pointerup",S=>{Ft.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{Ft.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{Ft.isSamePointerType(S.pointerType)&&(Ft.initializeAndAddPointerId(S.pointerId),zt.#n.isCancellable()&&(zt.#n.removeLastElement(),zt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",yi,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{Ft.isSameTimeStamp(S.timeStamp)&&ne(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),zt.#n){t.drawLayer.updateProperties(this._currentDrawId,zt.#n.startNew(c,u,y,v,g));return}i.updateUIForDefaultProperties(this),zt.#n=this.createDrawerInstance(c,u,y,v,g),zt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(zt.#r.toSVGProperties(),zt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Ft.isSameTimeStamp(t.timeStamp),!zt.#n)return;const{offsetX:i,offsetY:s,pointerId:a}=t;if(Ft.isSamePointerId(a)){if(Ft.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,zt.#n.add(i,s)),Ft.setTimeStamp(t.timeStamp),ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,zt.#n=null,zt.#r=null,Ft.clearPointerType(),Ft.clearTimeStamp()),zt.#i&&(zt.#i.abort(),zt.#i=null,Ft.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,zt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=zt.#n,a=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Lt.DRAW_STEP),!zt.#n.isEmpty()){const{pageDimensions:[s,a],scale:o}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:zt.#n.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:zt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,a,o,c){Yt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}=i.viewport,d=this.deserializeDraw(c,u,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([i,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class yE{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#o=0;#c=new Lr;#l;#d;constructor(t,i,s,a,o,c){this.#l=s,this.#d=a,this.#i=o,this.#r=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return rt._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,a,o,c]=this.#t.subarray(2,6),u=t-o,d=i-c;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#a.push(t,i),isNaN(s)?(this.#t.set([o,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,c,t,i],0),this.#e.push(...rt.createBezierPoints(s,a,o,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,a,o){this.#l=s,this.#d=a,this.#i=o,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:a}=this.#n[t];this.#e=s,this.#a=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=rt.svgRound(this.#e[4]),i=rt.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#a.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${i}`,this.#o=6}if(this.#a.length===4){const a=rt.svgRound(this.#e[10]),o=rt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[c,u,d,f,g,y]=this.#e.slice(a,a+6).map(rt.svgRound);s.push(`C${c} ${u} ${d} ${f} ${g} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,a){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,a),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Lr extends rt{#t;#e=0;#n;#i;#r;#a;#s;#o;#c;build(t,i,s,a,o,c,u){this.#r=i,this.#a=s,this.#s=a,this.#o=o,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${rt.svgRound(i[4])} ${rt.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${rt.svgRound(i[10])} ${rt.svgRound(i[11])}`);continue}for(let s=6,a=i.length;s<a;s+=6){const[o,c,u,d,f,g]=i.subarray(s,s+6).map(rt.svgRound);t.push(`C${o} ${c} ${u} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,a],o){const c=[],u=[],[d,f,g,y]=this.#d();let v,A,w,S,_,E,R,C,O;switch(this.#o){case 0:O=rt._rescale,v=t,A=i+a,w=s,S=-a,_=t+d*s,E=i+(1-f-y)*a,R=t+(d+g)*s,C=i+(1-f)*a;break;case 90:O=rt._rescaleAndSwap,v=t,A=i,w=s,S=a,_=t+f*s,E=i+d*a,R=t+(f+y)*s,C=i+(d+g)*a;break;case 180:O=rt._rescale,v=t+s,A=i,w=-s,S=a,_=t+(1-d-g)*s,E=i+f*a,R=t+(1-d)*s,C=i+(f+y)*a;break;case 270:O=rt._rescaleAndSwap,v=t+s,A=i+a,w=-s,S=-a,_=t+(1-f-y)*s,E=i+(1-d-g)*a,R=t+(1-f)*s,C=i+(1-d)*a;break}for(const{line:D,points:k}of this.#i)c.push(O(D,v,A,w,S,o?new Array(D.length):null)),u.push(O(k,v,A,w,S,o?new Array(k.length):null));return{lines:c,points:u,rect:[_,E,R,C]}}static deserialize(t,i,s,a,o,{paths:{lines:c,points:u},rotation:d,thickness:f}){const g=[];let y,v,A,w,S;switch(d){case 0:S=rt._rescale,y=-t/s,v=i/a+1,A=1/s,w=-1/a;break;case 90:S=rt._rescaleAndSwap,y=-i/a,v=-t/s,A=1/a,w=1/s;break;case 180:S=rt._rescale,y=t/s+1,v=-i/a,A=-1/s,w=1/a;break;case 270:S=rt._rescaleAndSwap,y=i/a+1,v=t/s+1,A=-1/a,w=-1/s;break}if(!c){c=[];for(const E of u){const R=E.length;if(R===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(R===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(R-2));c.push(C);let[O,D,k,z]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,O,D],0);for(let V=4;V<R;V+=2){const Y=E[V],tt=E[V+1];C.set(rt.createBezierPoints(O,D,k,z,Y,tt),(V-2)*3),[O,D,k,z]=[k,z,Y,tt]}}}for(let E=0,R=c.length;E<R;E++)g.push({line:S(c[E].map(C=>C??NaN),y,v,A,w),points:S(u[E].map(C=>C??NaN),y,v,A,w)});const _=new this.prototype.constructor;return _.build(g,s,a,1,d,f,o),_}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#r,i/this.#a]:[i/this.#a,i/this.#r]}#d(){const[t,i,s,a]=this.#t,[o,c]=this.#l(0);return[t+o,i+c,s-2*o,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)lt.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],c=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,g,y,v,A,w]=a.subarray(u,u+6);lt.bezierBoundingBox(o,c,f,g,y,v,A,w,t),o=A,c=w}}const[i,s]=this.#l();t[0]=ke(t[0]-i,0,1),t[1]=ke(t[1]-s,0,1),t[2]=ke(t[2]+i,0,1),t[3]=ke(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[c,u]=[a-i,o-s],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[a,o]=this.#l();this.#r=t,this.#a=i,this.#s=s;const[c,u]=this.#l(),d=c-a,f=u-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(rt.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(t)} ${rt.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,a=0,o=0,c=0,u=0,d=0;switch(this.#e){case 90:a=i/t,o=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,d=i;break;case 270:a=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${a} ${o} ${c} ${rt.svgRound(u)} ${rt.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,a]){const[o,c]=this.#l(),[u,d,f,g]=this.#t;if(Math.abs(f-o)<=rt.PRECISION||Math.abs(g-c)<=rt.PRECISION){const S=t+s/2-(u+f/2),_=i+a/2-(d+g/2);return{path:{"transform-origin":`${rt.svgRound(t)} ${rt.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(s-2*o)/(f-2*o),v=(a-2*c)/(g-2*c),A=f/s,w=g/a;return{path:{"transform-origin":`${rt.svgRound(u)} ${rt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${rt.svgRound(o)} ${rt.svgRound(c)}) scale(${y} ${v}) translate(${rt.svgRound(-o)} ${rt.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,a]){const[o,c]=this.#l(),u=this.#t,[d,f,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=a,Math.abs(g-o)<=rt.PRECISION||Math.abs(y-c)<=rt.PRECISION){const _=t+s/2-(d+g/2),E=i+a/2-(f+y/2);for(const{line:R,points:C}of this.#i)rt._translate(R,_,E,R),rt._translate(C,_,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(t)} ${rt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(s-2*o)/(g-2*o),A=(a-2*c)/(y-2*c),w=-v*(d+o)+t+o,S=-A*(f+c)+i+c;if(v!==1||A!==1||w!==0||S!==0)for(const{line:_,points:E}of this.#i)rt._rescale(_,w,S,v,A,_),rt._rescale(E,w,S,v,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(t)} ${rt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[a,o]=s,c=this.#t,u=t-c[0],d=i-c[1];if(this.#r===a&&this.#a===o)for(const{line:f,points:g}of this.#i)rt._translate(f,u,d,f),rt._translate(g,u,d,g);else{const f=this.#r/a,g=this.#a/o;this.#r=a,this.#a=o;for(const{line:y,points:v}of this.#i)rt._rescale(y,u,d,f,g,y),rt._rescale(v,u,d,f,g,v);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${rt.svgRound(t)} ${rt.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${rt.svgRound(t[0])} ${rt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Cl extends Rv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Cl(this._viewParameters);return t.updateAll(this),t}}class cd extends zt{static _type="ink";static _editorType=St.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){dt.initialize(t,i),this._defaultDrawingOptions=new Cl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Et(this,"typesMap",new Map([[Lt.INK_THICKNESS,"stroke-width"],[Lt.INK_COLOR,"stroke"],[Lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,a,o){return new yE(t,i,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,a,o,c){return Lr.deserialize(t,i,s,a,o,c)}static async deserialize(t,i,s){let a=null;if(t instanceof od){const{data:{inkLists:c,rect:u,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:v},popupRef:A,richText:w,contentsObj:S,creationDate:_,modificationDate:E},parent:{page:{pageNumber:R}}}=t;a=t={annotationType:St.INK,color:Array.from(g),thickness:v,opacity:y,paths:{points:c},boxes:null,pageIndex:R-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:_,modificationDate:E}}const o=await super.deserialize(t,i,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Sr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=cd.getDefaultDrawingOptions({stroke:lt.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:dt._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class jh extends Lr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const rl=8,ur=3;class Zs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,a){return s-=t,a-=i,s===0?a>0?0:4:s===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,a,o,c,u){const d=this.#e(s,a,o,c);for(let f=0;f<8;f++){const g=(-f+d-u+16)%8,y=this.#n[2*g],v=this.#n[2*g+1];if(t[(s+y)*i+(a+v)]!==0)return g}return-1}static#r(t,i,s,a,o,c,u){const d=this.#e(s,a,o,c);for(let f=0;f<8;f++){const g=(f+d+u+16)%8,y=this.#n[2*g],v=this.#n[2*g+1];if(t[(s+y)*i+(a+v)]!==0)return g}return-1}static#a(t,i,s,a){const o=t.length,c=new Int32Array(o);for(let g=0;g<o;g++)c[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)c[g*i]=c[g*i+i-1]=0;for(let g=0;g<i;g++)c[g]=c[i*s-1-g]=0;let u=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<i-1;y++){const v=g*i+y,A=c[v];if(A===0)continue;let w=g,S=y;if(A===1&&c[v-1]===0)u+=1,S-=1;else if(A>=1&&c[v+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const _=[y,g],E=S===y+1,R={isHole:E,points:_,id:u,parent:0};f.push(R);let C;for(const et of f)if(et.id===d){C=et;break}C?C.isHole?R.parent=E?C.parent:d:R.parent=E?d:C.parent:R.parent=E?d:0;const O=this.#i(c,i,g,y,w,S,0);if(O===-1){c[v]=-u,c[v]!==1&&(d=Math.abs(c[v]));continue}let D=this.#n[2*O],k=this.#n[2*O+1];const z=g+D,V=y+k;w=z,S=V;let Y=g,tt=y;for(;;){const et=this.#r(c,i,Y,tt,w,S,1);D=this.#n[2*et],k=this.#n[2*et+1];const ft=Y+D,mt=tt+k;_.push(mt,ft);const pt=Y*i+tt;if(c[pt+1]===0?c[pt]=-u:c[pt]===1&&(c[pt]=u),ft===g&&mt===y&&Y===z&&tt===V){c[v]!==1&&(d=Math.abs(c[v]));break}else w=Y,S=tt,Y=ft,tt=mt}}}return f}static#s(t,i,s,a){if(s-i<=4){for(let z=i;z<s-2;z+=2)a.push(t[z],t[z+1]);return}const o=t[i],c=t[i+1],u=t[s-4]-o,d=t[s-3]-c,f=Math.hypot(u,d),g=u/f,y=d/f,v=g*c-y*o,A=d/u,w=1/f,S=Math.atan(A),_=Math.cos(S),E=Math.sin(S),R=w*(Math.abs(_)+Math.abs(E)),C=w*(1-R+R**2),O=Math.max(Math.atan(Math.abs(E+_)*C),Math.atan(Math.abs(E-_)*C));let D=0,k=i;for(let z=i+2;z<s-2;z+=2){const V=Math.abs(v-g*t[z+1]+y*t[z]);V>D&&(k=z,D=V)}D>(f*O)**2?(this.#s(t,i,k+2,a),this.#s(t,k,s,a)):a.push(o,c)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,a,o,c){const u=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let S=0;S<c;S++){const _=(S-f)**2;for(let E=0;E<c;E++)u[S*c+E]=Math.exp((_+(E-f)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const v=t.length,A=new Uint8Array(v),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let _=0;_<i;_++){const E=S*i+_,R=t[E];let C=0,O=0;for(let k=0;k<c;k++){const z=S+k-f;if(!(z<0||z>=s))for(let V=0;V<c;V++){const Y=_+V-f;if(Y<0||Y>=i)continue;const tt=t[z*i+Y],et=u[k*c+V]*g[Math.abs(tt-R)];C+=tt*et,O+=et}}const D=A[E]=Math.round(C/O);w[D]++}return[A,w]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const c=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*c;return s}static#h(t){let i,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-c>a&&(a=i-c,u=i-1),s=d,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let c=s,u=a;if(s>o||a>o){let v=s,A=a,w=Math.log2(Math.max(s,a)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){c=Math.ceil(v/2),u=Math.ceil(A/2);const R=new OffscreenCanvas(c,u);R.getContext("2d").drawImage(t,0,0,v,A,0,0,c,u),v=c,A=u,t!==i&&t.close(),t=R.transferToImageBitmap()}const _=Math.min(o/c,o/u);c=Math.round(c*_),u=Math.round(u*_)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const g=f.getImageData(0,0,c,u).data;return[this.#d(g),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:a},o,c,u,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,v=g.font=`${s} ${a} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:E,fontBoundingBoxDescent:R,width:C}=g.measureText(t),O=1.5,D=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,C)*O),k=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(E)+Math.abs(R)||y)*O);f=new OffscreenCanvas(D,k),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=v,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,D,k),g.fillStyle="black",g.fillText(t,D*(O-1)/2,k*(3-O)/2);const z=this.#d(g.getImageData(0,0,D,k).data),V=this.#l(z),Y=this.#h(V),tt=this.#a(z,D,k,Y);return this.processDrawnLines({lines:{curves:tt,width:D,height:k},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,a,o){const[c,u,d]=this.#f(t),[f,g]=this.#c(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),v=this.#a(f,u,d,y);return this.processDrawnLines({lines:{curves:v,width:u,height:d},pageWidth:i,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:c,areContours:u}){a%180!==0&&([i,s]=[s,i]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,v=[],A=Math.min(i/f,s/g),w=A/i,S=A/s,_=[];for(const{points:R}of d){const C=c?this.#o(R):R;if(!C)continue;_.push(C);const O=C.length,D=new Float32Array(O),k=new Float32Array(3*(O===2?2:O-2));if(v.push({line:k,points:D}),O===2){D[0]=C[0]*w,D[1]=C[1]*S,k.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[z,V,Y,tt]=C;z*=w,V*=S,Y*=w,tt*=S,D.set([z,V,Y,tt],0),k.set([NaN,NaN,NaN,NaN,z,V],0);for(let et=4;et<O;et+=2){const ft=D[et]=C[et]*w,mt=D[et+1]=C[et+1]*S;k.set(rt.createBezierPoints(z,V,Y,tt,ft,mt),(et-2)*3),[z,V,Y,tt]=[Y,tt,ft,mt]}}if(v.length===0)return null;const E=u?new jh:new Lr;return E.build(v,i,s,1,a,u?0:y,o),{outline:E,newCurves:_,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:a,height:o}){let c=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let O=2,D=C.length;O<D;O++){const k=C[O]-C[O-2];c=Math.min(c,k),u=Math.max(u,k)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=rl+ur*g,v=new Uint32Array(y);let A=0;v[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,v[A++]=0,v[A++]=a,v[A++]=o,v[A++]=i?0:1,v[A++]=Math.max(0,Math.floor(s??0)),v[A++]=g,v[A++]=f.BYTES_PER_ELEMENT;for(const C of t)v[A++]=C.length-2,v[A++]=C[0],v[A++]=C[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(v);const _=f.prototype.constructor;for(const C of t){const O=new _(C.length-2);for(let D=2,k=C.length;D<k;D++)O[D-2]=C[D]-C[D-2];S.write(O)}S.close();const E=await new Response(w.readable).arrayBuffer(),R=new Uint8Array(E);return Jy(R)}static async decompressSignature(t){try{const i=N1(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const C of s)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,u),u+=C.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],v=d[4]===0,A=d[5],w=d[6],S=d[7],_=[],E=(rl+ur*w)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(S){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(c.buffer,E);break}u=0;for(let C=0;C<w;C++){const O=d[ur*C+rl],D=new Float32Array(O+2);_.push(D);for(let k=0;k<ur-1;k++)D[k]=d[ur*C+rl+k+1];for(let k=0;k<O;k++)D[k+2]=D[k]+R[u++]}return{areContours:v,thickness:A,outlines:_,width:g,height:y}}catch(i){return bt(`decompressSignature: ${i}`),null}}}class ud extends Rv{constructor(){super(),super.updateProperties({fill:dt._defaultLineColor,"stroke-width":0})}clone(){const t=new ud;return t.updateAll(this),t}}class hd extends Cl{constructor(t){super(t),super.updateProperties({stroke:dt._defaultLineColor,"stroke-width":1})}clone(){const t=new hd(this._viewParameters);return t.updateAll(this),t}}class Li extends zt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=St.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){dt.initialize(t,i),this._defaultDrawingOptions=new ud,this._defaultDrawnSignatureOptions=new hd(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return Et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:v}=this.parent.viewport,A=Zs.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:v,innerMargin:Li._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:a,height:o}=this.#n,c=Math.max(a,o),u=Zs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,a){const{x:o,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof jh,this.description=s;let d;this.#t?d=Li.getDefaultDrawingOptions():(d=Li._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Zs.process(t,i,s,a,Li._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return Zs.extractContoursFromText(t,i,s,a,o,Li._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Zs.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:a,innerMargin:Li._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Li.getDefaultDrawingOptions():(this._drawingOptions=Li._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,a,o,c){return c.areContours?jh.deserialize(t,i,s,a,o,c):Lr.deserialize(t,i,s,a,o,c)}static async deserialize(t,i,s){const a=await super.deserialize(t,i,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class vE extends dt{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=St.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){dt.initialize(t,i)}static isHandlingMimeForPasting(t){return Nh.includes(t)}static paste(t,i){i.pasteEditor({mode:St.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Nh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[a,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*a,s=this.height*o;else if(i>c*a||s>c*o){const d=Math.min(c*a/i,c*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:a,height:o}=this.#t,c=new Ni;let u=this.#t,d=a,f=o,g=null;if(i){if(a>i||o>i){const k=Math.min(i/a,i/o);d=Math.floor(a*k),f=Math.floor(o*k)}g=document.createElement("canvas");const v=g.width=Math.ceil(d*c.sx),A=g.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(v,A));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":U1.isDarkMode&&(S="#8f8f9d",_="#42414d");const E=15,R=E*c.sx,C=E*c.sy,O=new OffscreenCanvas(R*2,C*2),D=O.getContext("2d");D.fillStyle=S,D.fillRect(0,0,R*2,C*2),D.fillStyle=_,D.fillRect(0,0,R,C),D.fillRect(R,C,R,C),w.fillStyle=w.createPattern(O,"repeat"),w.fillRect(0,0,v,A),w.drawImage(u,0,0,u.width,u.height,0,0,v,A)}let y=null;if(s){let v,A;if(c.symmetric&&u.width<t&&u.height<t)v=u.width,A=u.height;else if(u=this.#t,a>t||o>t){const _=Math.min(t/a,t/o);v=Math.floor(a*_),A=Math.floor(o*_),this.#l||(u=this.#u(v,A))}const S=new OffscreenCanvas(v,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,v,A),y={width:v,height:A,data:S.getImageData(0,0,v,A).data}}return{canvas:g,width:d,height:f,imageData:y}}#u(t,i){const{width:s,height:a}=this.#t;let o=s,c=a,u=this.#t;for(;o>2*t||c>2*i;){const d=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(o,c);g.getContext("2d").drawImage(u,0,0,d,f,0,0,o,c),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:a}=this,o=new Ni,c=Math.ceil(s*t*o.sx),u=Math.ceil(a*i*o.sy),d=this.#s;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const f=this.#l?this.#t:this.#u(c,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,a=Math.round(this.width*i*oa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*oa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let a=null,o=!1;if(t instanceof Cv){const{data:{rect:S,rotation:_,id:E,structParent:R,popupRef:C,richText:O,contentsObj:D,creationDate:k,modificationDate:z},container:V,parent:{page:{pageNumber:Y}},canvas:tt}=t;let et,ft;tt?(delete t.canvas,{id:et,bitmap:ft}=s.imageManager.getFromCanvas(V.id,tt),tt.remove()):(o=!0,t._hasNoCanvas=!0);const mt=(await i._structTree.getAriaAttributes(`${Js}${E}`))?.get("aria-label")||"";a=t={annotationType:St.STAMP,bitmapId:et,bitmap:ft,pageIndex:Y-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:mt},isSvg:!1,structParent:R,popupRef:C,richText:O,comment:D?.str||null,creationDate:k,modificationDate:z}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:v}=t;o?(s.addMissingCanvas(t.id,c),c.#o=!0):g&&s.imageManager.isValidId(g)?(c.#e=g,d&&(c.#t=d)):c.#i=f,c.#l=y;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,v&&(c.altTextData=v),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#b(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class tn{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([Ae,cd,vE,re,Li].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:g}){const y=[...tn.#p.values()];if(!tn._initialized){tn._initialized=!0;for(const v of y)v.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=c,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===St.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case St.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case St.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case St.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===St.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of tn.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const a=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const v=document.elementsFromPoint(u,d);if(y.toggle("getElements",!1),!this.div.contains(v[0]))return;let A;const w=new RegExp(`^${yr}[0-9]+$`);for(const _ of v)if(w.test(_.id)){A=_.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:a,capture:!0})}const t=this.#n,i=[];if(t){const a=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){a.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const a of tn.#p.values())s.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=Me.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),re.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),dt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#a.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#v(){return tn.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const i=this.#v;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#E(),o=this.getNextId(),c=this.#T({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await tn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const a=this.getNextId(),o=this.#T({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:i,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+a),f=(o+u)/2-t,g=(c+d)/2-i,[y,v]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=Me.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===St.STAMP||s===St.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===St.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=Me.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,i,s){const a=this.#u.findParent(i,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,os(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,os(this.div,{rotation:s}),i!==s)for(const a of this.#a.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class xe{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return Et(this,"_svgFactory",new ml)}static#r(t,[i,s,a,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*a}%`,c.height=`${100*o}%`}#a(){const t=xe._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=xe._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${i}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=xe._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),a}#o(t,i){for(const[s,a]of Object.entries(i))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,i=!1,s=!1){const a=xe.#i++,o=this.#a(),c=xe._svgFactory.createElement("defs");o.append(c);const u=xe._svgFactory.createElement("path");c.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(a,u);const f=s?this.#s(c,d):null,g=xe._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=xe.#i++,a=this.#a(),o=xe._svgFactory.createElement("defs");a.append(o);const c=xe._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const y=xe._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const v=xe._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const A=xe._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=xe._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:a,rootClass:o,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&xe.#r(u,a),o){const{classList:d}=u;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(c){const f=u.firstChild.firstChild;this.#o(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ih};globalThis.pdfjsLib={AbortException:Bn,AnnotationEditorLayer:tn,AnnotationEditorParamsType:Lt,AnnotationEditorType:St,AnnotationEditorUIManager:Pn,AnnotationLayer:ld,AnnotationMode:On,AnnotationType:pe,applyOpacity:H1,build:$w,ColorPicker:mi,createValidAbsoluteUrl:Ky,CSSConstants:I1,DOMSVGFactory:ml,DrawLayer:xe,FeatureTest:Me,fetchData:Cr,findContrastColor:j1,getDocument:vv,getFilenameFromUrl:k1,getPdfFilenameFromUrl:B1,getRGB:Rr,getUuid:Zy,getXfaPageViewport:z1,GlobalWorkerOptions:aa,ImageKind:ul,InvalidPDFException:Lh,isDataScheme:El,isPdfFile:Zh,isValidExplicitDest:Z1,MathClamp:ke,noContextMenu:yi,normalizeUnicode:L1,OPS:vr,OutputScale:Ni,PasswordResponses:w1,PDFDataRangeTransport:bv,PDFDateString:Oh,PDFWorker:Ar,PermissionFlag:S1,PixelsPerInch:oa,RenderingCancelledException:Qh,renderRichText:ev,ResponseException:pl,setLayerDimensions:os,shadow:Et,SignatureExtractor:Zs,stopEvent:ne,SupportedImageMimeTypes:Nh,TextLayer:Oe,TouchManager:_l,updateUrlHash:Wy,Util:lt,VerbosityLevel:Al,version:Xw,XfaLayer:tv};const bE="/assets/pdf.worker.min-Cpi8b8z3.mjs";typeof window<"u"&&(aa.workerSrc=bE);const AE="eng",SE=h=>h.replace(/_/g," ");function wE(h){if(h)return t=>{if(!t?.status)return;const i=typeof t.progress=="number"?Math.round(t.progress*100):null,s=SE(t.status);h(i!=null?`${s} (${i}%)`:s)}}async function Mv(h,t){t?.("Running OCR...");const{data:i}=await A1.recognize(h,AE,{logger:wE(t)});return t?.("Finished OCR"),i.text?.trim()??""}async function EE(h,t){t?.("Loading PDF...");const i=await vv({data:await h.arrayBuffer()}).promise,s=[];for(let o=1;o<=i.numPages;o+=1){const c=await i.getPage(o),u=c.getViewport({scale:2}),d=document.createElement("canvas"),f=d.getContext("2d");d.width=u.width,d.height=u.height,t?.(`Rendering page ${o}/${i.numPages}...`),await c.render({canvasContext:f,viewport:u}).promise,t?.(`Recognizing page ${o}/${i.numPages}...`);const g=await Mv(d,y=>t?.(`Page ${o}/${i.numPages}: ${y}`));g&&s.push(g),d.width=0,d.height=0}const a=s.join(`

`).trim();return t?.("Finished scanning PDF"),a}function _E({left:h,right:t}){return N.jsx("div",{className:"container",style:{paddingBlock:48},children:N.jsxs("div",{className:"converter-grid",children:[h,t]})})}const TE=[{value:"text",label:"Paste Text"},{value:"image",label:"Upload Image"},{value:"pdf",label:"Upload PDF"}];function CE({value:h,onChange:t}){return N.jsx("div",{className:"tabs",children:TE.map(i=>N.jsx("button",{className:["tab-button",h===i.value?"active":""].join(" "),type:"button",onClick:()=>t?.(i.value),children:i.label},i.value))})}function xE({label:h,helperText:t,...i}){return N.jsxs("div",{style:{width:"100%"},children:[h?N.jsx("label",{className:"label",children:h}):null,N.jsx("textarea",{className:"textarea",...i}),t?N.jsx("div",{className:"helper",children:t}):null]})}function RE({value:h,onChange:t}){return N.jsx(xE,{label:"Paste your recipe",placeholder:"Paste your recipe text here...",helperText:"Well detect ingredients and instructions.",value:h,onChange:i=>t?.(i.target.value)})}function Dv({label:h,helperText:t,accept:i,onFileSelect:s,statusText:a,errorText:o,isProcessing:c}){const u=K.useRef(null),[d,f]=K.useState(""),g=y=>{const v=y.target.files?.[0];f(v?v.name:""),s?.(v??null)};return N.jsxs("div",{children:[h?N.jsx("label",{className:"label",children:h}):null,N.jsxs("div",{className:"dropzone",role:"button",tabIndex:0,onClick:()=>u.current?.click(),onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),u.current?.click())},children:[N.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Drop or upload a file"}),N.jsx("div",{className:"muted-text",style:{marginBottom:8},children:t||"Images or PDFs are welcome for now."}),d?N.jsx("div",{style:{fontWeight:600},children:d}):null,c?N.jsx("div",{className:"muted-text",style:{marginTop:8,fontWeight:600},children:"Processing with OCR..."}):null,a?N.jsx("div",{className:"muted-text",style:{marginTop:4},children:a}):null,o?N.jsx("div",{style:{marginTop:8,color:"#b23b3b",fontWeight:700},children:o}):null]}),N.jsx("input",{ref:u,type:"file",accept:i,style:{display:"none"},onChange:g})]})}function ME({onFileChange:h,status:t,error:i,isLoading:s}){return N.jsx(Dv,{label:"Upload an image",helperText:"PNG or JPG is great. Well read the text as soon as it finishes uploading.",accept:"image/*",onFileSelect:h,statusText:t,errorText:i,isProcessing:s})}function DE({onFileChange:h,status:t,error:i,isLoading:s}){return N.jsx(Dv,{label:"Upload a PDF",helperText:"Drop your PDF recipe and well run OCR automatically.",accept:"application/pdf",onFileSelect:h,statusText:t,errorText:i,isProcessing:s})}function LE({mode:h,textValue:t,onTextChange:i,onFileChange:s,ocrStatus:a,ocrError:o,isOcrRunning:c}){return h==="image"?N.jsx(ME,{onFileChange:s,status:a,error:o,isLoading:c}):h==="pdf"?N.jsx(DE,{onFileChange:s,status:a,error:o,isLoading:c}):N.jsx(RE,{value:t,onChange:i})}function Cy({label:h,helperText:t,error:i,...s}){return N.jsxs("div",{style:{width:"100%"},children:[h?N.jsx("label",{className:"label",children:h}):null,N.jsx("input",{className:"input",...s}),t?N.jsx("div",{className:"helper",children:t}):null,i?N.jsx("div",{className:"helper",style:{color:"var(--color-terracotta)"},children:i}):null]})}function OE({min:h=1,max:t=12,value:i,onChange:s}){return N.jsxs("div",{children:[N.jsx("input",{className:"slider-track",type:"range",min:h,max:t,value:i,onChange:a=>s?.(Number(a.target.value))}),N.jsxs("div",{className:"helper",style:{marginTop:8},children:["Serving size: ",i]})]})}function NE({originalServings:h,targetServings:t,onOriginalChange:i,onTargetChange:s}){return N.jsxs("div",{style:{display:"grid",gap:14},children:[N.jsxs("div",{className:"two-col",children:[N.jsx(Cy,{type:"number",label:"Original recipe serves",value:h,min:1,onChange:a=>i?.(Number(a.target.value))}),N.jsx(Cy,{type:"number",label:"I want to serve",value:t,min:1,onChange:a=>s?.(Number(a.target.value))})]}),N.jsx(OE,{min:1,max:16,value:t,onChange:s})]})}function kE({inputMode:h,onModeChange:t,recipeText:i,onRecipeTextChange:s,onFileChange:a,ocrStatus:o,ocrError:c,originalServings:u,targetServings:d,onOriginalChange:f,onTargetChange:g,onConvert:y,isLoading:v,isOcrRunning:A}){const w=v||A,S=A?"Processing upload...":v?"Converting...":"Convert Recipe";return N.jsxs("div",{className:"card",style:{display:"grid",gap:16},children:[N.jsxs("div",{className:"converter-header",children:[N.jsxs("div",{children:[N.jsx("h3",{style:{fontSize:20,marginBottom:6},children:"1. Add your recipe"}),N.jsx("p",{className:"muted-text",children:"Paste text or upload a file to get started."})]}),N.jsx(CE,{value:h,onChange:t})]}),N.jsx(LE,{mode:h,textValue:i,onTextChange:s,onFileChange:a,ocrStatus:o,ocrError:c,isOcrRunning:A}),N.jsxs("div",{children:[N.jsx("h4",{style:{marginBottom:12,fontSize:18},children:"2. Servings"}),N.jsx(NE,{originalServings:u,targetServings:d,onOriginalChange:f,onTargetChange:g})]}),N.jsx(kn,{onClick:y,variant:"primary",size:"lg",fullWidth:!0,disabled:w,style:{marginTop:8,fontSize:16},children:S})]})}function BE({title:h,description:t}){return N.jsxs("div",{style:{textAlign:"center",padding:"40px 16px"},children:[N.jsx("div",{className:"badge badge-neutral",style:{marginBottom:12},children:"Converter"}),N.jsx("h3",{style:{fontSize:20,marginBottom:10},children:h}),N.jsx("p",{className:"muted-text",children:t})]})}function PE({value:h,onChange:t}){return N.jsx("input",{className:"input",style:{fontSize:22,fontWeight:900,borderWidth:0,border:"none",padding:0,marginBottom:12},value:h,onChange:i=>t?.(i.target.value)})}function Lv({variant:h="sage",children:t}){const i=["badge",`badge-${h}`].join(" ");return N.jsx("span",{className:i,children:t})}function zE({serves:h,originalServes:t}){return N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:16,flexWrap:"wrap"},children:[N.jsxs(Lv,{variant:"sage",children:["Serves ",h]}),t?N.jsxs("span",{className:"muted-text",children:["Scaled from ",t," servings"]}):null]})}function FE({amount:h,unit:t,name:i,highlightChange:s}){return N.jsxs("li",{style:{display:"flex",gap:10,alignItems:"baseline",padding:"6px 0",borderBottom:"1px solid rgba(61,64,91,0.08)"},children:[N.jsxs("span",{style:{color:s?"var(--color-terracotta)":"var(--color-text)",fontWeight:700},children:[h," ",t]}),N.jsx("span",{style:{color:"var(--color-text)"},children:i})]})}function UE({items:h}){return N.jsxs("div",{children:[N.jsx("h4",{style:{marginBottom:10},children:"Ingredients"}),N.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:h?.map(t=>N.jsx(FE,{...t},t.name))})]})}function IE({instructions:h,editable:t=!1,onChange:i}){return t?N.jsxs("div",{style:{marginTop:18},children:[N.jsx("label",{className:"label",children:"Notes / Instructions"}),N.jsx("textarea",{className:"textarea",value:h,onChange:s=>i?.(s.target.value),rows:6})]}):N.jsxs("div",{style:{marginTop:18},children:[N.jsx("h4",{style:{marginBottom:8},children:"Instructions"}),N.jsx("p",{className:"muted-text",children:h||"Paste instructions to keep everything together."})]})}function HE({recipe:h,isLoading:t,onCopy:i,onSave:s,onTitleChange:a}){return h?N.jsxs(mr,{children:[N.jsx(PE,{value:h.title,onChange:a}),N.jsx(zE,{serves:h.serves,originalServes:h.originalServes}),N.jsx(UE,{items:h.ingredients}),N.jsx(IE,{instructions:h.instructions}),N.jsxs("div",{style:{display:"flex",gap:10,marginTop:18,flexWrap:"wrap"},children:[N.jsx(kn,{variant:"primary",size:"md",onClick:i,children:"Copy"}),N.jsx(kn,{variant:"secondary",size:"md",onClick:s,children:"Save"})]})]}):N.jsx(mr,{children:N.jsx(BE,{title:t?"Converting...":"No recipe yet",description:"Run your first conversion to preview ingredients and notes."})})}function jE(){const[h,t]=K.useState("text"),[i,s]=K.useState(""),[a,o]=K.useState(null),[c,u]=K.useState(4),[d,f]=K.useState(6),[g,y]=K.useState(null),[v,A]=K.useState(!1),[w,S]=K.useState(!1),[_,E]=K.useState(""),[R,C]=K.useState(""),O=K.useMemo(()=>c>0?d/c:1,[c,d]),D=async Y=>{if(o(Y),C(""),!Y){s(""),E("");return}S(!0),E("Preparing file...");try{const ft=(Y.type==="application/pdf"||Y.name?.toLowerCase().endsWith(".pdf")?await EE(Y,E):await Mv(Y,E)).trim();s(ft),E(ft?"Text captured from your upload.":"No text detectedtry another file.")}catch(tt){console.error(tt),C("We could not read that file. Try a clearer scan or another file."),E("")}finally{S(!1)}},k=()=>{A(!0),setTimeout(()=>{const Y=KS(i),tt=WS(Y.ingredients,O);y({...Y,title:Y.title||"Converted Recipe",serves:d,originalServes:c,ingredients:tt,source:a?.name}),A(!1)},250)},z=()=>{if(!g)return;const Y=[`Recipe: ${g.title}`,`Serves: ${g.serves} (from ${g.originalServes})`,"","Ingredients:",...g.ingredients.map(tt=>`- ${tt.amount} ${tt.unit} ${tt.name}`.trim()),"","Instructions:",g.instructions].join(`
`);navigator.clipboard?.writeText(Y)},V=()=>{if(!g)return;const Y=JS(g);alert(`Saved ${Y.title} to your recipes.`)};return N.jsxs("div",{style:{background:"var(--color-cream-muted)",paddingBottom:48,paddingTop:16},children:[N.jsx("div",{className:"container",style:{paddingBottom:0},children:N.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:N.jsxs("div",{children:[N.jsx("p",{className:"badge badge-neutral",style:{marginBottom:8},children:"App"}),N.jsx("h2",{style:{fontSize:34},children:"Converter"}),N.jsx("p",{className:"muted-text",children:"Paste, upload, and scale in one focused workspace."})]})})}),N.jsx(_E,{left:N.jsx(kE,{inputMode:h,onModeChange:t,recipeText:i,onRecipeTextChange:s,onFileChange:D,ocrStatus:_,ocrError:R,isOcrRunning:w,originalServings:c,targetServings:d,onOriginalChange:u,onTargetChange:f,onConvert:k,isLoading:v}),right:N.jsx(HE,{recipe:g,isLoading:v,onCopy:z,onSave:V,onTitleChange:Y=>y(tt=>tt&&{...tt,title:Y})})})]})}function GE(h){if(!h)return"Saved recipe";const t=new Date(h);return Number.isNaN(t.getTime())?"Saved recipe":t.toLocaleDateString(void 0,{month:"short",day:"numeric"})}function qE({title:h,serves:t,createdAt:i,onOpen:s}){return N.jsx(mr,{children:N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"flex-start"},children:[N.jsxs("div",{children:[N.jsx("h3",{style:{fontSize:18,marginBottom:6},children:h}),N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[N.jsxs(Lv,{variant:"sage",children:["Serves ",t]}),N.jsx("span",{className:"muted-text",style:{fontSize:13},children:GE(i)})]})]}),N.jsx(kn,{variant:"secondary",size:"sm",onClick:s,children:"Open"})]})})}function VE({recipes:h,onSelect:t}){return h?.length?N.jsx("div",{style:{display:"grid",gap:14},children:h.map(i=>N.jsx(qE,{...i,onOpen:()=>t?.(i.id)},i.id))}):N.jsx("div",{className:"muted-text",children:"No saved conversions yet."})}function YE(){const[h,t]=K.useState([]);return K.useEffect(()=>{t(ZS())},[]),N.jsx("section",{className:"section",style:{background:"var(--color-cream)"},children:N.jsxs("div",{className:"container",children:[N.jsxs("div",{style:{marginBottom:18},children:[N.jsx("p",{className:"badge badge-neutral",style:{marginBottom:8},children:"Saved"}),N.jsx("h2",{style:{fontSize:32,marginBottom:8},children:"Recent Conversions"}),N.jsx("p",{className:"muted-text",children:"Quick access to recipes youve already scaled."})]}),N.jsx(VE,{recipes:h,onSelect:i=>alert(`Open saved recipe ${i}`)})]})})}function XE(){return N.jsx(FS,{children:N.jsxs(iS,{children:[N.jsx(ol,{path:"/",element:N.jsx(XS,{})}),N.jsx(ol,{path:"/app",element:N.jsx(jE,{})}),N.jsx(ol,{path:"/saved",element:N.jsx(YE,{})})]})})}uA.createRoot(document.getElementById("root")).render(N.jsx(K.StrictMode,{children:N.jsx(TS,{children:N.jsx(XE,{})})}));
